import"./chunk-IT3H3JI7.js";import{c as Rn,d as kn,e as Yi,f as au,g as si,h as nb,i as cu,j as rb,k as lu,l as On,m as jR,t as ib,u as ob,v as sb,x as Dr,y as ab,z as Pp}from"./chunk-G4LRZDRP.js";import"./chunk-2CHKNOYI.js";import"./chunk-Y4J7MCAH.js";import"./chunk-7ROB2H2Z.js";import{b as uu,e as cb}from"./chunk-X67RATLZ.js";import{D as Mn,M as Ko,R as Ut,T as Op,U as tb,V as et,X as Np,a as M,b as Ce,c as Ha,d as q,e as UR,f as ii,g,h as I,i as J,j as qn,m as Je,o as eb,q as Ga,s as za,w as oi}from"./chunk-4XXAUZV5.js";var z1=q((Efe,aw)=>{"use strict";var wa=typeof Reflect=="object"?Reflect:null,P1=wa&&typeof wa.apply=="function"?wa.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Xh;wa&&typeof wa.ownKeys=="function"?Xh=wa.ownKeys:Object.getOwnPropertySymbols?Xh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Xh=function(e){return Object.getOwnPropertyNames(e)};function e3(t){console&&console.warn&&console.warn(t)}var L1=Number.isNaN||function(e){return e!==e};function Le(){Le.init.call(this)}aw.exports=Le;aw.exports.once=i3;Le.EventEmitter=Le;Le.prototype._events=void 0;Le.prototype._eventsCount=0;Le.prototype._maxListeners=void 0;var F1=10;function Qh(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Le,"defaultMaxListeners",{enumerable:!0,get:function(){return F1},set:function(t){if(typeof t!="number"||t<0||L1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");F1=t}});Le.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Le.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||L1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function B1(t){return t._maxListeners===void 0?Le.defaultMaxListeners:t._maxListeners}Le.prototype.getMaxListeners=function(){return B1(this)};Le.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")P1(c,this,n);else for(var l=c.length,u=H1(c,l),r=0;r<l;++r)P1(u[r],this,n);return!0};function U1(t,e,n,r){var i,o,s;if(Qh(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=B1(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,e3(a)}return t}Le.prototype.addListener=function(e,n){return U1(this,e,n,!1)};Le.prototype.on=Le.prototype.addListener;Le.prototype.prependListener=function(e,n){return U1(this,e,n,!0)};function t3(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function j1(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=t3.bind(r);return i.listener=n,r.wrapFn=i,i}Le.prototype.once=function(e,n){return Qh(n),this.on(e,j1(this,e,n)),this};Le.prototype.prependOnceListener=function(e,n){return Qh(n),this.prependListener(e,j1(this,e,n)),this};Le.prototype.removeListener=function(e,n){var r,i,o,s,a;if(Qh(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():n3(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Le.prototype.off=Le.prototype.removeListener;Le.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function $1(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?r3(i):H1(i,i.length)}Le.prototype.listeners=function(e){return $1(this,e,!0)};Le.prototype.rawListeners=function(e){return $1(this,e,!1)};Le.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):V1.call(t,e)};Le.prototype.listenerCount=V1;function V1(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Le.prototype.eventNames=function(){return this._eventsCount>0?Xh(this._events):[]};function H1(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function n3(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function r3(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function i3(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}G1(t,e,o,{once:!0}),e!=="error"&&o3(t,i,{once:!0})})}function o3(t,e,n){typeof t.on=="function"&&G1(t,"error",e,n)}function G1(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var Pi=q((Dfe,oA)=>{"use strict";oA.exports=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}});var hw=q(sp=>{"use strict";function dz(t){return typeof t!="number"||isNaN(t)?1:t}function fz(t,e){var n={},r=function(s){return typeof s>"u"?e:s};typeof e=="function"&&(r=e);var i=function(s){return r(s[t])},o=function(){return r(void 0)};return typeof t=="string"?(n.fromAttributes=i,n.fromGraph=function(s,a){return i(s.getNodeAttributes(a))},n.fromEntry=function(s,a){return i(a)}):typeof t=="function"?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},n.fromGraph=function(s,a){return r(t(a,s.getNodeAttributes(a)))},n.fromEntry=function(s,a){return r(t(s,a))}):(n.fromAttributes=o,n.fromGraph=o,n.fromEntry=o),n}function sA(t,e){var n={},r=function(s){return typeof s>"u"?e:s};typeof e=="function"&&(r=e);var i=function(s){return r(s[t])},o=function(){return r(void 0)};return typeof t=="string"?(n.fromAttributes=i,n.fromGraph=function(s,a){return i(s.getEdgeAttributes(a))},n.fromEntry=function(s,a){return i(a)},n.fromPartialEntry=n.fromEntry,n.fromMinimalEntry=n.fromEntry):typeof t=="function"?(n.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},n.fromGraph=function(s,a){var c=s.extremities(a);return r(t(a,s.getEdgeAttributes(a),c[0],c[1],s.getNodeAttributes(c[0]),s.getNodeAttributes(c[1]),s.isUndirected(a)))},n.fromEntry=function(s,a,c,l,u,d,f){return r(t(s,a,c,l,u,d,f))},n.fromPartialEntry=function(s,a,c,l){return r(t(s,a,c,l))},n.fromMinimalEntry=function(s,a){return r(t(s,a))}):(n.fromAttributes=o,n.fromGraph=o,n.fromEntry=o,n.fromMinimalEntry=o),n}sp.createNodeValueGetter=fz;sp.createEdgeValueGetter=sA;sp.createEdgeWeightGetter=function(t){return sA(t,dz)}});var dA=q((Ife,uA)=>{"use strict";var dt=0,Qe=1,Ae=2,Me=3,ei=4,ti=5,Pe=6,aA=7,ap=8,cA=9,hz=0,pz=1,gz=2,_t=0,zn=1,Xt=2,Bo=3,Fi=4,rt=5,fn=6,xr=7,_r=8,lA=3,sr=10,mz=3,Bt=9,pw=10;uA.exports=function(e,n,r){var i,o,s,a,c,l,u,d,f,h,p=n.length,m=r.length,v=e.adjustSizes,b=e.barnesHutTheta*e.barnesHutTheta,_,C,D,k,Z,A,N,x=[];for(s=0;s<p;s+=sr)n[s+ei]=n[s+Ae],n[s+ti]=n[s+Me],n[s+Ae]=0,n[s+Me]=0;if(e.outboundAttractionDistribution){for(_=0,s=0;s<p;s+=sr)_+=n[s+Pe];_/=p/sr}if(e.barnesHutOptimize){var we=1/0,G=-1/0,ie=1/0,$=-1/0,V,it,Qt;for(s=0;s<p;s+=sr)we=Math.min(we,n[s+dt]),G=Math.max(G,n[s+dt]),ie=Math.min(ie,n[s+Qe]),$=Math.max($,n[s+Qe]);var ce=G-we,y=$-ie;for(ce>y?(ie-=(ce-y)/2,$=ie+ce):(we-=(y-ce)/2,G=we+y),x[0+_t]=-1,x[0+zn]=(we+G)/2,x[0+Xt]=(ie+$)/2,x[0+Bo]=Math.max(G-we,$-ie),x[0+Fi]=-1,x[0+rt]=-1,x[0+fn]=0,x[0+xr]=0,x[0+_r]=0,i=1,s=0;s<p;s+=sr)for(o=0,Qt=lA;;)if(x[o+rt]>=0){n[s+dt]<x[o+zn]?n[s+Qe]<x[o+Xt]?V=x[o+rt]:V=x[o+rt]+Bt:n[s+Qe]<x[o+Xt]?V=x[o+rt]+Bt*2:V=x[o+rt]+Bt*3,x[o+xr]=(x[o+xr]*x[o+fn]+n[s+dt]*n[s+Pe])/(x[o+fn]+n[s+Pe]),x[o+_r]=(x[o+_r]*x[o+fn]+n[s+Qe]*n[s+Pe])/(x[o+fn]+n[s+Pe]),x[o+fn]+=n[s+Pe],o=V;continue}else if(x[o+_t]<0){x[o+_t]=s;break}else{if(x[o+rt]=i*Bt,d=x[o+Bo]/2,f=x[o+rt],x[f+_t]=-1,x[f+zn]=x[o+zn]-d,x[f+Xt]=x[o+Xt]-d,x[f+Bo]=d,x[f+Fi]=f+Bt,x[f+rt]=-1,x[f+fn]=0,x[f+xr]=0,x[f+_r]=0,f+=Bt,x[f+_t]=-1,x[f+zn]=x[o+zn]-d,x[f+Xt]=x[o+Xt]+d,x[f+Bo]=d,x[f+Fi]=f+Bt,x[f+rt]=-1,x[f+fn]=0,x[f+xr]=0,x[f+_r]=0,f+=Bt,x[f+_t]=-1,x[f+zn]=x[o+zn]+d,x[f+Xt]=x[o+Xt]-d,x[f+Bo]=d,x[f+Fi]=f+Bt,x[f+rt]=-1,x[f+fn]=0,x[f+xr]=0,x[f+_r]=0,f+=Bt,x[f+_t]=-1,x[f+zn]=x[o+zn]+d,x[f+Xt]=x[o+Xt]+d,x[f+Bo]=d,x[f+Fi]=x[o+Fi],x[f+rt]=-1,x[f+fn]=0,x[f+xr]=0,x[f+_r]=0,i+=4,n[x[o+_t]+dt]<x[o+zn]?n[x[o+_t]+Qe]<x[o+Xt]?V=x[o+rt]:V=x[o+rt]+Bt:n[x[o+_t]+Qe]<x[o+Xt]?V=x[o+rt]+Bt*2:V=x[o+rt]+Bt*3,x[o+fn]=n[x[o+_t]+Pe],x[o+xr]=n[x[o+_t]+dt],x[o+_r]=n[x[o+_t]+Qe],x[V+_t]=x[o+_t],x[o+_t]=-1,n[s+dt]<x[o+zn]?n[s+Qe]<x[o+Xt]?it=x[o+rt]:it=x[o+rt]+Bt:n[s+Qe]<x[o+Xt]?it=x[o+rt]+Bt*2:it=x[o+rt]+Bt*3,V===it)if(Qt--){o=V;continue}else{Qt=lA;break}x[it+_t]=s;break}}if(e.barnesHutOptimize)for(C=e.scalingRatio,s=0;s<p;s+=sr)for(o=0;;)if(x[o+rt]>=0)if(A=Math.pow(n[s+dt]-x[o+xr],2)+Math.pow(n[s+Qe]-x[o+_r],2),h=x[o+Bo],4*h*h/A<b){if(D=n[s+dt]-x[o+xr],k=n[s+Qe]-x[o+_r],v===!0?A>0?(N=C*n[s+Pe]*x[o+fn]/A,n[s+Ae]+=D*N,n[s+Me]+=k*N):A<0&&(N=-C*n[s+Pe]*x[o+fn]/Math.sqrt(A),n[s+Ae]+=D*N,n[s+Me]+=k*N):A>0&&(N=C*n[s+Pe]*x[o+fn]/A,n[s+Ae]+=D*N,n[s+Me]+=k*N),o=x[o+Fi],o<0)break;continue}else{o=x[o+rt];continue}else{if(l=x[o+_t],l>=0&&l!==s&&(D=n[s+dt]-n[l+dt],k=n[s+Qe]-n[l+Qe],A=D*D+k*k,v===!0?A>0?(N=C*n[s+Pe]*n[l+Pe]/A,n[s+Ae]+=D*N,n[s+Me]+=k*N):A<0&&(N=-C*n[s+Pe]*n[l+Pe]/Math.sqrt(A),n[s+Ae]+=D*N,n[s+Me]+=k*N):A>0&&(N=C*n[s+Pe]*n[l+Pe]/A,n[s+Ae]+=D*N,n[s+Me]+=k*N)),o=x[o+Fi],o<0)break;continue}else for(C=e.scalingRatio,a=0;a<p;a+=sr)for(c=0;c<a;c+=sr)D=n[a+dt]-n[c+dt],k=n[a+Qe]-n[c+Qe],v===!0?(A=Math.sqrt(D*D+k*k)-n[a+ap]-n[c+ap],A>0?(N=C*n[a+Pe]*n[c+Pe]/A/A,n[a+Ae]+=D*N,n[a+Me]+=k*N,n[c+Ae]-=D*N,n[c+Me]-=k*N):A<0&&(N=100*C*n[a+Pe]*n[c+Pe],n[a+Ae]+=D*N,n[a+Me]+=k*N,n[c+Ae]-=D*N,n[c+Me]-=k*N)):(A=Math.sqrt(D*D+k*k),A>0&&(N=C*n[a+Pe]*n[c+Pe]/A/A,n[a+Ae]+=D*N,n[a+Me]+=k*N,n[c+Ae]-=D*N,n[c+Me]-=k*N));for(f=e.gravity/e.scalingRatio,C=e.scalingRatio,s=0;s<p;s+=sr)N=0,D=n[s+dt],k=n[s+Qe],A=Math.sqrt(Math.pow(D,2)+Math.pow(k,2)),e.strongGravityMode?A>0&&(N=C*n[s+Pe]*f):A>0&&(N=C*n[s+Pe]*f/A),n[s+Ae]-=D*N,n[s+Me]-=k*N;for(C=1*(e.outboundAttractionDistribution?_:1),u=0;u<m;u+=mz)a=r[u+hz],c=r[u+pz],d=r[u+gz],Z=Math.pow(d,e.edgeWeightInfluence),D=n[a+dt]-n[c+dt],k=n[a+Qe]-n[c+Qe],v===!0?(A=Math.sqrt(D*D+k*k)-n[a+ap]-n[c+ap],e.linLogMode?e.outboundAttractionDistribution?A>0&&(N=-C*Z*Math.log(1+A)/A/n[a+Pe]):A>0&&(N=-C*Z*Math.log(1+A)/A):e.outboundAttractionDistribution?A>0&&(N=-C*Z/n[a+Pe]):A>0&&(N=-C*Z)):(A=Math.sqrt(Math.pow(D,2)+Math.pow(k,2)),e.linLogMode?e.outboundAttractionDistribution?A>0&&(N=-C*Z*Math.log(1+A)/A/n[a+Pe]):A>0&&(N=-C*Z*Math.log(1+A)/A):e.outboundAttractionDistribution?(A=1,N=-C*Z/n[a+Pe]):(A=1,N=-C*Z)),A>0&&(n[a+Ae]+=D*N,n[a+Me]+=k*N,n[c+Ae]-=D*N,n[c+Me]-=k*N);var We,Jt,O,w,xe,Re;if(v===!0)for(s=0;s<p;s+=sr)n[s+cA]!==1&&(We=Math.sqrt(Math.pow(n[s+Ae],2)+Math.pow(n[s+Me],2)),We>pw&&(n[s+Ae]=n[s+Ae]*pw/We,n[s+Me]=n[s+Me]*pw/We),Jt=n[s+Pe]*Math.sqrt((n[s+ei]-n[s+Ae])*(n[s+ei]-n[s+Ae])+(n[s+ti]-n[s+Me])*(n[s+ti]-n[s+Me])),O=Math.sqrt((n[s+ei]+n[s+Ae])*(n[s+ei]+n[s+Ae])+(n[s+ti]+n[s+Me])*(n[s+ti]+n[s+Me]))/2,w=.1*Math.log(1+O)/(1+Math.sqrt(Jt)),xe=n[s+dt]+n[s+Ae]*(w/e.slowDown),n[s+dt]=xe,Re=n[s+Qe]+n[s+Me]*(w/e.slowDown),n[s+Qe]=Re);else for(s=0;s<p;s+=sr)n[s+cA]!==1&&(Jt=n[s+Pe]*Math.sqrt((n[s+ei]-n[s+Ae])*(n[s+ei]-n[s+Ae])+(n[s+ti]-n[s+Me])*(n[s+ti]-n[s+Me])),O=Math.sqrt((n[s+ei]+n[s+Ae])*(n[s+ei]+n[s+Ae])+(n[s+ti]+n[s+Me])*(n[s+ti]+n[s+Me]))/2,w=n[s+aA]*Math.log(1+O)/(1+Math.sqrt(Jt)),n[s+aA]=Math.min(1,Math.sqrt(w*(Math.pow(n[s+Ae],2)+Math.pow(n[s+Me],2))/(1+Math.sqrt(Jt)))),xe=n[s+dt]+n[s+Ae]*(w/e.slowDown),n[s+dt]=xe,Re=n[s+Qe]+n[s+Me]*(w/e.slowDown),n[s+Qe]=Re);return{}}});var gw=q(Li=>{"use strict";var Fl=10,fA=3;Li.assign=function(t){t=t||{};var e=Array.prototype.slice.call(arguments).slice(1),n,r,i;for(n=0,i=e.length;n<i;n++)if(e[n])for(r in e[n])t[r]=e[n][r];return t};Li.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null};Li.graphToByteArrays=function(t,e){var n=t.order,r=t.size,i={},o,s=new Float32Array(n*Fl),a=new Float32Array(r*fA);return o=0,t.forEachNode(function(c,l){i[c]=o,s[o]=l.x,s[o+1]=l.y,s[o+2]=0,s[o+3]=0,s[o+4]=0,s[o+5]=0,s[o+6]=1,s[o+7]=1,s[o+8]=l.size||1,s[o+9]=l.fixed?1:0,o+=Fl}),o=0,t.forEachEdge(function(c,l,u,d,f,h,p){var m=i[u],v=i[d],b=e(c,l,u,d,f,h,p);s[m+6]+=b,s[v+6]+=b,a[o]=m,a[o+1]=v,a[o+2]=b,o+=fA}),{nodes:s,edges:a}};Li.assignLayoutChanges=function(t,e,n){var r=0;t.updateEachNodeAttributes(function(i,o){return o.x=e[r],o.y=e[r+1],r+=Fl,n?n(i,o):o})};Li.readGraphPositions=function(t,e){var n=0;t.forEachNode(function(r,i){e[n]=i.x,e[n+1]=i.y,n+=Fl})};Li.collectLayoutChanges=function(t,e,n){for(var r=t.nodes(),i={},o=0,s=0,a=e.length;o<a;o+=Fl){if(n){var c=Object.assign({},t.getNodeAttributes(r[s]));c.x=e[o],c.y=e[o+1],c=n(r[s],c),i[r[s]]={x:c.x,y:c.y}}else i[r[s]]={x:e[o],y:e[o+1]};s++}return i};Li.createWorker=function(e){var n=window.URL||window.webkitURL,r=e.toString(),i=n.createObjectURL(new Blob(["("+r+").call(this);"],{type:"text/javascript"})),o=new Worker(i);return n.revokeObjectURL(i),o}});var mw=q((Afe,hA)=>{"use strict";hA.exports={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}});var mA=q((Mfe,gA)=>{"use strict";var yz=Pi(),vz=hw().createEdgeWeightGetter,wz=dA(),Ll=gw(),bz=mw();function pA(t,e,n){if(!yz(e))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof n=="number"&&(n={iterations:n});var r=n.iterations;if(typeof r!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(r<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var i=vz("getEdgeWeight"in n?n.getEdgeWeight:"weight").fromEntry,o=typeof n.outputReducer=="function"?n.outputReducer:null,s=Ll.assign({},bz,n.settings),a=Ll.validateSettings(s);if(a)throw new Error("graphology-layout-forceatlas2: "+a.message);var c=Ll.graphToByteArrays(e,i),l;for(l=0;l<r;l++)wz(s,c.nodes,c.edges);if(t){Ll.assignLayoutChanges(e,c.nodes,o);return}return Ll.collectLayoutChanges(e,c.nodes)}function xz(t){var e=typeof t=="number"?t:t.order;return{barnesHutOptimize:e>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(e)}}var yw=pA.bind(null,!1);yw.assign=pA.bind(null,!0);yw.inferSettings=xz;gA.exports=yw});var Bl=q((Rfe,vA)=>{"use strict";function _z(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function yA(t,e){t=t||{};var n={};for(var r in e){var i=t[r],o=e[r];if(!_z(o)){n[r]=yA(i,o);continue}i===void 0?n[r]=o:n[r]=i}return n}vA.exports=yA});var _A=q((kfe,xA)=>{"use strict";function wA(t){return function(e,n){return e+Math.floor(t()*(n-e+1))}}var bA=wA(Math.random);bA.createRandom=wA;xA.exports=bA});var SA=q((Ofe,DA)=>{"use strict";var Ez=_A().createRandom;function EA(t){var e=Ez(t);return function(n){for(var r=n.length,i=r-1,o=-1;++o<r;){var s=e(o,i),a=n[s];n[s]=n[o],n[o]=a}}}var CA=EA(Math.random);CA.createShuffleInPlace=EA;DA.exports=CA});var LA=q((Nfe,FA)=>{"use strict";var Cz=Bl(),Dz=Pi(),Sz=SA(),Iz={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function hn(t,e,n,r,i){this.wrappedCircle=i||null,this.children={},this.countChildren=0,this.id=t||null,this.next=null,this.previous=null,this.x=e||null,this.y=n||null,i?this.r=1010101:this.r=r||999}hn.prototype.hasChildren=function(){return this.countChildren>0};hn.prototype.addChild=function(t,e){this.children[t]=e,++this.countChildren};hn.prototype.getChild=function(t){if(!this.children.hasOwnProperty(t)){var e=new hn;this.children[t]=e,++this.countChildren}return this.children[t]};hn.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var t=this;for(var e in t.children){var n=t.children[e];n.x+=t.x,n.y+=t.y,n.applyPositionToChildren()}}};function MA(t,e,n){for(var r in e.children){var i=e.children[r];i.hasChildren()?MA(t,i,n):n[i.id]={x:i.x,y:i.y}}}function cp(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function RA(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function vw(t,e){for(var n=0;n<e.length;++n)if(!RA(t,e[n]))return!1;return!0}function Tz(t){return new hn(null,t.x,t.y,t.r)}function Ul(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,s=e.y,a=e.r,c=o-n,l=s-r,u=a-i,d=Math.sqrt(c*c+l*l);return new hn(null,(n+o+c/d*u)/2,(r+s+l/d*u)/2,(d+i+a)/2)}function kA(t,e,n){var r=t.x,i=t.y,o=t.r,s=e.x,a=e.y,c=e.r,l=n.x,u=n.y,d=n.r,f=r-s,h=r-l,p=i-a,m=i-u,v=c-o,b=d-o,_=r*r+i*i-o*o,C=_-s*s-a*a+c*c,D=_-l*l-u*u+d*d,k=h*p-f*m,Z=(p*D-m*C)/(k*2)-r,A=(m*v-p*b)/k,N=(h*C-f*D)/(k*2)-i,x=(f*b-h*v)/k,we=A*A+x*x-1,G=2*(o+Z*A+N*x),ie=Z*Z+N*N-o*o,$=-(we?(G+Math.sqrt(G*G-4*we*ie))/(2*we):ie/G);return new hn(null,r+Z+A*$,i+N+x*$,$)}function Az(t){switch(t.length){case 1:return Tz(t[0]);case 2:return Ul(t[0],t[1]);case 3:return kA(t[0],t[1],t[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+t.length)}}function Mz(t,e){var n,r;if(vw(e,t))return[e];for(n=0;n<t.length;++n)if(cp(e,t[n])&&vw(Ul(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(cp(Ul(t[n],t[r]),e)&&cp(Ul(t[n],e),t[r])&&cp(Ul(t[r],e),t[n])&&vw(kA(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function IA(t){var e=t.wrappedCircle,n=t.next.wrappedCircle,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function Rz(t,e){var n=0,r=t.slice(),i=t.length,o=[],s,a;for(e(r);n<i;)s=r[n],a&&RA(a,s)?++n:(o=Mz(o,s),a=Az(o),n=0);return a}function TA(t,e,n){var r=t.x-e.x,i,o,s=t.y-e.y,a,c,l=r*r+s*s;l?(o=e.r+n.r,o*=o,c=t.r+n.r,c*=c,o>c?(i=(l+c-o)/(2*l),a=Math.sqrt(Math.max(0,c/l-i*i)),n.x=t.x-i*r-a*s,n.y=t.y-i*s+a*r):(i=(l+o-c)/(2*l),a=Math.sqrt(Math.max(0,o/l-i*i)),n.x=e.x+i*r-a*s,n.y=e.y+i*s+a*r)):(n.x=e.x+n.r,n.y=e.y)}function AA(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function kz(t,e){var n=t.length;if(n===0)return 0;var r,i,o,s,a,c,l,u,d,f;if(r=t[0],r.x=0,r.y=0,n<=1)return r.r;if(i=t[1],r.x=-i.r,i.x=r.r,i.y=0,n<=2)return r.r+i.r;o=t[2],TA(i,r,o),r=new hn(null,null,null,null,r),i=new hn(null,null,null,null,i),o=new hn(null,null,null,null,o),r.next=o.previous=i,i.next=r.previous=o,o.next=i.previous=r;e:for(c=3;c<n;++c){o=t[c],TA(r.wrappedCircle,i.wrappedCircle,o),o=new hn(null,null,null,null,o),l=i.next,u=r.previous,d=i.wrappedCircle.r,f=r.wrappedCircle.r;do if(d<=f){if(AA(l.wrappedCircle,o.wrappedCircle)){i=l,r.next=i,i.previous=r,--c;continue e}d+=l.wrappedCircle.r,l=l.next}else{if(AA(u.wrappedCircle,o.wrappedCircle)){r=u,r.next=i,i.previous=r,--c;continue e}f+=u.wrappedCircle.r,u=u.previous}while(l!==u.next);for(o.previous=r,o.next=i,r.next=i.previous=i=o,s=IA(r);(o=o.next)!==i;)(a=IA(o))<s&&(r=o,s=a);i=r.next}r=[i.wrappedCircle],o=i;for(var h=1e4;(o=o.next)!==i&&--h!==0;)r.push(o.wrappedCircle);for(o=Rz(r,e),c=0;c<n;++c)r=t[c],r.x-=o.x,r.y-=o.y;return o.r}function OA(t,e){var n=0;if(t.hasChildren()){for(var r in t.children){var i=t.children[r];i.hasChildren()&&(i.r=OA(i,e))}n=kz(Object.values(t.children),e)}return n}function Oz(t,e){OA(t,e);for(var n in t.children){var r=t.children[n];r.applyPositionToChildren()}}function NA(t,e,n){if(!Dz(e))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");n=Cz(n,Iz);var r={},i={},o=e.nodes(),s=n.center,a=n.hierarchyAttributes,c=Sz.createShuffleInPlace(n.rng),l=n.scale,u=new hn;e.forEachNode(function(v,b){var _=b.size?b.size:1,C=new hn(v,null,null,_),D=u;a.forEach(function(k){var Z=b[k];D=D.getChild(Z)}),D.addChild(v,C)}),Oz(u,c),MA(e,u,r);var d=o.length,f,h,p;for(p=0;p<d;p++){var m=o[p];f=s+l*r[m].x,h=s+l*r[m].y,i[m]={x:f,y:h},t&&(e.setNodeAttribute(m,n.attributes.x,f),e.setNodeAttribute(m,n.attributes.y,h))}return i}var PA=NA.bind(null,!1);PA.assign=NA.bind(null,!0);FA.exports=PA});var $A=q((Pfe,jA)=>{"use strict";var Nz=Bl(),Pz=Pi(),Fz={dimensions:["x","y"],center:.5,scale:1};function BA(t,e,n){if(!Pz(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");n=Nz(n,Fz);var r=n.dimensions;if(!Array.isArray(r)||r.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var i=n.center,o=n.scale,s=Math.PI*2,a=(i-.5)*o,c=e.order,l=r[0],u=r[1];function d(p,m){return m[l]=o*Math.cos(p*s/c)+a,m[u]=o*Math.sin(p*s/c)+a,m}var f=0;if(!t){var h={};return e.forEachNode(function(p){h[p]=d(f++,{})}),h}e.updateEachNodeAttributes(function(p,m){return d(f++,m),m},{attributes:r})}var UA=BA.bind(null,!1);UA.assign=BA.bind(null,!0);jA.exports=UA});var zA=q((Ffe,GA)=>{"use strict";var Lz=Bl(),Bz=Pi(),Uz={dimensions:["x","y"],center:.5,rng:Math.random,scale:1};function VA(t,e,n){if(!Bz(e))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");n=Lz(n,Uz);var r=n.dimensions;if(!Array.isArray(r)||r.length<1)throw new Error("graphology-layout/random: given dimensions are invalid.");var i=r.length,o=n.center,s=n.rng,a=n.scale,c=(o-.5)*a;function l(d){for(var f=0;f<i;f++)d[r[f]]=s()*a+c;return d}if(!t){var u={};return e.forEachNode(function(d){u[d]=l({})}),u}e.updateEachNodeAttributes(function(d,f){return l(f),f},{attributes:r})}var HA=VA.bind(null,!1);HA.assign=VA.bind(null,!0);GA.exports=HA});var KA=q((Lfe,YA)=>{"use strict";var jz=Bl(),$z=Pi(),Vz=Math.PI/180,Hz={dimensions:["x","y"],centeredOnZero:!1,degrees:!1};function WA(t,e,n,r){if(!$z(e))throw new Error("graphology-layout/rotation: the given graph is not a valid graphology instance.");r=jz(r,Hz),r.degrees&&(n*=Vz);var i=r.dimensions;if(!Array.isArray(i)||i.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");if(e.order===0)return t?void 0:{};var o=i[0],s=i[1],a=0,c=0;if(!r.centeredOnZero){var l=1/0,u=-1/0,d=1/0,f=-1/0;e.forEachNode(function(b,_){var C=_[o],D=_[s];C<l&&(l=C),C>u&&(u=C),D<d&&(d=D),D>f&&(f=D)}),a=(l+u)/2,c=(d+f)/2}var h=Math.cos(n),p=Math.sin(n);function m(b){var _=b[o],C=b[s];return b[o]=a+(_-a)*h-(C-c)*p,b[s]=c+(_-a)*p+(C-c)*h,b}if(!t){var v={};return e.forEachNode(function(b,_){var C={};C[o]=_[o],C[s]=_[s],v[b]=m(C)}),v}e.updateEachNodeAttributes(function(b,_){return m(_),_},{attributes:i})}var qA=WA.bind(null,!1);qA.assign=WA.bind(null,!0);YA.exports=qA});var ZA=q(jl=>{"use strict";jl.circlepack=LA();jl.circular=$A();jl.random=zA();jl.rotation=KA()});var QA=q((Ufe,XA)=>{"use strict";XA.exports=function(){var e,n,r={};(function(){var o=0,s=1,a=2,c=3,l=4,u=5,d=6,f=7,h=8,p=9,m=0,v=1,b=2,_=0,C=1,D=2,k=3,Z=4,A=5,N=6,x=7,we=8,G=3,ie=10,$=3,V=9,it=10;r.exports=function(ce,y,We){var Jt,O,w,xe,Re,bt,ar,ht,X,Gi,pn=y.length,Jl=We.length,$a=ce.adjustSizes,BR=ce.barnesHutTheta*ce.barnesHutTheta,eu,qe,ke,Oe,Cr,te,Q,E=[];for(w=0;w<pn;w+=ie)y[w+l]=y[w+a],y[w+u]=y[w+c],y[w+a]=0,y[w+c]=0;if(ce.outboundAttractionDistribution){for(eu=0,w=0;w<pn;w+=ie)eu+=y[w+d];eu/=pn/ie}if(ce.barnesHutOptimize){var zi=1/0,Wo=-1/0,Wi=1/0,qo=-1/0,An,Yo,kp;for(w=0;w<pn;w+=ie)zi=Math.min(zi,y[w+o]),Wo=Math.max(Wo,y[w+o]),Wi=Math.min(Wi,y[w+s]),qo=Math.max(qo,y[w+s]);var tu=Wo-zi,nu=qo-Wi;for(tu>nu?(Wi-=(tu-nu)/2,qo=Wi+tu):(zi-=(nu-tu)/2,Wo=zi+nu),E[0+_]=-1,E[0+C]=(zi+Wo)/2,E[0+D]=(Wi+qo)/2,E[0+k]=Math.max(Wo-zi,qo-Wi),E[0+Z]=-1,E[0+A]=-1,E[0+N]=0,E[0+x]=0,E[0+we]=0,Jt=1,w=0;w<pn;w+=ie)for(O=0,kp=G;;)if(E[O+A]>=0){y[w+o]<E[O+C]?y[w+s]<E[O+D]?An=E[O+A]:An=E[O+A]+V:y[w+s]<E[O+D]?An=E[O+A]+V*2:An=E[O+A]+V*3,E[O+x]=(E[O+x]*E[O+N]+y[w+o]*y[w+d])/(E[O+N]+y[w+d]),E[O+we]=(E[O+we]*E[O+N]+y[w+s]*y[w+d])/(E[O+N]+y[w+d]),E[O+N]+=y[w+d],O=An;continue}else if(E[O+_]<0){E[O+_]=w;break}else{if(E[O+A]=Jt*V,ht=E[O+k]/2,X=E[O+A],E[X+_]=-1,E[X+C]=E[O+C]-ht,E[X+D]=E[O+D]-ht,E[X+k]=ht,E[X+Z]=X+V,E[X+A]=-1,E[X+N]=0,E[X+x]=0,E[X+we]=0,X+=V,E[X+_]=-1,E[X+C]=E[O+C]-ht,E[X+D]=E[O+D]+ht,E[X+k]=ht,E[X+Z]=X+V,E[X+A]=-1,E[X+N]=0,E[X+x]=0,E[X+we]=0,X+=V,E[X+_]=-1,E[X+C]=E[O+C]+ht,E[X+D]=E[O+D]-ht,E[X+k]=ht,E[X+Z]=X+V,E[X+A]=-1,E[X+N]=0,E[X+x]=0,E[X+we]=0,X+=V,E[X+_]=-1,E[X+C]=E[O+C]+ht,E[X+D]=E[O+D]+ht,E[X+k]=ht,E[X+Z]=E[O+Z],E[X+A]=-1,E[X+N]=0,E[X+x]=0,E[X+we]=0,Jt+=4,y[E[O+_]+o]<E[O+C]?y[E[O+_]+s]<E[O+D]?An=E[O+A]:An=E[O+A]+V:y[E[O+_]+s]<E[O+D]?An=E[O+A]+V*2:An=E[O+A]+V*3,E[O+N]=y[E[O+_]+d],E[O+x]=y[E[O+_]+o],E[O+we]=y[E[O+_]+s],E[An+_]=E[O+_],E[O+_]=-1,y[w+o]<E[O+C]?y[w+s]<E[O+D]?Yo=E[O+A]:Yo=E[O+A]+V:y[w+s]<E[O+D]?Yo=E[O+A]+V*2:Yo=E[O+A]+V*3,An===Yo)if(kp--){O=An;continue}else{kp=G;break}E[Yo+_]=w;break}}if(ce.barnesHutOptimize)for(qe=ce.scalingRatio,w=0;w<pn;w+=ie)for(O=0;;)if(E[O+A]>=0)if(te=Math.pow(y[w+o]-E[O+x],2)+Math.pow(y[w+s]-E[O+we],2),Gi=E[O+k],4*Gi*Gi/te<BR){if(ke=y[w+o]-E[O+x],Oe=y[w+s]-E[O+we],$a===!0?te>0?(Q=qe*y[w+d]*E[O+N]/te,y[w+a]+=ke*Q,y[w+c]+=Oe*Q):te<0&&(Q=-qe*y[w+d]*E[O+N]/Math.sqrt(te),y[w+a]+=ke*Q,y[w+c]+=Oe*Q):te>0&&(Q=qe*y[w+d]*E[O+N]/te,y[w+a]+=ke*Q,y[w+c]+=Oe*Q),O=E[O+Z],O<0)break;continue}else{O=E[O+A];continue}else{if(bt=E[O+_],bt>=0&&bt!==w&&(ke=y[w+o]-y[bt+o],Oe=y[w+s]-y[bt+s],te=ke*ke+Oe*Oe,$a===!0?te>0?(Q=qe*y[w+d]*y[bt+d]/te,y[w+a]+=ke*Q,y[w+c]+=Oe*Q):te<0&&(Q=-qe*y[w+d]*y[bt+d]/Math.sqrt(te),y[w+a]+=ke*Q,y[w+c]+=Oe*Q):te>0&&(Q=qe*y[w+d]*y[bt+d]/te,y[w+a]+=ke*Q,y[w+c]+=Oe*Q)),O=E[O+Z],O<0)break;continue}else for(qe=ce.scalingRatio,xe=0;xe<pn;xe+=ie)for(Re=0;Re<xe;Re+=ie)ke=y[xe+o]-y[Re+o],Oe=y[xe+s]-y[Re+s],$a===!0?(te=Math.sqrt(ke*ke+Oe*Oe)-y[xe+h]-y[Re+h],te>0?(Q=qe*y[xe+d]*y[Re+d]/te/te,y[xe+a]+=ke*Q,y[xe+c]+=Oe*Q,y[Re+a]-=ke*Q,y[Re+c]-=Oe*Q):te<0&&(Q=100*qe*y[xe+d]*y[Re+d],y[xe+a]+=ke*Q,y[xe+c]+=Oe*Q,y[Re+a]-=ke*Q,y[Re+c]-=Oe*Q)):(te=Math.sqrt(ke*ke+Oe*Oe),te>0&&(Q=qe*y[xe+d]*y[Re+d]/te/te,y[xe+a]+=ke*Q,y[xe+c]+=Oe*Q,y[Re+a]-=ke*Q,y[Re+c]-=Oe*Q));for(X=ce.gravity/ce.scalingRatio,qe=ce.scalingRatio,w=0;w<pn;w+=ie)Q=0,ke=y[w+o],Oe=y[w+s],te=Math.sqrt(Math.pow(ke,2)+Math.pow(Oe,2)),ce.strongGravityMode?te>0&&(Q=qe*y[w+d]*X):te>0&&(Q=qe*y[w+d]*X/te),y[w+a]-=ke*Q,y[w+c]-=Oe*Q;for(qe=1*(ce.outboundAttractionDistribution?eu:1),ar=0;ar<Jl;ar+=$)xe=We[ar+m],Re=We[ar+v],ht=We[ar+b],Cr=Math.pow(ht,ce.edgeWeightInfluence),ke=y[xe+o]-y[Re+o],Oe=y[xe+s]-y[Re+s],$a===!0?(te=Math.sqrt(ke*ke+Oe*Oe)-y[xe+h]-y[Re+h],ce.linLogMode?ce.outboundAttractionDistribution?te>0&&(Q=-qe*Cr*Math.log(1+te)/te/y[xe+d]):te>0&&(Q=-qe*Cr*Math.log(1+te)/te):ce.outboundAttractionDistribution?te>0&&(Q=-qe*Cr/y[xe+d]):te>0&&(Q=-qe*Cr)):(te=Math.sqrt(Math.pow(ke,2)+Math.pow(Oe,2)),ce.linLogMode?ce.outboundAttractionDistribution?te>0&&(Q=-qe*Cr*Math.log(1+te)/te/y[xe+d]):te>0&&(Q=-qe*Cr*Math.log(1+te)/te):ce.outboundAttractionDistribution?(te=1,Q=-qe*Cr/y[xe+d]):(te=1,Q=-qe*Cr)),te>0&&(y[xe+a]+=ke*Q,y[xe+c]+=Oe*Q,y[Re+a]-=ke*Q,y[Re+c]-=Oe*Q);var ru,Va,iu,qi,ou,su;if($a===!0)for(w=0;w<pn;w+=ie)y[w+p]!==1&&(ru=Math.sqrt(Math.pow(y[w+a],2)+Math.pow(y[w+c],2)),ru>it&&(y[w+a]=y[w+a]*it/ru,y[w+c]=y[w+c]*it/ru),Va=y[w+d]*Math.sqrt((y[w+l]-y[w+a])*(y[w+l]-y[w+a])+(y[w+u]-y[w+c])*(y[w+u]-y[w+c])),iu=Math.sqrt((y[w+l]+y[w+a])*(y[w+l]+y[w+a])+(y[w+u]+y[w+c])*(y[w+u]+y[w+c]))/2,qi=.1*Math.log(1+iu)/(1+Math.sqrt(Va)),ou=y[w+o]+y[w+a]*(qi/ce.slowDown),y[w+o]=ou,su=y[w+s]+y[w+c]*(qi/ce.slowDown),y[w+s]=su);else for(w=0;w<pn;w+=ie)y[w+p]!==1&&(Va=y[w+d]*Math.sqrt((y[w+l]-y[w+a])*(y[w+l]-y[w+a])+(y[w+u]-y[w+c])*(y[w+u]-y[w+c])),iu=Math.sqrt((y[w+l]+y[w+a])*(y[w+l]+y[w+a])+(y[w+u]+y[w+c])*(y[w+u]+y[w+c]))/2,qi=y[w+f]*Math.log(1+iu)/(1+Math.sqrt(Va)),y[w+f]=Math.min(1,Math.sqrt(qi*(Math.pow(y[w+a],2)+Math.pow(y[w+c],2))/(1+Math.sqrt(Va)))),ou=y[w+o]+y[w+a]*(qi/ce.slowDown),y[w+o]=ou,su=y[w+s]+y[w+c]*(qi/ce.slowDown),y[w+s]=su);return{}}})();var i=r.exports;self.addEventListener("message",function(o){var s=o.data;e=new Float32Array(s.nodes),s.edges&&(n=new Float32Array(s.edges)),i(s.settings,e,n),self.postMessage({nodes:e.buffer},[e.buffer])})}});var eM=q((jfe,JA)=>{"use strict";var Gz=QA(),zz=Pi(),Wz=hw().createEdgeWeightGetter,Ca=gw(),qz=mw();function Bi(t,e){if(e=e||{},!zz(t))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var n=Wz("getEdgeWeight"in e?e.getEdgeWeight:"weight").fromEntry,r=Ca.assign({},qz,e.settings),i=Ca.validateSettings(r);if(i)throw new Error("graphology-layout-forceatlas2/worker: "+i.message);this.worker=null,this.graph=t,this.settings=r,this.getEdgeWeight=n,this.matrices=null,this.running=!1,this.killed=!1,this.outputReducer=typeof e.outputReducer=="function"?e.outputReducer:null,this.handleMessage=this.handleMessage.bind(this);var o=void 0,s=this;this.handleGraphUpdate=function(){s.worker&&s.worker.terminate(),o&&clearTimeout(o),o=setTimeout(function(){o=void 0,s.spawnWorker()},0)},t.on("nodeAdded",this.handleGraphUpdate),t.on("edgeAdded",this.handleGraphUpdate),t.on("nodeDropped",this.handleGraphUpdate),t.on("edgeDropped",this.handleGraphUpdate),this.spawnWorker()}Bi.prototype.isRunning=function(){return this.running};Bi.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=Ca.createWorker(Gz),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())};Bi.prototype.handleMessage=function(t){if(this.running){var e=new Float32Array(t.data.nodes);Ca.assignLayoutChanges(this.graph,e,this.outputReducer),this.outputReducer&&Ca.readGraphPositions(this.graph,e),this.matrices.nodes=e,this.askForIterations()}};Bi.prototype.askForIterations=function(t){var e=this.matrices,n={settings:this.settings,nodes:e.nodes.buffer},r=[e.nodes.buffer];return t&&(n.edges=e.edges.buffer,r.push(e.edges.buffer)),this.worker.postMessage(n,r),this};Bi.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running?this:(this.matrices=Ca.graphToByteArrays(this.graph,this.getEdgeWeight),this.running=!0,this.askForIterations(!0),this)};Bi.prototype.stop=function(){return this.running=!1,this};Bi.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleGraphUpdate),this.graph.removeListener("edgeAdded",this.handleGraphUpdate),this.graph.removeListener("nodeDropped",this.handleGraphUpdate),this.graph.removeListener("edgeDropped",this.handleGraphUpdate)};JA.exports=Bi});var oM=q((hhe,iM)=>{"use strict";iM.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Ui=q(Uo=>{"use strict";var ww,Qz=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Uo.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Uo.getSymbolTotalCodewords=function(e){return Qz[e]};Uo.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Uo.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');ww=e};Uo.isKanjiModeEnabled=function(){return typeof ww<"u"};Uo.toSJIS=function(e){return ww(e)}});var dp=q(Wn=>{"use strict";Wn.L={bit:1};Wn.M={bit:0};Wn.Q={bit:3};Wn.H={bit:2};function Jz(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return Wn.L;case"m":case"medium":return Wn.M;case"q":case"quartile":return Wn.Q;case"h":case"high":return Wn.H;default:throw new Error("Unknown EC Level: "+t)}}Wn.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4};Wn.from=function(e,n){if(Wn.isValid(e))return e;try{return Jz(e)}catch{return n}}});var cM=q((mhe,aM)=>{"use strict";function sM(){this.buffer=[],this.length=0}sM.prototype={get:function(t){let e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};aM.exports=sM});var uM=q((yhe,lM)=>{"use strict";function Hl(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}Hl.prototype.set=function(t,e,n,r){let i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)};Hl.prototype.get=function(t,e){return this.data[t*this.size+e]};Hl.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Hl.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};lM.exports=Hl});var dM=q(fp=>{"use strict";var e8=Ui().getSymbolSize;fp.getRowColCoords=function(e){if(e===1)return[];let n=Math.floor(e/7)+2,r=e8(e),i=r===145?26:Math.ceil((r-13)/(2*n-2))*2,o=[r-7];for(let s=1;s<n-1;s++)o[s]=o[s-1]-i;return o.push(6),o.reverse()};fp.getPositions=function(e){let n=[],r=fp.getRowColCoords(e),i=r.length;for(let o=0;o<i;o++)for(let s=0;s<i;s++)o===0&&s===0||o===0&&s===i-1||o===i-1&&s===0||n.push([r[o],r[s]]);return n}});var pM=q(hM=>{"use strict";var t8=Ui().getSymbolSize,fM=7;hM.getPositions=function(e){let n=t8(e);return[[0,0],[n-fM,0],[0,n-fM]]}});var gM=q(He=>{"use strict";He.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var jo={N1:3,N2:3,N3:40,N4:10};He.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};He.from=function(e){return He.isValid(e)?parseInt(e,10):void 0};He.getPenaltyN1=function(e){let n=e.size,r=0,i=0,o=0,s=null,a=null;for(let c=0;c<n;c++){i=o=0,s=a=null;for(let l=0;l<n;l++){let u=e.get(c,l);u===s?i++:(i>=5&&(r+=jo.N1+(i-5)),s=u,i=1),u=e.get(l,c),u===a?o++:(o>=5&&(r+=jo.N1+(o-5)),a=u,o=1)}i>=5&&(r+=jo.N1+(i-5)),o>=5&&(r+=jo.N1+(o-5))}return r};He.getPenaltyN2=function(e){let n=e.size,r=0;for(let i=0;i<n-1;i++)for(let o=0;o<n-1;o++){let s=e.get(i,o)+e.get(i,o+1)+e.get(i+1,o)+e.get(i+1,o+1);(s===4||s===0)&&r++}return r*jo.N2};He.getPenaltyN3=function(e){let n=e.size,r=0,i=0,o=0;for(let s=0;s<n;s++){i=o=0;for(let a=0;a<n;a++)i=i<<1&2047|e.get(s,a),a>=10&&(i===1488||i===93)&&r++,o=o<<1&2047|e.get(a,s),a>=10&&(o===1488||o===93)&&r++}return r*jo.N3};He.getPenaltyN4=function(e){let n=0,r=e.data.length;for(let o=0;o<r;o++)n+=e.data[o];return Math.abs(Math.ceil(n*100/r/5)-10)*jo.N4};function n8(t,e,n){switch(t){case He.Patterns.PATTERN000:return(e+n)%2===0;case He.Patterns.PATTERN001:return e%2===0;case He.Patterns.PATTERN010:return n%3===0;case He.Patterns.PATTERN011:return(e+n)%3===0;case He.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2===0;case He.Patterns.PATTERN101:return e*n%2+e*n%3===0;case He.Patterns.PATTERN110:return(e*n%2+e*n%3)%2===0;case He.Patterns.PATTERN111:return(e*n%3+(e+n)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}He.applyMask=function(e,n){let r=n.size;for(let i=0;i<r;i++)for(let o=0;o<r;o++)n.isReserved(o,i)||n.xor(o,i,n8(e,o,i))};He.getBestMask=function(e,n){let r=Object.keys(He.Patterns).length,i=0,o=1/0;for(let s=0;s<r;s++){n(s),He.applyMask(s,e);let a=He.getPenaltyN1(e)+He.getPenaltyN2(e)+He.getPenaltyN3(e)+He.getPenaltyN4(e);He.applyMask(s,e),a<o&&(o=a,i=s)}return i}});var xw=q(bw=>{"use strict";var ji=dp(),hp=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],pp=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];bw.getBlocksCount=function(e,n){switch(n){case ji.L:return hp[(e-1)*4+0];case ji.M:return hp[(e-1)*4+1];case ji.Q:return hp[(e-1)*4+2];case ji.H:return hp[(e-1)*4+3];default:return}};bw.getTotalCodewordsCount=function(e,n){switch(n){case ji.L:return pp[(e-1)*4+0];case ji.M:return pp[(e-1)*4+1];case ji.Q:return pp[(e-1)*4+2];case ji.H:return pp[(e-1)*4+3];default:return}}});var mM=q(mp=>{"use strict";var Gl=new Uint8Array(512),gp=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)Gl[n]=e,gp[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)Gl[n]=Gl[n-255]})();mp.log=function(e){if(e<1)throw new Error("log("+e+")");return gp[e]};mp.exp=function(e){return Gl[e]};mp.mul=function(e,n){return e===0||n===0?0:Gl[gp[e]+gp[n]]}});var yM=q(zl=>{"use strict";var _w=mM();zl.mul=function(e,n){let r=new Uint8Array(e.length+n.length-1);for(let i=0;i<e.length;i++)for(let o=0;o<n.length;o++)r[i+o]^=_w.mul(e[i],n[o]);return r};zl.mod=function(e,n){let r=new Uint8Array(e);for(;r.length-n.length>=0;){let i=r[0];for(let s=0;s<n.length;s++)r[s]^=_w.mul(n[s],i);let o=0;for(;o<r.length&&r[o]===0;)o++;r=r.slice(o)}return r};zl.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let r=0;r<e;r++)n=zl.mul(n,new Uint8Array([1,_w.exp(r)]));return n}});var bM=q((Che,wM)=>{"use strict";var vM=yM();function Ew(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Ew.prototype.initialize=function(e){this.degree=e,this.genPoly=vM.generateECPolynomial(this.degree)};Ew.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");let n=new Uint8Array(e.length+this.degree);n.set(e);let r=vM.mod(n,this.genPoly),i=this.degree-r.length;if(i>0){let o=new Uint8Array(this.degree);return o.set(r,i),o}return r};wM.exports=Ew});var Cw=q(xM=>{"use strict";xM.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}});var Dw=q(ni=>{"use strict";var _M="[0-9]+",r8="[A-Z $%*+\\-./:]+",Wl="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Wl=Wl.replace(/u/g,"\\u");var i8="(?:(?![A-Z0-9 $%*+\\-./:]|"+Wl+`)(?:.|[\r
]))+`;ni.KANJI=new RegExp(Wl,"g");ni.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ni.BYTE=new RegExp(i8,"g");ni.NUMERIC=new RegExp(_M,"g");ni.ALPHANUMERIC=new RegExp(r8,"g");var o8=new RegExp("^"+Wl+"$"),s8=new RegExp("^"+_M+"$"),a8=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ni.testKanji=function(e){return o8.test(e)};ni.testNumeric=function(e){return s8.test(e)};ni.testAlphanumeric=function(e){return a8.test(e)}});var $i=q(ft=>{"use strict";var c8=Cw(),Sw=Dw();ft.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};ft.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};ft.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};ft.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};ft.MIXED={bit:-1};ft.getCharCountIndicator=function(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!c8.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?e.ccBits[0]:n<27?e.ccBits[1]:e.ccBits[2]};ft.getBestModeForData=function(e){return Sw.testNumeric(e)?ft.NUMERIC:Sw.testAlphanumeric(e)?ft.ALPHANUMERIC:Sw.testKanji(e)?ft.KANJI:ft.BYTE};ft.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};ft.isValid=function(e){return e&&e.bit&&e.ccBits};function l8(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return ft.NUMERIC;case"alphanumeric":return ft.ALPHANUMERIC;case"kanji":return ft.KANJI;case"byte":return ft.BYTE;default:throw new Error("Unknown mode: "+t)}}ft.from=function(e,n){if(ft.isValid(e))return e;try{return l8(e)}catch{return n}}});var IM=q($o=>{"use strict";var yp=Ui(),u8=xw(),EM=dp(),Vi=$i(),Iw=Cw(),DM=7973,CM=yp.getBCHDigit(DM);function d8(t,e,n){for(let r=1;r<=40;r++)if(e<=$o.getCapacity(r,n,t))return r}function SM(t,e){return Vi.getCharCountIndicator(t,e)+4}function f8(t,e){let n=0;return t.forEach(function(r){let i=SM(r.mode,e);n+=i+r.getBitsLength()}),n}function h8(t,e){for(let n=1;n<=40;n++)if(f8(t,n)<=$o.getCapacity(n,e,Vi.MIXED))return n}$o.from=function(e,n){return Iw.isValid(e)?parseInt(e,10):n};$o.getCapacity=function(e,n,r){if(!Iw.isValid(e))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=Vi.BYTE);let i=yp.getSymbolTotalCodewords(e),o=u8.getTotalCodewordsCount(e,n),s=(i-o)*8;if(r===Vi.MIXED)return s;let a=s-SM(r,e);switch(r){case Vi.NUMERIC:return Math.floor(a/10*3);case Vi.ALPHANUMERIC:return Math.floor(a/11*2);case Vi.KANJI:return Math.floor(a/13);case Vi.BYTE:default:return Math.floor(a/8)}};$o.getBestVersionForData=function(e,n){let r,i=EM.from(n,EM.M);if(Array.isArray(e)){if(e.length>1)return h8(e,i);if(e.length===0)return 1;r=e[0]}else r=e;return d8(r.mode,r.getLength(),i)};$o.getEncodedBits=function(e){if(!Iw.isValid(e)||e<7)throw new Error("Invalid QR Code version");let n=e<<12;for(;yp.getBCHDigit(n)-CM>=0;)n^=DM<<yp.getBCHDigit(n)-CM;return e<<12|n}});var RM=q(MM=>{"use strict";var Tw=Ui(),AM=1335,p8=21522,TM=Tw.getBCHDigit(AM);MM.getEncodedBits=function(e,n){let r=e.bit<<3|n,i=r<<10;for(;Tw.getBCHDigit(i)-TM>=0;)i^=AM<<Tw.getBCHDigit(i)-TM;return(r<<10|i)^p8}});var OM=q((Mhe,kM)=>{"use strict";var g8=$i();function Sa(t){this.mode=g8.NUMERIC,this.data=t.toString()}Sa.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Sa.prototype.getLength=function(){return this.data.length};Sa.prototype.getBitsLength=function(){return Sa.getBitsLength(this.data.length)};Sa.prototype.write=function(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),i=parseInt(r,10),e.put(i,10);let o=this.data.length-n;o>0&&(r=this.data.substr(n),i=parseInt(r,10),e.put(i,o*3+1))};kM.exports=Sa});var PM=q((Rhe,NM)=>{"use strict";var m8=$i(),Aw=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ia(t){this.mode=m8.ALPHANUMERIC,this.data=t}Ia.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ia.prototype.getLength=function(){return this.data.length};Ia.prototype.getBitsLength=function(){return Ia.getBitsLength(this.data.length)};Ia.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Aw.indexOf(this.data[n])*45;r+=Aw.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Aw.indexOf(this.data[n]),6)};NM.exports=Ia});var LM=q((khe,FM)=>{"use strict";var y8=$i();function Ta(t){this.mode=y8.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Ta.getBitsLength=function(e){return e*8};Ta.prototype.getLength=function(){return this.data.length};Ta.prototype.getBitsLength=function(){return Ta.getBitsLength(this.data.length)};Ta.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};FM.exports=Ta});var UM=q((Ohe,BM)=>{"use strict";var v8=$i(),w8=Ui();function Aa(t){this.mode=v8.KANJI,this.data=t}Aa.getBitsLength=function(e){return e*13};Aa.prototype.getLength=function(){return this.data.length};Aa.prototype.getBitsLength=function(){return Aa.getBitsLength(this.data.length)};Aa.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=w8.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};BM.exports=Aa});var jM=q((Nhe,Mw)=>{"use strict";var ql={single_source_shortest_paths:function(t,e,n){var r={},i={};i[e]=0;var o=ql.PriorityQueue.make();o.push(e,0);for(var s,a,c,l,u,d,f,h,p;!o.empty();){s=o.pop(),a=s.value,l=s.cost,u=t[a]||{};for(c in u)u.hasOwnProperty(c)&&(d=u[c],f=l+d,h=i[c],p=typeof i[c]>"u",(p||h>f)&&(i[c]=f,o.push(c,f),r[c]=a))}if(typeof n<"u"&&typeof i[n]>"u"){var m=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(m)}return r},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e,i;r;)n.push(r),i=t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){var r=ql.single_source_shortest_paths(t,e,n);return ql.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(t){var e=ql.PriorityQueue,n={},r;t=t||{};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.queue=[],n.sorter=t.sorter||e.default_sorter,n},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof Mw<"u"&&(Mw.exports=ql)});var YM=q(Ma=>{"use strict";var Fe=$i(),HM=OM(),GM=PM(),zM=LM(),WM=UM(),Yl=Dw(),vp=Ui(),b8=jM();function $M(t){return unescape(encodeURIComponent(t)).length}function Kl(t,e,n){let r=[],i;for(;(i=t.exec(n))!==null;)r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function qM(t){let e=Kl(Yl.NUMERIC,Fe.NUMERIC,t),n=Kl(Yl.ALPHANUMERIC,Fe.ALPHANUMERIC,t),r,i;return vp.isKanjiModeEnabled()?(r=Kl(Yl.BYTE,Fe.BYTE,t),i=Kl(Yl.KANJI,Fe.KANJI,t)):(r=Kl(Yl.BYTE_KANJI,Fe.BYTE,t),i=[]),e.concat(n,r,i).sort(function(s,a){return s.index-a.index}).map(function(s){return{data:s.data,mode:s.mode,length:s.length}})}function Rw(t,e){switch(e){case Fe.NUMERIC:return HM.getBitsLength(t);case Fe.ALPHANUMERIC:return GM.getBitsLength(t);case Fe.KANJI:return WM.getBitsLength(t);case Fe.BYTE:return zM.getBitsLength(t)}}function x8(t){return t.reduce(function(e,n){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===n.mode?(e[e.length-1].data+=n.data,e):(e.push(n),e)},[])}function _8(t){let e=[];for(let n=0;n<t.length;n++){let r=t[n];switch(r.mode){case Fe.NUMERIC:e.push([r,{data:r.data,mode:Fe.ALPHANUMERIC,length:r.length},{data:r.data,mode:Fe.BYTE,length:r.length}]);break;case Fe.ALPHANUMERIC:e.push([r,{data:r.data,mode:Fe.BYTE,length:r.length}]);break;case Fe.KANJI:e.push([r,{data:r.data,mode:Fe.BYTE,length:$M(r.data)}]);break;case Fe.BYTE:e.push([{data:r.data,mode:Fe.BYTE,length:$M(r.data)}])}}return e}function E8(t,e){let n={},r={start:{}},i=["start"];for(let o=0;o<t.length;o++){let s=t[o],a=[];for(let c=0;c<s.length;c++){let l=s[c],u=""+o+c;a.push(u),n[u]={node:l,lastCount:0},r[u]={};for(let d=0;d<i.length;d++){let f=i[d];n[f]&&n[f].node.mode===l.mode?(r[f][u]=Rw(n[f].lastCount+l.length,l.mode)-Rw(n[f].lastCount,l.mode),n[f].lastCount+=l.length):(n[f]&&(n[f].lastCount=l.length),r[f][u]=Rw(l.length,l.mode)+4+Fe.getCharCountIndicator(l.mode,e))}}i=a}for(let o=0;o<i.length;o++)r[i[o]].end=0;return{map:r,table:n}}function VM(t,e){let n,r=Fe.getBestModeForData(t);if(n=Fe.from(e,r),n!==Fe.BYTE&&n.bit<r.bit)throw new Error('"'+t+'" cannot be encoded with mode '+Fe.toString(n)+`.
 Suggested mode is: `+Fe.toString(r));switch(n===Fe.KANJI&&!vp.isKanjiModeEnabled()&&(n=Fe.BYTE),n){case Fe.NUMERIC:return new HM(t);case Fe.ALPHANUMERIC:return new GM(t);case Fe.KANJI:return new WM(t);case Fe.BYTE:return new zM(t)}}Ma.fromArray=function(e){return e.reduce(function(n,r){return typeof r=="string"?n.push(VM(r,null)):r.data&&n.push(VM(r.data,r.mode)),n},[])};Ma.fromString=function(e,n){let r=qM(e,vp.isKanjiModeEnabled()),i=_8(r),o=E8(i,n),s=b8.find_path(o.map,"start","end"),a=[];for(let c=1;c<s.length-1;c++)a.push(o.table[s[c]].node);return Ma.fromArray(x8(a))};Ma.rawSplit=function(e){return Ma.fromArray(qM(e,vp.isKanjiModeEnabled()))}});var ZM=q(KM=>{"use strict";var bp=Ui(),kw=dp(),C8=cM(),D8=uM(),S8=dM(),I8=pM(),Pw=gM(),Fw=xw(),T8=bM(),wp=IM(),A8=RM(),M8=$i(),Ow=YM();function R8(t,e){let n=t.size,r=I8.getPositions(e);for(let i=0;i<r.length;i++){let o=r[i][0],s=r[i][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||n<=o+a))for(let c=-1;c<=7;c++)s+c<=-1||n<=s+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(o+a,s+c,!0,!0):t.set(o+a,s+c,!1,!0))}}function k8(t){let e=t.size;for(let n=8;n<e-8;n++){let r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function O8(t,e){let n=S8.getPositions(e);for(let r=0;r<n.length;r++){let i=n[r][0],o=n[r][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?t.set(i+s,o+a,!0,!0):t.set(i+s,o+a,!1,!0)}}function N8(t,e){let n=t.size,r=wp.getEncodedBits(e),i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+n-8-3,s=(r>>a&1)===1,t.set(i,o,s,!0),t.set(o,i,s,!0)}function Nw(t,e,n){let r=t.size,i=A8.getEncodedBits(e,n),o,s;for(o=0;o<15;o++)s=(i>>o&1)===1,o<6?t.set(o,8,s,!0):o<8?t.set(o+1,8,s,!0):t.set(r-15+o,8,s,!0),o<8?t.set(8,r-o-1,s,!0):o<9?t.set(8,15-o-1+1,s,!0):t.set(8,15-o-1,s,!0);t.set(r-8,8,1,!0)}function P8(t,e){let n=t.size,r=-1,i=n-1,o=7,s=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,a-c)){let l=!1;s<e.length&&(l=(e[s]>>>o&1)===1),t.set(i,a-c,l),o--,o===-1&&(s++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}function F8(t,e,n){let r=new C8;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),M8.getCharCountIndicator(c.mode,t)),c.write(r)});let i=bp.getSymbolTotalCodewords(t),o=Fw.getTotalCodewordsCount(t,e),s=(i-o)*8;for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let a=(s-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return L8(r,t,e)}function L8(t,e,n){let r=bp.getSymbolTotalCodewords(e),i=Fw.getTotalCodewordsCount(e,n),o=r-i,s=Fw.getBlocksCount(e,n),a=r%s,c=s-a,l=Math.floor(r/s),u=Math.floor(o/s),d=u+1,f=l-u,h=new T8(f),p=0,m=new Array(s),v=new Array(s),b=0,_=new Uint8Array(t.buffer);for(let A=0;A<s;A++){let N=A<c?u:d;m[A]=_.slice(p,p+N),v[A]=h.encode(m[A]),p+=N,b=Math.max(b,N)}let C=new Uint8Array(r),D=0,k,Z;for(k=0;k<b;k++)for(Z=0;Z<s;Z++)k<m[Z].length&&(C[D++]=m[Z][k]);for(k=0;k<f;k++)for(Z=0;Z<s;Z++)C[D++]=v[Z][k];return C}function B8(t,e,n,r){let i;if(Array.isArray(t))i=Ow.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){let u=Ow.rawSplit(t);l=wp.getBestVersionForData(u,n)}i=Ow.fromString(t,l||40)}else throw new Error("Invalid data");let o=wp.getBestVersionForData(i,n);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let s=F8(e,n,i),a=bp.getSymbolSize(e),c=new D8(a);return R8(c,e),k8(c),O8(c,e),Nw(c,n,0),e>=7&&N8(c,e),P8(c,s),isNaN(r)&&(r=Pw.getBestMask(c,Nw.bind(null,c,n))),Pw.applyMask(r,c),Nw(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}KM.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let r=kw.M,i,o;return typeof n<"u"&&(r=kw.from(n.errorCorrectionLevel,kw.M),i=wp.from(n.version),o=Pw.from(n.maskPattern),n.toSJISFunc&&bp.setToSJISFunction(n.toSJISFunc)),B8(e,i,r,o)}});var Lw=q(Vo=>{"use strict";function XM(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8)throw new Error("Invalid hex color: "+t);(e.length===3||e.length===4)&&(e=Array.prototype.concat.apply([],e.map(function(r){return[r,r]}))),e.length===6&&e.push("F","F");let n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+e.slice(0,6).join("")}}Vo.getOptions=function(e){e||(e={}),e.color||(e.color={});let n=typeof e.margin>"u"||e.margin===null||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,i=e.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:XM(e.color.dark||"#000000ff"),light:XM(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};Vo.getScale=function(e,n){return n.width&&n.width>=e+n.margin*2?n.width/(e+n.margin*2):n.scale};Vo.getImageWidth=function(e,n){let r=Vo.getScale(e,n);return Math.floor((e+n.margin*2)*r)};Vo.qrToImageData=function(e,n,r){let i=n.modules.size,o=n.modules.data,s=Vo.getScale(i,r),a=Math.floor((i+r.margin*2)*s),c=r.margin*s,l=[r.color.light,r.color.dark];for(let u=0;u<a;u++)for(let d=0;d<a;d++){let f=(u*a+d)*4,h=r.color.light;if(u>=c&&d>=c&&u<a-c&&d<a-c){let p=Math.floor((u-c)/s),m=Math.floor((d-c)/s);h=l[o[p*i+m]?1:0]}e[f++]=h.r,e[f++]=h.g,e[f++]=h.b,e[f]=h.a}}});var QM=q(xp=>{"use strict";var Bw=Lw();function U8(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}function j8(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}xp.render=function(e,n,r){let i=r,o=n;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),n||(o=j8()),i=Bw.getOptions(i);let s=Bw.getImageWidth(e.modules.size,i),a=o.getContext("2d"),c=a.createImageData(s,s);return Bw.qrToImageData(c.data,e,i),U8(a,o,s),a.putImageData(c,0,0),o};xp.renderToDataURL=function(e,n,r){let i=r;typeof i>"u"&&(!n||!n.getContext)&&(i=n,n=void 0),i||(i={});let o=xp.render(e,n,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}});var tR=q(eR=>{"use strict";var $8=Lw();function JM(t,e){let n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Uw(t,e,n){let r=t+e;return typeof n<"u"&&(r+=" "+n),r}function V8(t,e,n){let r="",i=0,o=!1,s=0;for(let a=0;a<t.length;a++){let c=Math.floor(a%e),l=Math.floor(a/e);!c&&!o&&(o=!0),t[a]?(s++,a>0&&c>0&&t[a-1]||(r+=o?Uw("M",c+n,.5+l+n):Uw("m",i,0),i=0,o=!1),c+1<e&&t[a+1]||(r+=Uw("h",s),s=0)):i++}return r}eR.render=function(e,n,r){let i=$8.getOptions(n),o=e.modules.size,s=e.modules.data,a=o+i.margin*2,c=i.color.light.a?"<path "+JM(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+JM(i.color.dark,"stroke")+' d="'+V8(s,o,i.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof r=="function"&&r(null,f),f}});var rR=q(Zl=>{"use strict";var H8=oM(),jw=ZM(),nR=QM(),G8=tR();function $w(t,e,n,r,i){let o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!H8())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(i=n,n=e,e=r=void 0):s===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(n=e,e=r=void 0):s===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(c,l){try{let u=jw.create(n,r);c(t(u,e,r))}catch(u){l(u)}})}try{let c=jw.create(n,r);i(null,t(c,e,r))}catch(c){i(c)}}Zl.create=jw.create;Zl.toCanvas=$w.bind(null,nR.render);Zl.toDataURL=$w.bind(null,nR.renderToDataURL);Zl.toString=$w.bind(null,function(t,e,n){return G8.render(t,n)})});var lR=q((epe,cR)=>{"use strict";function Er(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Er.prototype[Symbol.iterator]=function(){return this});Er.of=function(){var t=arguments,e=t.length,n=0;return new Er(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Er.empty=function(){var t=new Er(function(){return{done:!0}});return t};Er.fromSequence=function(t){var e=0,n=t.length;return new Er(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Er.is=function(t){return t instanceof Er?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};cR.exports=Er});var uR=q(Vw=>{"use strict";Vw.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Vw.SYMBOL_SUPPORT=typeof Symbol<"u"});var hR=q((npe,fR)=>{"use strict";var dR=uR(),Z8=dR.ARRAY_BUFFER_SUPPORT,X8=dR.SYMBOL_SUPPORT;fR.exports=function(e,n){var r,i,o,s,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||Z8&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(o=0,s=e.length;o<s;o++)n(e[o],o);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(X8&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(r=e,o=0;a=r.next(),a.done!==!0;)n(a.value,o),o++;return}for(i in e)e.hasOwnProperty(i)&&n(e[i],i)}});var mR=q((rpe,gR)=>{"use strict";var pR=lR(),Q8=hR();function lt(){this.clear()}lt.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};lt.prototype.enqueue=function(t){return this.items.push(t),++this.size};lt.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};lt.prototype.peek=function(){if(this.size)return this.items[this.offset]};lt.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,r=0,i=this.items.length;n<i;n++,r++)t.call(e,this.items[n],r,this)};lt.prototype.toArray=function(){return this.items.slice(this.offset)};lt.prototype.values=function(){var t=this.items,e=this.offset;return new pR(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};lt.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new pR(function(){if(e>=t.length)return{done:!0};var r=t[e];return e++,{value:[n++,r],done:!1}})};typeof Symbol<"u"&&(lt.prototype[Symbol.iterator]=lt.prototype.values);lt.prototype.toString=function(){return this.toArray().join(",")};lt.prototype.toJSON=function(){return this.toArray()};lt.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:lt,enumerable:!1}),t};typeof Symbol<"u"&&(lt.prototype[Symbol.for("nodejs.util.inspect.custom")]=lt.prototype.inspect);lt.from=function(t){var e=new lt;return Q8(t,function(n){e.enqueue(n)}),e};lt.of=function(){return lt.from(arguments)};gR.exports=lt});var vR=q((ipe,yR)=>{"use strict";yR.exports=function(e,n){var r=n.length;if(r!==0){var i=e.length;e.length+=r;for(var o=0;o<r;o++)e[i+o]=n[o]}}});var Gw=q(ka=>{"use strict";var Hw=Pi(),J8=mR(),eW=vR();function tW(t,e,n){if(!Hw(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var r=t.inboundNeighbors.bind(t),i=t.outboundNeighbors.bind(t),o={},s={};o[e]=null,s[n]=null;var a=[e],c=[n],l,u,d,f,h,p,m,v,b=!1;e:for(;a.length&&c.length;)if(a.length<=c.length){for(l=a,a=[],h=0,m=l.length;h<m;h++)for(u=l[h],d=i(u),p=0,v=d.length;p<v;p++)if(f=d[p],f in o||(a.push(f),o[f]=u),f in s){b=!0;break e}}else for(l=c,c=[],h=0,m=l.length;h<m;h++)for(u=l[h],d=r(u),p=0,v=d.length;p<v;p++)if(f=d[p],f in s||(c.push(f),s[f]=u),f in o){b=!0;break e}if(!b)return null;for(var _=[];f;)_.unshift(f),f=o[f];for(f=s[_[_.length-1]];f;)_.push(f),f=s[f];return _.length?_:null}function nW(t,e){if(!Hw(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<2)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 2.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');e=""+e;var n={},r={},i,o,s,a,c,l;for(n[e]=!0,r[e]=[e];Object.keys(n).length;){i=n,n={};for(s in i)for(o=t.outboundNeighbors(s),c=0,l=o.length;c<l;c++)a=o[c],r[a]||(r[a]=r[s].concat(a),n[a]=!0)}return r}function wR(t,e,n){if(!Hw(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var r=new Set,i={},o=0;i[n]=0;for(var s=[n],a,c,l;s.length!==0;){var u=[];for(a=0,c=s.length;a<c;a++)l=s[a],!r.has(l)&&(r.add(l),eW(u,e[t](l)),i[l]=o);o++,s=u}return i}var rW=wR.bind(null,"outboundNeighbors"),iW=wR.bind(null,"neighbors");function oW(t,e){e=""+e;var n=[],r={},i={},o=t.nodes(),s,a,c,l,u,d,f,h,p;for(d=0,h=o.length;d<h;d++)l=o[d],r[l]=[],i[l]=0;var m={};i[e]=1,m[e]=0;for(var v=J8.of(e);v.size;)for(l=v.dequeue(),n.push(l),s=m[l],a=i[l],c=t.outboundNeighbors(l),f=0,p=c.length;f<p;f++)u=c[f],u in m||(v.enqueue(u),m[u]=s+1),m[u]===s+1&&(i[u]+=a,r[u].push(l));return[n,r,i]}ka.bidirectional=tW;ka.singleSource=nW;ka.singleSourceLength=rW;ka.undirectedSingleSourceLength=iW;ka.brandes=oW});function lb(t,e){return Object.is(t,e)}var pt=null,du=!1,Lp=1,Zo=Symbol("SIGNAL");function ve(t){let e=pt;return pt=t,e}function Bp(){return pt}var fu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Up(t){if(du)throw new Error("");if(pt===null)return;pt.consumerOnSignalRead(t);let e=pt.nextProducerIndex++;if(pu(pt),e<pt.producerNode.length&&pt.producerNode[e]!==t&&Wa(pt)){let n=pt.producerNode[e];hu(n,pt.producerIndexOfThis[e])}pt.producerNode[e]!==t&&(pt.producerNode[e]=t,pt.producerIndexOfThis[e]=Wa(pt)?pb(t,pt,e):0),pt.producerLastReadVersion[e]=t.version}function ub(){Lp++}function db(t){if(!(Wa(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Lp)){if(!t.producerMustRecompute(t)&&!Vp(t)){Fp(t);return}t.producerRecomputeValue(t),Fp(t)}}function jp(t){if(t.liveConsumerNode===void 0)return;let e=du;du=!0;try{for(let n of t.liveConsumerNode)n.dirty||$R(n)}finally{du=e}}function fb(){return pt?.consumerAllowSignalWrites!==!1}function $R(t){t.dirty=!0,jp(t),t.consumerMarkedDirty?.(t)}function Fp(t){t.dirty=!1,t.lastCleanEpoch=Lp}function $p(t){return t&&(t.nextProducerIndex=0),ve(t)}function hb(t,e){if(ve(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Wa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)hu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Vp(t){pu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(db(n),r!==n.version))return!0}return!1}function Hp(t){if(pu(t),Wa(t))for(let e=0;e<t.producerNode.length;e++)hu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function pb(t,e,n){if(gb(t),t.liveConsumerNode.length===0&&mb(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=pb(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function hu(t,e){if(gb(t),t.liveConsumerNode.length===1&&mb(t))for(let r=0;r<t.producerNode.length;r++)hu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];pu(i),i.producerIndexOfThis[r]=e}}function Wa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function pu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function gb(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function mb(t){return t.producerNode!==void 0}function VR(){throw new Error}var yb=VR;function HR(t){yb(t)}function Gp(t){yb=t}var GR=null;function zp(t,e){fb()||HR(t),t.equal(t.value,e)||(t.value=e,zR(t))}var Wp=Ce(M({},fu),{equal:lb,value:void 0,kind:"signal"});function zR(t){t.version++,ub(),jp(t),GR?.()}var qp;function qa(){return qp}function Sr(t){let e=qp;return qp=t,e}var gu=Symbol("NotFound");function oe(t){return typeof t=="function"}function Xo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var mu=Xo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ki(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof mu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{vb(o)}catch(s){e=e??[],s instanceof mu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new mu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)vb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ki(n,e)}remove(e){let{_finalizers:n}=this;n&&Ki(n,e),e instanceof t&&e._removeParent(this)}};fe.EMPTY=(()=>{let t=new fe;return t.closed=!0,t})();var Yp=fe.EMPTY;function yu(t){return t instanceof fe||t&&"closed"in t&&oe(t.remove)&&oe(t.add)&&oe(t.unsubscribe)}function vb(t){oe(t)?t():t.unsubscribe()}var Yn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qo={setTimeout(t,e,...n){let{delegate:r}=Qo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Qo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function vu(t){Qo.setTimeout(()=>{let{onUnhandledError:e}=Yn;if(e)e(t);else throw t})}function Ya(){}var wb=Kp("C",void 0,void 0);function bb(t){return Kp("E",void 0,t)}function xb(t){return Kp("N",t,void 0)}function Kp(t,e,n){return{kind:t,value:e,error:n}}var Zi=null;function Jo(t){if(Yn.useDeprecatedSynchronousErrorHandling){let e=!Zi;if(e&&(Zi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Zi;if(Zi=null,n)throw r}}else t()}function _b(t){Yn.useDeprecatedSynchronousErrorHandling&&Zi&&(Zi.errorThrown=!0,Zi.error=t)}var Xi=class extends fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yu(e)&&e.add(this)):this.destination=tk}static create(e,n,r){return new Ir(e,n,r)}next(e){this.isStopped?Xp(xb(e),this):this._next(e)}error(e){this.isStopped?Xp(bb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Xp(wb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JR=Function.prototype.bind;function Zp(t,e){return JR.call(t,e)}var Qp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){wu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){wu(r)}else wu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){wu(n)}}},Ir=class extends Xi{constructor(e,n,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Yn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Zp(e.next,o),error:e.error&&Zp(e.error,o),complete:e.complete&&Zp(e.complete,o)}):i=e}this.destination=new Qp(i)}};function wu(t){Yn.useDeprecatedSynchronousErrorHandling?_b(t):vu(t)}function ek(t){throw t}function Xp(t,e){let{onStoppedNotification:n}=Yn;n&&Qo.setTimeout(()=>n(t,e))}var tk={closed:!0,next:Ya,error:ek,complete:Ya};var es=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gn(t){return t}function Jp(...t){return eg(t)}function eg(t){return t.length===0?gn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var _e=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=rk(n)?n:new Ir(n,r,i);return Jo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Eb(r),new r((i,o)=>{let s=new Ir({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[es](){return this}pipe(...n){return eg(n)(this)}toPromise(n){return n=Eb(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Eb(t){var e;return(e=t??Yn.Promise)!==null&&e!==void 0?e:Promise}function nk(t){return t&&oe(t.next)&&oe(t.error)&&oe(t.complete)}function rk(t){return t&&t instanceof Xi||nk(t)&&yu(t)}function tg(t){return oe(t?.lift)}function ge(t){return e=>{if(tg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(t,e,n,r,i){return new ng(t,e,n,r,i)}var ng=class extends Xi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ts(){return ge((t,e)=>{let n=null;t._refCount++;let r=me(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ns=class extends _e{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,tg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fe;let n=this.getSubject();e.add(this.source.subscribe(me(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fe.EMPTY)}return e}refCount(){return ts()(this)}};var Cb=Xo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=(()=>{class t extends _e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new bu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Cb}next(n){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Yp:(this.currentObservers=null,o.push(n),new fe(()=>{this.currentObservers=null,Ki(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new _e;return n.source=this,n}}return t.create=(e,n)=>new bu(e,n),t})(),bu=class extends Te{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Yp}};var Ye=class extends Te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var rg={now(){return(rg.delegate||Date).now()},delegate:void 0};var xu=class extends fe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ka={setInterval(t,e,...n){let{delegate:r}=Ka;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ka;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _u=class extends xu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ka.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ka.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ki(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var rs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};rs.now=rg.now;var Eu=class extends rs{constructor(e,n=rs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Db=new Eu(_u);var en=new _e(t=>t.complete());function Sb(t){return t&&oe(t.schedule)}function Ib(t){return t[t.length-1]}function Cu(t){return oe(Ib(t))?t.pop():void 0}function ai(t){return Sb(Ib(t))?t.pop():void 0}function Ab(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Tb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qi(t){return this instanceof Qi?(this.v=t,this):new Qi(t)}function Mb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(v,b){o.push([h,m,v,b])>1||c(h,m)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(m){f(o[0][3],m)}}function l(h){h.value instanceof Qi?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Rb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Tb=="function"?Tb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Du=t=>t&&typeof t.length=="number"&&typeof t!="function";function Su(t){return oe(t?.then)}function Iu(t){return oe(t[es])}function Tu(t){return Symbol.asyncIterator&&oe(t?.[Symbol.asyncIterator])}function Au(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ik(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Mu=ik();function Ru(t){return oe(t?.[Mu])}function ku(t){return Mb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Qi(n.read());if(i)return yield Qi(void 0);yield yield Qi(r)}}finally{n.releaseLock()}})}function Ou(t){return oe(t?.getReader)}function Ke(t){if(t instanceof _e)return t;if(t!=null){if(Iu(t))return ok(t);if(Du(t))return sk(t);if(Su(t))return ak(t);if(Tu(t))return kb(t);if(Ru(t))return ck(t);if(Ou(t))return lk(t)}throw Au(t)}function ok(t){return new _e(e=>{let n=t[es]();if(oe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sk(t){return new _e(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ak(t){return new _e(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,vu)})}function ck(t){return new _e(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function kb(t){return new _e(e=>{uk(t,e).catch(n=>e.error(n))})}function lk(t){return kb(ku(t))}function uk(t,e){var n,r,i,o;return Ab(this,void 0,void 0,function*(){try{for(n=Rb(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function tn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Nu(t,e=0){return ge((n,r)=>{n.subscribe(me(r,i=>tn(r,t,()=>r.next(i),e),()=>tn(r,t,()=>r.complete(),e),i=>tn(r,t,()=>r.error(i),e)))})}function Pu(t,e=0){return ge((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Ob(t,e){return Ke(t).pipe(Pu(e),Nu(e))}function Nb(t,e){return Ke(t).pipe(Pu(e),Nu(e))}function Pb(t,e){return new _e(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Fb(t,e){return new _e(n=>{let r;return tn(n,e,()=>{r=t[Mu](),tn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function Fu(t,e){if(!t)throw new Error("Iterable cannot be null");return new _e(n=>{tn(n,e,()=>{let r=t[Symbol.asyncIterator]();tn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Lb(t,e){return Fu(ku(t),e)}function Bb(t,e){if(t!=null){if(Iu(t))return Ob(t,e);if(Du(t))return Pb(t,e);if(Su(t))return Nb(t,e);if(Tu(t))return Fu(t,e);if(Ru(t))return Fb(t,e);if(Ou(t))return Lb(t,e)}throw Au(t)}function ot(t,e){return e?Bb(t,e):Ke(t)}function Y(...t){let e=ai(t);return ot(t,e)}function ci(t,e){let n=oe(t)?t:()=>t,r=i=>i.error(n());return new _e(e?i=>e.schedule(r,0,i):r)}function ig(t){return!!t&&(t instanceof _e||oe(t.lift)&&oe(t.subscribe))}var Tr=Xo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(t,e){return ge((n,r)=>{let i=0;n.subscribe(me(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:dk}=Array;function fk(t,e){return dk(e)?t(...e):t(e)}function Lu(t){return ne(e=>fk(t,e))}var{isArray:hk}=Array,{getPrototypeOf:pk,prototype:gk,keys:mk}=Object;function Bu(t){if(t.length===1){let e=t[0];if(hk(e))return{args:e,keys:null};if(yk(e)){let n=mk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function yk(t){return t&&typeof t=="object"&&pk(t)===gk}function Uu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function is(...t){let e=ai(t),n=Cu(t),{args:r,keys:i}=Bu(t);if(r.length===0)return ot([],e);let o=new _e(vk(r,e,i?s=>Uu(i,s):gn));return n?o.pipe(Lu(n)):o}function vk(t,e,n=gn){return r=>{Ub(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Ub(e,()=>{let l=ot(t[c],e),u=!1;l.subscribe(me(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ub(t,e,n){t?tn(n,t,e):e()}function jb(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=m=>l<r?p(m):c.push(m),p=m=>{o&&e.next(m),l++;let v=!1;Ke(n(m,u++)).subscribe(me(e,b=>{i?.(b),o?h(b):e.next(b)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<r;){let b=c.shift();s?tn(e,s,()=>p(b)):p(b)}f()}catch(b){e.error(b)}}))};return t.subscribe(me(e,h,()=>{d=!0,f()})),()=>{a?.()}}function gt(t,e,n=1/0){return oe(e)?gt((r,i)=>ne((o,s)=>e(r,o,i,s))(Ke(t(r,i))),n):(typeof e=="number"&&(n=e),ge((r,i)=>jb(r,i,t,n)))}function og(t=1/0){return gt(gn,t)}function $b(){return og(1)}function li(...t){return $b()(ot(t,ai(t)))}function ju(t){return new _e(e=>{Ke(t()).subscribe(e)})}function sg(...t){let e=Cu(t),{args:n,keys:r}=Bu(t),i=new _e(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ke(n[u]).subscribe(me(o,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Uu(r,a):a),o.complete())}))}});return e?i.pipe(Lu(e)):i}function jt(t,e){return ge((n,r)=>{let i=0;n.subscribe(me(r,o=>t.call(e,o,i++)&&r.next(o)))})}function cr(t){return ge((e,n)=>{let r=null,i=!1,o;r=e.subscribe(me(n,void 0,void 0,s=>{o=Ke(t(s,cr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Vb(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(me(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ui(t,e){return oe(e)?gt(t,e,1):gt(t,1)}function ag(t,e=Db){return ge((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+t,u=e.now();if(u<l){i=this.schedule(void 0,l-u),r.add(i);return}a()}n.subscribe(me(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function di(t){return ge((e,n)=>{let r=!1;e.subscribe(me(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function mn(t){return t<=0?()=>en:ge((e,n)=>{let r=0;e.subscribe(me(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function $u(t=wk){return ge((e,n)=>{let r=!1;e.subscribe(me(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function wk(){return new Tr}function Ar(t){return ge((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Mr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?jt((i,o)=>t(i,o,r)):gn,mn(1),n?di(e):$u(()=>new Tr))}function os(t){return t<=0?()=>en:ge((e,n)=>{let r=[];e.subscribe(me(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function cg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?jt((i,o)=>t(i,o,r)):gn,os(1),n?di(e):$u(()=>new Tr))}function lg(t,e){return ge(Vb(t,e,arguments.length>=2,!0))}function dg(t={}){let{connector:e=()=>new Te,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,u=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,u=d=!1},p=()=>{let m=s;h(),m?.unsubscribe()};return ge((m,v)=>{l++,!d&&!u&&f();let b=c=c??e();v.add(()=>{l--,l===0&&!d&&!u&&(a=ug(p,i))}),b.subscribe(v),!s&&l>0&&(s=new Ir({next:_=>b.next(_),error:_=>{d=!0,f(),a=ug(h,n,_),b.error(_)},complete:()=>{u=!0,f(),a=ug(h,r),b.complete()}}),Ke(m).subscribe(s))})(o)}}function ug(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Ir({next:()=>{r.unsubscribe(),t()}});return Ke(e(...n)).subscribe(r)}function fg(t){return jt((e,n)=>t<=n)}function Za(...t){let e=ai(t);return ge((n,r)=>{(e?li(t,n,e):li(t,n)).subscribe(r)})}function yn(t,e){return ge((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(me(r,c=>{i?.unsubscribe();let l=0,u=o++;Ke(t(c,u)).subscribe(i=me(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Xa(t){return ge((e,n)=>{Ke(t).subscribe(me(n,()=>n.complete(),Ya)),!n.closed&&e.subscribe(n)})}function tt(t,e,n){let r=oe(t)||e||n?{next:t,error:e,complete:n}:t;return r?ge((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(me(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):gn}var kx="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,n){super(Ed(e,n)),this.code=e}};function Ed(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var Ox=Symbol("InputSignalNode#UNSET"),bk=Ce(M({},Wp),{transformFn:void 0,applyValueToInputSignal(t,e){zp(t,e)}});function Nx(t,e){let n=Object.create(bk);n.value=t,n.transformFn=e?.transform;function r(){if(Up(n),n.value===Ox){let i=null;throw new H(-950,i)}return n.value}return r[Zo]=n,r}function dc(t){return{toString:t}.toString()}var Vu="__parameters__";function xk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Px(t,e,n){return dc(()=>{let r=xk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Vu)?c[Vu]:Object.defineProperty(c,Vu,{value:[]})[Vu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var to=globalThis;function Be(t){for(let e in t)if(t[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function rn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(rn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ag(t,e){return t?e?`${t} ${e}`:t:e||""}var _k=Be({__forward_ref__:Be});function Fx(t){return t.__forward_ref__=Fx,t.toString=function(){return rn(this())},t}function $t(t){return Lx(t)?t():t}function Lx(t){return typeof t=="function"&&t.hasOwnProperty(_k)&&t.__forward_ref__===Fx}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Vt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Cd(t){return Hb(t,Ux)||Hb(t,jx)}function Bx(t){return Cd(t)!==null}function Hb(t,e){return t.hasOwnProperty(e)?t[e]:null}function Ek(t){let e=t&&(t[Ux]||t[jx]);return e||null}function Gb(t){return t&&(t.hasOwnProperty(zb)||t.hasOwnProperty(Ck))?t[zb]:null}var Ux=Be({\u0275prov:Be}),zb=Be({\u0275inj:Be}),jx=Be({ngInjectableDef:Be}),Ck=Be({ngInjectorDef:Be}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $x(t){return t&&!!t.\u0275providers}var Dk=Be({\u0275cmp:Be}),Sk=Be({\u0275dir:Be}),Ik=Be({\u0275pipe:Be}),Tk=Be({\u0275mod:Be}),Qu=Be({\u0275fac:Be}),tc=Be({__NG_ELEMENT_ID__:Be}),Wb=Be({__NG_ENV_ID__:Be});function us(t){return typeof t=="string"?t:t==null?"":String(t)}function Ak(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():us(t)}function Vx(t,e){throw new H(-200,t)}function Fm(t,e){throw new H(-201,!1)}var pe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(pe||{}),Mg;function Hx(){return Mg}function nn(t){let e=Mg;return Mg=t,e}function Gx(t,e,n){let r=Cd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&pe.Optional)return null;if(e!==void 0)return e;Fm(t,"Injector")}var Mk={},no=Mk,Rg="__NG_DI_FLAG__",Ju=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?gu:no,r)}},ed="ngTempTokenPath",Rk="ngTokenPath",kk=/\n/gm,Ok="\u0275",qb="__source";function Nk(t,e=pe.Default){if(qa()===void 0)throw new H(-203,!1);if(qa()===null)return Gx(t,void 0,e);{let n=qa(),r;return n instanceof Ju?r=n.injector:r=n,r.get(t,e&pe.Optional?null:void 0,e)}}function W(t,e=pe.Default){return(Hx()||Nk)($t(t),e)}function S(t,e=pe.Default){return W(t,Dd(e))}function Dd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function kg(t){let e=[];for(let n=0;n<t.length;n++){let r=$t(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=pe.Default;for(let s=0;s<r.length;s++){let a=r[s],c=Pk(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(W(i,o))}else e.push(W(r))}return e}function zx(t,e){return t[Rg]=e,t.prototype[Rg]=e,t}function Pk(t){return t[Rg]}function Fk(t,e,n,r){let i=t[ed];throw e[qb]&&i.unshift(e[qb]),t.message=Lk(`
`+t.message,i,n,r),t[Rk]=i,t[ed]=null,t}function Lk(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Ok?t.slice(2):t;let i=rn(e);if(Array.isArray(e))i=e.map(rn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):rn(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(kk,`
  `)}`}var Lm=zx(Px("Optional"),8);var Wx=zx(Px("SkipSelf"),4);function io(t,e){let n=t.hasOwnProperty(Qu);return n?t[Qu]:null}function Bk(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Uk(t){return t.flat(Number.POSITIVE_INFINITY)}function Bm(t,e){t.forEach(n=>Array.isArray(n)?Bm(n,e):e(n))}function qx(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function td(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function jk(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function $k(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Um(t,e,n){let r=fc(t,e);return r>=0?t[r|1]=n:(r=~r,$k(t,r,e,n)),r}function hg(t,e){let n=fc(t,e);if(n>=0)return t[n|1]}function fc(t,e){return Vk(t,e,1)}function Vk(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ds={},vn=[],fs=new z(""),Yx=new z("",-1),Kx=new z(""),nd=class{get(e,n=no){if(n===no){let r=new Error(`NullInjectorError: No provider for ${rn(e)}!`);throw r.name="NullInjectorError",r}return n}};function Zx(t,e){let n=t[Tk]||null;if(!n&&e===!0)throw new Error(`Type ${rn(t)} does not have '\u0275mod' property.`);return n}function hs(t){return t[Dk]||null}function Hk(t){return t[Sk]||null}function Gk(t){return t[Ik]||null}function Cs(t){return{\u0275providers:t}}function zk(...t){return{\u0275providers:Xx(!0,t),\u0275fromNgModule:!0}}function Xx(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Bm(e,s=>{let a=s;Og(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Qx(i,o),n}function Qx(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];jm(i,o=>{e(o,r)})}}function Og(t,e,n,r){if(t=$t(t),!t)return!1;let i=null,o=Gb(t),s=!o&&hs(t);if(!o&&!s){let c=t.ngModule;if(o=Gb(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Og(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Bm(o.imports,u=>{Og(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Qx(l,e)}if(!a){let l=io(i)||(()=>new i);e({provide:i,useFactory:l,deps:vn},i),e({provide:Kx,useValue:i,multi:!0},i),e({provide:fs,useValue:()=>W(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;jm(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function jm(t,e){for(let n of t)$x(n)&&(n=n.\u0275providers),Array.isArray(n)?jm(n,e):e(n)}var Wk=Be({provide:String,useValue:Be});function Jx(t){return t!==null&&typeof t=="object"&&Wk in t}function qk(t){return!!(t&&t.useExisting)}function Yk(t){return!!(t&&t.useFactory)}function ps(t){return typeof t=="function"}function Kk(t){return!!t.useClass}var Sd=new z(""),Wu={},Yb={},pg;function $m(){return pg===void 0&&(pg=new nd),pg}var on=class{},nc=class extends on{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Pg(e,s=>this.processProvider(s)),this.records.set(Yx,ss(void 0,this)),i.has("environment")&&this.records.set(on,ss(void 0,this));let o=this.records.get(Sd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Kx,vn,pe.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?gu:no,r)}destroy(){Ja(this),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return Ja(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ja(this);let n=Sr(this),r=nn(void 0),i;try{return e()}finally{Sr(n),nn(r)}}get(e,n=no,r=pe.Default){if(Ja(this),e.hasOwnProperty(Wb))return e[Wb](this);r=Dd(r);let i,o=Sr(this),s=nn(void 0);try{if(!(r&pe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=eO(e)&&Cd(e);l&&this.injectableDefInScope(l)?c=ss(Ng(e),Wu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&pe.Self?$m():this.parent;return n=r&pe.Optional&&n===no?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ed]=a[ed]||[]).unshift(rn(e)),o)throw a;return Fk(a,e,"R3InjectorError",this.source)}else throw a}finally{nn(s),Sr(o)}}resolveInjectorInitializers(){let e=ve(null),n=Sr(this),r=nn(void 0),i;try{let o=this.get(fs,vn,pe.Self);for(let s of o)s()}finally{Sr(n),nn(r),ve(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(rn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=$t(e);let n=ps(e)?e:$t(e&&e.provide),r=Xk(e);if(!ps(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ss(void 0,Wu,!0),i.factory=()=>kg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ve(null);try{return n.value===Yb?Vx(rn(e)):n.value===Wu&&(n.value=Yb,n.value=n.factory()),typeof n.value=="object"&&n.value&&Jk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ve(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=$t(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ng(t){let e=Cd(t),n=e!==null?e.factory:io(t);if(n!==null)return n;if(t instanceof z)throw new H(204,!1);if(t instanceof Function)return Zk(t);throw new H(204,!1)}function Zk(t){if(t.length>0)throw new H(204,!1);let n=Ek(t);return n!==null?()=>n.factory(t):()=>new t}function Xk(t){if(Jx(t))return ss(void 0,t.useValue);{let e=e_(t);return ss(e,Wu)}}function e_(t,e,n){let r;if(ps(t)){let i=$t(t);return io(i)||Ng(i)}else if(Jx(t))r=()=>$t(t.useValue);else if(Yk(t))r=()=>t.useFactory(...kg(t.deps||[]));else if(qk(t))r=()=>W($t(t.useExisting));else{let i=$t(t&&(t.useClass||t.provide));if(Qk(t))r=()=>new i(...kg(t.deps));else return io(i)||Ng(i)}return r}function Ja(t){if(t.destroyed)throw new H(205,!1)}function ss(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Qk(t){return!!t.deps}function Jk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function eO(t){return typeof t=="function"||typeof t=="object"&&t instanceof z}function Pg(t,e){for(let n of t)Array.isArray(n)?Pg(n,e):n&&$x(n)?Pg(n.\u0275providers,e):e(n)}function bn(t,e){let n;t instanceof nc?(Ja(t),n=t):n=new Ju(t);let r,i=Sr(n),o=nn(void 0);try{return e()}finally{Sr(i),nn(o)}}function tO(){return Hx()!==void 0||qa()!=null}function nO(t){return typeof t=="function"}var Pr=0,ae=1,se=2,kt=3,Xn=4,an=5,gs=6,rd=7,mt=8,ms=9,Rr=10,yt=11,rc=12,Kb=13,Ds=14,wn=15,oo=16,as=17,kr=18,Id=19,t_=20,fi=21,gg=22,id=23,Nn=24,mg=25,Et=26,n_=1;var so=7,od=8,ys=9,Rt=10;function hi(t){return Array.isArray(t)&&typeof t[n_]=="object"}function Fr(t){return Array.isArray(t)&&t[n_]===!0}function r_(t){return(t.flags&4)!==0}function Ss(t){return t.componentOffset>-1}function Vm(t){return(t.flags&1)===1}function pi(t){return!!t.template}function sd(t){return(t[se]&512)!==0}function hc(t){return(t[se]&256)===256}var Fg=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function i_(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Is=(()=>{let t=()=>o_;return t.ngInherit=!0,t})();function o_(t){return t.type.prototype.ngOnChanges&&(t.setInput=iO),rO}function rO(){let t=a_(this),e=t?.current;if(e){let n=t.previous;if(n===ds)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function iO(t,e,n,r,i){let o=this.declaredInputs[r],s=a_(t)||oO(t,{previous:ds,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Fg(l&&l.currentValue,n,c===ds),i_(t,e,i,n)}var s_="__ngSimpleChanges__";function a_(t){return t[s_]||null}function oO(t,e){return t[s_]=e}var Zb=null;var je=function(t,e=null,n){Zb?.(t,e,n)},c_="svg",sO="math";function ur(t){for(;Array.isArray(t);)t=t[Pr];return t}function l_(t,e){return ur(e[t])}function gr(t,e){return ur(e[t.index])}function Hm(t,e){return t.data[e]}function u_(t,e){return t[e]}function dr(t,e){let n=e[t];return hi(n)?n:n[Pr]}function aO(t){return(t[se]&4)===4}function Gm(t){return(t[se]&128)===128}function cO(t){return Fr(t[kt])}function vs(t,e){return e==null?null:t[e]}function d_(t){t[as]=0}function f_(t){t[se]&1024||(t[se]|=1024,Gm(t)&&Ad(t))}function lO(t,e){for(;t>0;)e=e[Ds],t--;return e}function Td(t){return!!(t[se]&9216||t[Nn]?.dirty)}function Lg(t){t[Rr].changeDetectionScheduler?.notify(8),t[se]&64&&(t[se]|=1024),Td(t)&&Ad(t)}function Ad(t){t[Rr].changeDetectionScheduler?.notify(0);let e=ao(t);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Gm(e)));)e=ao(e)}function h_(t,e){if(hc(t))throw new H(911,!1);t[fi]===null&&(t[fi]=[]),t[fi].push(e)}function uO(t,e){if(t[fi]===null)return;let n=t[fi].indexOf(e);n!==-1&&t[fi].splice(n,1)}function ao(t){let e=t[kt];return Fr(e)?e[kt]:e}function p_(t){return t[rd]??=[]}function g_(t){return t.cleanup??=[]}function dO(t,e,n,r){let i=p_(e);i.push(n),t.firstCreatePass&&g_(t).push(r,i.length-1)}var he={lFrame:D_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Bg=!1;function fO(){return he.lFrame.elementDepthCount}function hO(){he.lFrame.elementDepthCount++}function pO(){he.lFrame.elementDepthCount--}function m_(){return he.bindingsEnabled}function y_(){return he.skipHydrationRootTNode!==null}function gO(t){return he.skipHydrationRootTNode===t}function mO(){he.skipHydrationRootTNode=null}function ye(){return he.lFrame.lView}function Ct(){return he.lFrame.tView}function Ot(t){return he.lFrame.contextLView=t,t[mt]}function Nt(t){return he.lFrame.contextLView=null,t}function Fn(){let t=v_();for(;t!==null&&t.type===64;)t=t.parent;return t}function v_(){return he.lFrame.currentTNode}function yO(){let t=he.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function pc(t,e){let n=he.lFrame;n.currentTNode=t,n.isParent=e}function w_(){return he.lFrame.isParent}function b_(){he.lFrame.isParent=!1}function x_(){return Bg}function Xb(t){let e=Bg;return Bg=t,e}function Md(){let t=he.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function vO(){return he.lFrame.bindingIndex}function wO(t){return he.lFrame.bindingIndex=t}function gc(){return he.lFrame.bindingIndex++}function zm(t){let e=he.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function bO(){return he.lFrame.inI18n}function xO(t,e){let n=he.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ug(e)}function _O(){return he.lFrame.currentDirectiveIndex}function Ug(t){he.lFrame.currentDirectiveIndex=t}function EO(t){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function __(){return he.lFrame.currentQueryIndex}function Wm(t){he.lFrame.currentQueryIndex=t}function CO(t){let e=t[ae];return e.type===2?e.declTNode:e.type===1?t[an]:null}function E_(t,e,n){if(n&pe.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&pe.Host);)if(i=CO(o),i===null||(o=o[Ds],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=he.lFrame=C_();return r.currentTNode=e,r.lView=t,!0}function qm(t){let e=C_(),n=t[ae];he.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function C_(){let t=he.lFrame,e=t===null?null:t.child;return e===null?D_(t):e}function D_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function S_(){let t=he.lFrame;return he.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var I_=S_;function Ym(){let t=S_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function DO(t){return(he.lFrame.contextLView=lO(t,he.lFrame.contextLView))[mt]}function Lr(){return he.lFrame.selectedIndex}function co(t){he.lFrame.selectedIndex=t}function T_(){let t=he.lFrame;return Hm(t.tView,t.selectedIndex)}function A_(){he.lFrame.currentNamespace=c_}function SO(){return he.lFrame.currentNamespace}var M_=!0;function Km(){return M_}function Zm(t){M_=t}function IO(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=o_(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function R_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function qu(t,e,n){k_(t,e,3,n)}function Yu(t,e,n,r){(t[se]&3)===n&&k_(t,e,n,r)}function yg(t,e){let n=t[se];(n&3)===e&&(n&=16383,n+=1,t[se]=n)}function k_(t,e,n,r){let i=r!==void 0?t[as]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[as]+=65536),(a<o||o==-1)&&(TO(t,n,e,c),t[as]=(t[as]&4294901760)+c+2),c++}function Qb(t,e){je(4,t,e);let n=ve(null);try{e.call(t)}finally{ve(n),je(5,t,e)}}function TO(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[se]>>14<t[as]>>16&&(t[se]&3)===e&&(t[se]+=16384,Qb(a,o)):Qb(a,o)}var ls=-1,lo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function AO(t){return(t.flags&8)!==0}function MO(t){return(t.flags&16)!==0}function RO(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];kO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function O_(t){return t===3||t===4||t===6}function kO(t){return t.charCodeAt(0)===64}function Xm(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Jb(t,n,i,null,e[++r]):Jb(t,n,i,null,null))}}return t}function Jb(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}var vg={},jg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Dd(r);let i=this.injector.get(e,vg,r);return i!==vg||n===vg?i:this.parentInjector.get(e,n,r)}};function N_(t){return t!==ls}function ad(t){return t&32767}function OO(t){return t>>16}function cd(t,e){let n=OO(t),r=e;for(;n>0;)r=r[Ds],n--;return r}var $g=!0;function ld(t){let e=$g;return $g=t,e}var NO=256,P_=NO-1,F_=5,PO=0,lr={};function FO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(tc)&&(r=n[tc]),r==null&&(r=n[tc]=PO++);let i=r&P_,o=1<<i;e.data[t+(i>>F_)]|=o}function ud(t,e){let n=L_(t,e);if(n!==-1)return n;let r=e[ae];r.firstCreatePass&&(t.injectorIndex=e.length,wg(r.data,t),wg(e,null),wg(r.blueprint,null));let i=Qm(t,e),o=t.injectorIndex;if(N_(i)){let s=ad(i),a=cd(i,e),c=a[ae].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function wg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function L_(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Qm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=V_(i),r===null)return ls;if(n++,i=i[Ds],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ls}function Vg(t,e,n){FO(t,e,n)}function LO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(O_(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function B_(t,e,n){if(n&pe.Optional||t!==void 0)return t;Fm(e,"NodeInjector")}function U_(t,e,n,r){if(n&pe.Optional&&r===void 0&&(r=null),(n&(pe.Self|pe.Host))===0){let i=t[ms],o=nn(void 0);try{return i?i.get(e,r,n&pe.Optional):Gx(e,r,n&pe.Optional)}finally{nn(o)}}return B_(r,e,n)}function j_(t,e,n,r=pe.Default,i){if(t!==null){if(e[se]&2048&&!(r&pe.Self)){let s=$O(t,e,n,r,lr);if(s!==lr)return s}let o=$_(t,e,n,r,lr);if(o!==lr)return o}return U_(e,n,r,i)}function $_(t,e,n,r,i){let o=UO(n);if(typeof o=="function"){if(!E_(e,t,r))return r&pe.Host?B_(i,n,r):U_(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&pe.Optional))Fm(n);else return s}finally{I_()}}else if(typeof o=="number"){let s=null,a=L_(t,e),c=ls,l=r&pe.Host?e[wn][an]:null;for((a===-1||r&pe.SkipSelf)&&(c=a===-1?Qm(t,e):e[a+8],c===ls||!tx(r,!1)?a=-1:(s=e[ae],a=ad(c),e=cd(c,e)));a!==-1;){let u=e[ae];if(ex(o,a,u.data)){let d=BO(a,e,n,s,r,l);if(d!==lr)return d}c=e[a+8],c!==ls&&tx(r,e[ae].data[a+8]===l)&&ex(o,a,e)?(s=u,a=ad(c),e=cd(c,e)):a=-1}}return i}function BO(t,e,n,r,i,o){let s=e[ae],a=s.data[t+8],c=r==null?Ss(a)&&$g:r!=s&&(a.type&3)!==0,l=i&pe.Host&&o===a,u=Ku(a,s,n,c,l);return u!==null?ic(e,s,u,a):lr}function Ku(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&pi(h)&&h.type===n)return c}return null}function ic(t,e,n,r){let i=t[n],o=e.data;if(i instanceof lo){let s=i;s.resolving&&Vx(Ak(o[n]));let a=ld(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?nn(s.injectImpl):null,u=E_(t,r,pe.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&IO(n,o[n],e)}finally{l!==null&&nn(l),ld(a),s.resolving=!1,I_()}}return i}function UO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(tc)?t[tc]:void 0;return typeof e=="number"?e>=0?e&P_:jO:e}function ex(t,e,n){let r=1<<t;return!!(n[e+(t>>F_)]&r)}function tx(t,e){return!(t&pe.Self)&&!(t&pe.Host&&e)}var ro=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return j_(this._tNode,this._lView,e,Dd(r),n)}};function jO(){return new ro(Fn(),ye())}function Jm(t){return dc(()=>{let e=t.prototype.constructor,n=e[Qu]||Hg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Qu]||Hg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Hg(t){return Lx(t)?()=>{let e=Hg($t(t));return e&&e()}:io(t)}function $O(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!sd(s);){let a=$_(o,s,n,r|pe.Self,lr);if(a!==lr)return a;let c=o.parent;if(!c){let l=s[t_];if(l){let u=l.get(n,lr,r);if(u!==lr)return u}c=V_(s),s=s[Ds]}o=c}return i}function V_(t){let e=t[ae],n=e.type;return n===2?e.declTNode:n===1?t[an]:null}function ey(t){return LO(Fn(),t)}function nx(t,e=null,n=null,r){let i=H_(t,e,n,r);return i.resolveInjectorInitializers(),i}function H_(t,e=null,n=null,r,i=new Set){let o=[n||vn,zk(t)];return r=r||(typeof t=="object"?void 0:rn(t)),new nc(o,e||$m(),r||null,i)}var eo=class eo{static create(e,n){if(Array.isArray(e))return nx({name:""},n,e,"");{let r=e.name??"";return nx({name:r},e.parent,e.providers,r)}}};g(eo,"THROW_IF_NOT_FOUND",no),g(eo,"NULL",new nd),g(eo,"\u0275prov",B({token:eo,providedIn:"any",factory:()=>W(Yx)})),g(eo,"__NG_ELEMENT_ID__",-1);var Pn=eo;var dd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>ey(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},VO=new z("");VO.__NG_ELEMENT_ID__=t=>{let e=Fn();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&pe.Optional)return null;throw new H(204,!1)};var G_=!1,Rd=(()=>{class t{}return g(t,"__NG_ELEMENT_ID__",HO),g(t,"__NG_ENV_ID__",n=>n),t})(),Gg=class extends Rd{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return h_(this._lView,e),()=>uO(this._lView,e)}};function HO(){return new Gg(ye())}var oc=class{},kd=new z("",{providedIn:"root",factory:()=>!1});var z_=new z(""),W_=new z(""),gi=(()=>{let e=class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ye(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}has(r){return this.pendingTasks.has(r)}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};g(e,"\u0275prov",B({token:e,providedIn:"root",factory:()=>new e}));let t=e;return t})();var zg=class extends Te{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,tO()&&(this.destroyRef=S(Rd,{optional:!0})??void 0,this.pendingTasks=S(gi,{optional:!0})??void 0)}emit(e){let n=ve(null);try{super.next(e)}finally{ve(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof fe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ge=zg;function fd(...t){}function q_(t){let e,n;function r(){t=fd;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function rx(t){return queueMicrotask(()=>t()),()=>{t=fd}}var ty="isAngularZone",hd=ty+"_ID",GO=0,st=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ge(!1);onMicrotaskEmpty=new Ge(!1);onStable=new Ge(!1);onError=new Ge(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=G_}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,qO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ty)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,zO,fd,fd);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},zO={};function ny(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function WO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){q_(()=>{t.callbackScheduled=!1,Wg(t),t.isCheckStableRunning=!0,ny(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Wg(t)}function qO(t){let e=()=>{WO(t)},n=GO++;t._inner=t._inner.fork({name:"angular",properties:{[ty]:!0,[hd]:n,[hd+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(YO(c))return r.invokeTask(o,s,a,c);try{return ix(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),ox(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return ix(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!KO(c)&&e(),ox(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Wg(t),ny(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Wg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function ix(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ox(t){t._nesting--,ny(t)}var qg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ge;onMicrotaskEmpty=new Ge;onStable=new Ge;onError=new Ge;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function YO(t){return Y_(t,"__ignore_ng_zone__")}function KO(t){return Y_(t,"__scheduler_tick__")}function Y_(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var sn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ZO=new z("",{providedIn:"root",factory:()=>{let t=S(st),e=S(sn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function sx(t,e){return Nx(t,e)}function XO(t){return Nx(Ox,t)}var K_=(sx.required=XO,sx);function QO(){return Ts(Fn(),ye())}function Ts(t,e){return new Ht(gr(t,e))}var Ht=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}}return g(t,"__NG_ELEMENT_ID__",QO),t})();function JO(t){return t instanceof Ht?t.nativeElement:t}function eN(){return this._results[Symbol.iterator]()}var Yg=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Te}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Uk(e);(this._changesDetected=!Bk(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=eN};function Z_(t){return(t.flags&128)===128}var X_=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(X_||{}),Q_=new Map,tN=0;function nN(){return tN++}function rN(t){Q_.set(t[Id],t)}function Kg(t){Q_.delete(t[Id])}var ax="__ngContext__";function mc(t,e){hi(e)?(t[ax]=e[Id],rN(e)):t[ax]=e}function J_(t){return tE(t[rc])}function eE(t){return tE(t[Xn])}function tE(t){for(;t!==null&&!Fr(t);)t=t[Xn];return t}var Zg;function nE(t){Zg=t}function iN(){if(Zg!==void 0)return Zg;if(typeof document<"u")return document;throw new H(210,!1)}var ry=new z("",{providedIn:"root",factory:()=>oN}),oN="ng",iy=new z(""),Br=new z("",{providedIn:"platform",factory:()=>"unknown"});var yc=new z("",{providedIn:"root",factory:()=>iN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sN="h",aN="b";var rE=!1,cN=new z("",{providedIn:"root",factory:()=>rE});var iE=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(iE||{}),Od=new z(""),cx=new Set;function As(t){cx.has(t)||(cx.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var lN=(()=>{let e=class e{impl=null;execute(){this.impl?.execute()}};g(e,"\u0275prov",B({token:e,providedIn:"root",factory:()=>new e}));let t=e;return t})();var uN=()=>null;function oE(t,e,n=!1){return uN(t,e,n)}function sE(t,e){let n=t.contentQueries;if(n!==null){let r=ve(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Wm(o),a.contentQueries(2,e[s],s)}}}finally{ve(r)}}}function Xg(t,e,n){Wm(0);let r=ve(null);try{e(t,n)}finally{ve(r)}}function aE(t,e,n){if(r_(e)){let r=ve(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{ve(r)}}}var fr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(fr||{}),Hu;function dN(){if(Hu===void 0&&(Hu=null,to.trustedTypes))try{Hu=to.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Hu}function Nd(t){return dN()?.createHTML(t)||t}var Or=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kx})`}},Qg=class extends Or{getTypeName(){return"HTML"}},Jg=class extends Or{getTypeName(){return"Style"}},em=class extends Or{getTypeName(){return"Script"}},tm=class extends Or{getTypeName(){return"URL"}},nm=class extends Or{getTypeName(){return"ResourceURL"}};function mr(t){return t instanceof Or?t.changingThisBreaksApplicationSecurity:t}function fo(t,e){let n=fN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${kx})`)}return n===e}function fN(t){return t instanceof Or&&t.getTypeName()||null}function cE(t){return new Qg(t)}function lE(t){return new Jg(t)}function uE(t){return new em(t)}function dE(t){return new tm(t)}function fE(t){return new nm(t)}function hN(t){let e=new im(t);return pN()?new rm(e):e}var rm=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Nd(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},im=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Nd(e),n}};function pN(){try{return!!new window.DOMParser().parseFromString(Nd(""),"text/html")}catch{return!1}}var gN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Pd(t){return t=String(t),t.match(gN)?t:"unsafe:"+t}function Ur(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function vc(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var hE=Ur("area,br,col,hr,img,wbr"),pE=Ur("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gE=Ur("rp,rt"),mN=vc(gE,pE),yN=vc(pE,Ur("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vN=vc(gE,Ur("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lx=vc(hE,yN,vN,mN),mE=Ur("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wN=Ur("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),bN=Ur("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),xN=vc(mE,wN,bN),_N=Ur("script,style,template"),om=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=DN(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=CN(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=ux(e).toLowerCase();if(!lx.hasOwnProperty(n))return this.sanitizedSomething=!0,!_N.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!xN.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;mE[a]&&(c=Pd(c)),this.buf.push(" ",s,'="',dx(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=ux(e).toLowerCase();lx.hasOwnProperty(n)&&!hE.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(dx(e))}};function EN(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function CN(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw yE(e);return e}function DN(t){let e=t.firstChild;if(e&&EN(t,e))throw yE(e);return e}function ux(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function yE(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var SN=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,IN=/([^\#-~ |!])/g;function dx(t){return t.replace(/&/g,"&amp;").replace(SN,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(IN,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Gu;function vE(t,e){let n=null;try{Gu=Gu||hN(t);let r=e?String(e):"";n=Gu.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Gu.getInertBodyElement(r)}while(r!==o);let a=new om().sanitizeChildren(fx(n)||n);return Nd(a)}finally{if(n){let r=fx(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function fx(t){return"content"in t&&TN(t)?t.content:null}function TN(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Gt=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Gt||{});function mi(t){let e=AN();return e?e.sanitize(Gt.URL,t)||"":fo(t,"URL")?mr(t):Pd(us(t))}function AN(){let t=ye();return t&&t[Rr].sanitizer}function wE(t){return t instanceof Function?t():t}function MN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var bE="ng-template";function RN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&MN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(oy(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function oy(t){return t.type===4&&t.value!==bE}function kN(t,e,n){let r=t.type===4&&!n?bE:t.value;return e===r}function ON(t,e,n){let r=4,i=t.attrs,o=i!==null?FN(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Kn(r)&&!Kn(c))return!1;if(s&&Kn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!kN(t,c,n)||c===""&&e.length===1){if(Kn(r))return!1;s=!0}}else if(r&8){if(i===null||!RN(t,i,c,n)){if(Kn(r))return!1;s=!0}}else{let l=e[++a],u=NN(c,i,oy(t),n);if(u===-1){if(Kn(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Kn(r))return!1;s=!0}}}}return Kn(r)||s}function Kn(t){return(t&1)===0}function NN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return LN(e,t)}function xE(t,e,n=!1){for(let r=0;r<e.length;r++)if(ON(t,e[r],n))return!0;return!1}function PN(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function FN(t){for(let e=0;e<t.length;e++){let n=t[e];if(O_(n))return e}return t.length}function LN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function BN(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function hx(t,e){return t?":not("+e.trim()+")":e}function UN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Kn(s)&&(e+=hx(o,i),i=""),r=s,o=o||!Kn(r);n++}return i!==""&&(e+=hx(o,i)),e}function jN(t){return t.map(UN).join(",")}function $N(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Kn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var xn={};function VN(t,e){return t.createText(e)}function HN(t,e,n){t.setValue(e,n)}function _E(t,e,n){return t.createElement(e,n)}function pd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function EE(t,e,n){t.appendChild(e,n)}function px(t,e,n,r,i){r!==null?pd(t,e,n,r,i):EE(t,e,n)}function GN(t,e,n){t.removeChild(null,e,n)}function zN(t,e,n){t.setAttribute(e,"style",n)}function WN(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function CE(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&RO(t,e,r),i!==null&&WN(t,e,i),o!==null&&zN(t,e,o)}function sy(t,e,n,r,i,o,s,a,c,l,u){let d=Et+r,f=d+i,h=qN(d,f),p=typeof l=="function"?l():l;return h[ae]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function qN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:xn);return n}function YN(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=sy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ay(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Pr]=i,d[se]=r|4|128|8|64|1024,(l!==null||t&&t[se]&2048)&&(d[se]|=2048),d_(d),d[kt]=d[Ds]=t,d[mt]=n,d[Rr]=s||t&&t[Rr],d[yt]=a||t&&t[yt],d[ms]=c||t&&t[ms]||null,d[an]=o,d[Id]=nN(),d[gs]=u,d[t_]=l,d[wn]=e.type==2?t[wn]:d,d}function KN(t,e,n){let r=gr(e,t),i=YN(n),o=t[Rr].rendererFactory,s=cy(t,ay(t,i,null,DE(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function DE(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function SE(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function cy(t,e){return t[rc]?t[Kb][Xn]=e:t[rc]=e,t[Kb]=e,e}function F(t=1){IE(Ct(),ye(),Lr()+t,!1)}function IE(t,e,n,r){if(!r)if((e[se]&3)===3){let o=t.preOrderCheckHooks;o!==null&&qu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Yu(e,o,0,n)}co(n)}var Fd=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Fd||{});function sm(t,e,n,r){let i=ve(null);try{let[o,s,a]=t.inputs[n],c=null;(s&Fd.SignalBased)!==0&&(c=e[o][Zo]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):i_(e,c,o,r)}finally{ve(i)}}function TE(t,e,n,r,i){let o=Lr(),s=r&2;try{co(-1),s&&e.length>Et&&IE(t,e,Et,!1),je(s?2:0,i),n(r,i)}finally{co(o),je(s?3:1,i)}}function ly(t,e,n){nP(t,e,n),(n.flags&64)===64&&rP(t,e,n)}function AE(t,e,n=gr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function ZN(t,e,n,r){let o=r.get(cN,rE)||n===fr.ShadowDom,s=t.selectRootElement(e,o);return XN(s),s}function XN(t){QN(t)}var QN=()=>null;function JN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function eP(t,e,n,r,i,o,s,a){if(!a&&uy(e,t,n,r,i)){Ss(e)&&tP(n,e.index);return}if(e.type&3){let c=gr(e,n);r=JN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function tP(t,e){let n=dr(e,t);n[se]&16||(n[se]|=64)}function nP(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Ss(n)&&KN(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ud(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=ic(e,t,s,n);if(mc(c,e),o!==null&&aP(e,s-r,c,a,n,o),pi(a)){let l=dr(n.index,e);l[mt]=ic(e,t,s,n)}}}function rP(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=_O();try{co(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Ug(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&iP(c,l)}}finally{co(-1),Ug(s)}}function iP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function ME(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];xE(e,o.selectors,!1)&&(r??=[],pi(o)?r.unshift(o):r.push(o))}return r}function oP(t,e,n,r,i,o){let s=gr(t,e);sP(e[yt],s,o,t.value,n,r,i)}function sP(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?us(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function aP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];sm(r,n,c,l)}}function cP(t,e){let n=t[ms],r=n?n.get(sn,null):null;r&&r.handleError(e)}function uy(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=e.data[l];sm(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=e.data[c];sm(u,l,r,i),a=!0}return a}function lP(t,e){let n=dr(e,t),r=n[ae];uP(r,n);let i=n[Pr];i!==null&&n[gs]===null&&(n[gs]=oE(i,n[ms])),je(18),dy(r,n,n[mt]),je(19,n[mt])}function uP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function dy(t,e,n){qm(e);try{let r=t.viewQuery;r!==null&&Xg(1,r,n);let i=t.template;i!==null&&TE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[kr]?.finishViewCreation(t),t.staticContentQueries&&sE(t,e),t.staticViewQueries&&Xg(2,t.viewQuery,n);let o=t.components;o!==null&&dP(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[se]&=-5,Ym()}}function dP(t,e){for(let n=0;n<e.length;n++)lP(t,e[n])}function wc(t,e,n,r){let i=ve(null);try{let o=e.tView,a=t[se]&4096?4096:16,c=ay(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[oo]=l;let u=t[kr];return u!==null&&(c[kr]=u.createEmbeddedView(o)),dy(o,c,n),c}finally{ve(i)}}function ws(t,e){return!e||e.firstChild===null||Z_(t)}var fP;function fy(t,e){return fP(t,e)}var hr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(hr||{});function hy(t){return(t.flags&32)===32}function cs(t,e,n,r,i){if(r!=null){let o,s=!1;Fr(r)?o=r:hi(r)&&(s=!0,r=r[Pr]);let a=ur(r);t===0&&n!==null?i==null?EE(e,n,a):pd(e,n,a,i||null,!0):t===1&&n!==null?pd(e,n,a,i||null,!0):t===2?GN(e,a,s):t===3&&e.destroyNode(a),o!=null&&_P(e,t,o,n,i)}}function hP(t,e){RE(t,e),e[Pr]=null,e[an]=null}function pP(t,e,n,r,i,o){r[Pr]=i,r[an]=e,Bd(t,r,n,1,i,o)}function RE(t,e){e[Rr].changeDetectionScheduler?.notify(9),Bd(t,e,e[yt],2,null,null)}function gP(t){let e=t[rc];if(!e)return bg(t[ae],t);for(;e;){let n=null;if(hi(e))n=e[rc];else{let r=e[Rt];r&&(n=r)}if(!n){for(;e&&!e[Xn]&&e!==t;)hi(e)&&bg(e[ae],e),e=e[kt];e===null&&(e=t),hi(e)&&bg(e[ae],e),n=e&&e[Xn]}e=n}}function py(t,e){let n=t[ys],r=n.indexOf(e);n.splice(r,1)}function Ld(t,e){if(hc(e))return;let n=e[yt];n.destroyNode&&Bd(t,e,n,3,null,null),gP(e)}function bg(t,e){if(hc(e))return;let n=ve(null);try{e[se]&=-129,e[se]|=256,e[Nn]&&Hp(e[Nn]),yP(t,e),mP(t,e),e[ae].type===1&&e[yt].destroy();let r=e[oo];if(r!==null&&Fr(e[kt])){r!==e[kt]&&py(r,e);let i=e[kr];i!==null&&i.detachView(t)}Kg(e)}finally{ve(n)}}function mP(t,e){let n=t.cleanup,r=e[rd];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[rd]=null);let i=e[fi];if(i!==null){e[fi]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[id];if(o!==null){e[id]=null;for(let s of o)s.destroy()}}function yP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof lo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];je(4,a,c);try{c.call(a)}finally{je(5,a,c)}}else{je(4,i,o);try{o.call(i)}finally{je(5,i,o)}}}}}function kE(t,e,n){return vP(t,e.parent,n)}function vP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Pr];if(Ss(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===fr.None||i===fr.Emulated)return null}return gr(r,n)}function OE(t,e,n){return bP(t,e,n)}function wP(t,e,n){return t.type&40?gr(t,n):null}var bP=wP,gx;function gy(t,e,n,r){let i=kE(t,r,e),o=e[yt],s=r.parent||e[an],a=OE(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)px(o,i,n[c],a,!1);else px(o,i,n,a,!1);gx!==void 0&&gx(o,r,e,n,i)}function ec(t,e){if(e!==null){let n=e.type;if(n&3)return gr(e,t);if(n&4)return am(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ec(t,r);{let i=t[e.index];return Fr(i)?am(-1,i):ur(i)}}else{if(n&128)return ec(t,e.next);if(n&32)return fy(e,t)()||ur(t[e.index]);{let r=NE(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ao(t[wn]);return ec(i,r)}else return ec(t,e.next)}}}return null}function NE(t,e){if(e!==null){let r=t[wn][an],i=e.projection;return r.projection[i]}return null}function am(t,e){let n=Rt+t+1;if(n<e.length){let r=e[n],i=r[ae].firstChild;if(i!==null)return ec(r,i)}return e[so]}function my(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&mc(ur(a),r),n.flags|=2),!hy(n))if(c&8)my(t,e,n.child,r,i,o,!1),cs(e,t,i,a,o);else if(c&32){let l=fy(n,r),u;for(;u=l();)cs(e,t,i,u,o);cs(e,t,i,a,o)}else c&16?PE(t,e,r,n,i,o):cs(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Bd(t,e,n,r,i,o){my(n,r,t.firstChild,e,i,o,!1)}function xP(t,e,n){let r=e[yt],i=kE(t,n,e),o=n.parent||e[an],s=OE(o,n,e);PE(r,0,e,n,i,s)}function PE(t,e,n,r,i,o){let s=n[wn],c=s[an].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];cs(e,t,i,u,o)}else{let l=c,u=s[kt];Z_(r)&&(l.flags|=128),my(t,e,l,u,i,o,!0)}}function _P(t,e,n,r,i){let o=n[so],s=ur(n);o!==s&&cs(e,t,r,o,i);for(let a=Rt;a<n.length;a++){let c=n[a];Bd(c[ae],c,t,e,r,o)}}function EP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:hr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=hr.Important),t.setStyle(n,r,i,o))}}function gd(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(ur(o)),Fr(o)&&CP(o,r);let s=n.type;if(s&8)gd(t,e,n.child,r);else if(s&32){let a=fy(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=NE(e,n);if(Array.isArray(a))r.push(...a);else{let c=ao(e[wn]);gd(c[ae],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function CP(t,e){for(let n=Rt;n<t.length;n++){let r=t[n],i=r[ae].firstChild;i!==null&&gd(r[ae],r,i,e)}t[so]!==t[Pr]&&e.push(t[so])}function FE(t){if(t[mg]!==null){for(let e of t[mg])e.impl.addSequence(e);t[mg].length=0}}var LE=[];function DP(t){return t[Nn]??SP(t)}function SP(t){let e=LE.pop()??Object.create(TP);return e.lView=t,e}function IP(t){t.lView[Nn]!==t&&(t.lView=null,LE.push(t))}var TP=Ce(M({},fu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ad(t.lView)},consumerOnSignalRead(){this.lView[Nn]=this}});function AP(t){let e=t[Nn]??Object.create(MP);return e.lView=t,e}var MP=Ce(M({},fu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ao(t.lView);for(;e&&!BE(e[ae]);)e=ao(e);e&&f_(e)},consumerOnSignalRead(){this.lView[Nn]=this}});function BE(t){return t.type!==2}function UE(t){if(t[id]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[id])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[se]&8192)}}var RP=100;function jE(t,e=!0,n=0){let i=t[Rr].rendererFactory,o=!1;o||i.begin?.();try{kP(t,n)}catch(s){throw e&&cP(t,s),s}finally{o||i.end?.()}}function kP(t,e){let n=x_();try{Xb(!0),cm(t,e);let r=0;for(;Td(t);){if(r===RP)throw new H(103,!1);r++,cm(t,1)}}finally{Xb(n)}}function OP(t,e,n,r){if(hc(e))return;let i=e[se],o=!1,s=!1;qm(e);let a=!0,c=null,l=null;o||(BE(t)?(l=DP(e),c=$p(l)):Bp()===null?(a=!1,l=AP(e),c=$p(l)):e[Nn]&&(Hp(e[Nn]),e[Nn]=null));try{d_(e),wO(t.bindingStartIndex),n!==null&&TE(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&qu(e,h,null)}else{let h=t.preOrderHooks;h!==null&&Yu(e,h,0,null),yg(e,0)}if(s||NP(e),UE(e),$E(e,0),t.contentQueries!==null&&sE(t,e),!o)if(u){let h=t.contentCheckHooks;h!==null&&qu(e,h)}else{let h=t.contentHooks;h!==null&&Yu(e,h,1),yg(e,1)}FP(t,e);let d=t.components;d!==null&&HE(e,d,0);let f=t.viewQuery;if(f!==null&&Xg(2,f,r),!o)if(u){let h=t.viewCheckHooks;h!==null&&qu(e,h)}else{let h=t.viewHooks;h!==null&&Yu(e,h,2),yg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[gg]){for(let h of e[gg])h();e[gg]=null}o||(FE(e),e[se]&=-73)}catch(u){throw o||Ad(e),u}finally{l!==null&&(hb(l,c),a&&IP(l)),Ym()}}function $E(t,e){for(let n=J_(t);n!==null;n=eE(n))for(let r=Rt;r<n.length;r++){let i=n[r];VE(i,e)}}function NP(t){for(let e=J_(t);e!==null;e=eE(e)){if(!(e[se]&2))continue;let n=e[ys];for(let r=0;r<n.length;r++){let i=n[r];f_(i)}}}function PP(t,e,n){je(18);let r=dr(e,t);VE(r,n),je(19,r[mt])}function VE(t,e){Gm(t)&&cm(t,e)}function cm(t,e){let r=t[ae],i=t[se],o=t[Nn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Vp(o)),s||=!1,o&&(o.dirty=!1),t[se]&=-9217,s)OP(r,t,r.template,t[mt]);else if(i&8192){UE(t),$E(t,1);let a=r.components;a!==null&&HE(t,a,1),FE(t)}}function HE(t,e,n){for(let r=0;r<e.length;r++)PP(t,e[r],n)}function FP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)co(~i);else{let o=i,s=n[++r],a=n[++r];xO(s,o);let c=e[o];je(24,c),a(2,c),je(25,c)}}}finally{co(-1)}}function yy(t,e){let n=x_()?64:1088;for(t[Rr].changeDetectionScheduler?.notify(e);t;){t[se]|=n;let r=ao(t);if(sd(t)&&!r)return t;t=r}return null}function GE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function zE(t,e){let n=Rt+e;if(n<t.length)return t[n]}function bc(t,e,n,r=!0){let i=e[ae];if(LP(i,e,t,n),r){let s=am(n,t),a=e[yt],c=a.parentNode(t[so]);c!==null&&pP(i,t[an],a,e,c,s)}let o=e[gs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function WE(t,e){let n=sc(t,e);return n!==void 0&&Ld(n[ae],n),n}function sc(t,e){if(t.length<=Rt)return;let n=Rt+e,r=t[n];if(r){let i=r[oo];i!==null&&i!==t&&py(i,r),e>0&&(t[n-1][Xn]=r[Xn]);let o=td(t,Rt+e);hP(r[ae],r);let s=o[kr];s!==null&&s.detachView(o[ae]),r[kt]=null,r[Xn]=null,r[se]&=-129}return r}function LP(t,e,n,r){let i=Rt+r,o=n.length;r>0&&(n[i-1][Xn]=e),r<o-Rt?(e[Xn]=n[i],qx(n,Rt+r,e)):(n.push(e),e[Xn]=null),e[kt]=n;let s=e[oo];s!==null&&n!==s&&qE(s,e);let a=e[kr];a!==null&&a.insertView(t),Lg(e),e[se]|=128}function qE(t,e){let n=t[ys],r=e[kt];if(hi(r))t[se]|=2;else{let i=r[kt][wn];e[wn]!==i&&(t[se]|=2)}n===null?t[ys]=[e]:n.push(e)}var ac=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[ae];return gd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[mt]}set context(e){this._lView[mt]=e}get destroyed(){return hc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[kt];if(Fr(e)){let n=e[od],r=n?n.indexOf(this):-1;r>-1&&(sc(e,r),td(n,r))}this._attachedToViewContainer=!1}Ld(this._lView[ae],this._lView)}onDestroy(e){h_(this._lView,e)}markForCheck(){yy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){Lg(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,jE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=sd(this._lView),n=this._lView[oo];n!==null&&!e&&py(n,this._lView),RE(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=sd(this._lView),r=this._lView[oo];r!==null&&!n&&qE(r,this._lView),Lg(this._lView)}};var cc=(()=>{class t{}return g(t,"__NG_ELEMENT_ID__",jP),t})(),BP=cc,UP=class extends BP{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=wc(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ac(i)}};function jP(){return vy(Fn(),ye())}function vy(t,e){return t.type&4?new UP(e,t,Ts(t,e)):null}function Ud(t,e,n,r,i){let o=t.data[e];if(o===null)o=$P(t,e,n,r,i),bO()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=yO();o.injectorIndex=s===null?-1:s.injectorIndex}return pc(o,!0),o}function $P(t,e,n,r,i){let o=v_(),s=w_(),a=s?o:o&&o.parent,c=t.data[e]=HP(t,a,n,e,r,i);return VP(t,c,o,s),c}function VP(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function HP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return y_()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var _Y=new RegExp(`^(\\d+)*(${aN}|${sN})*(.*)`);var GP=()=>null;function bs(t,e){return GP(t,e)}var zP=class{},YE=class{},lm=class{resolveComponentFactory(e){throw Error(`No component factory found for ${rn(e)}.`)}},Tg,jd=(Tg=class{},g(Tg,"NULL",new lm),Tg),xs=class{},$d=(()=>{class t{destroyNode=null}return g(t,"__NG_ELEMENT_ID__",()=>WP()),t})();function WP(){let t=ye(),e=Fn(),n=dr(e.index,t);return(hi(n)?n:t)[yt]}var qP=(()=>{let e=class e{};g(e,"\u0275prov",B({token:e,providedIn:"root",factory:()=>null}));let t=e;return t})();function mx(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ag(i,a);else if(o==2){let c=a,l=e[++s];r=Ag(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function le(t,e=pe.Default){let n=ye();if(n===null)return W(t,e);let r=Fn();return j_(r,n,$t(t),e)}function KE(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a,c=null,l=null,u=KP(s);u===null?a=s:[a,c,l]=u,QP(t,e,n,a,o,c,l)}o!==null&&r!==null&&YP(n,r,o)}function YP(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function KP(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&pi(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,ZP(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function ZP(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function XP(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function QP(t,e,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&pi(h)&&(c=!0,XP(t,n,f)),Vg(ud(n,e),t,h.type)}iF(n,t.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=SE(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=Xm(n.mergedAttrs,h.hostAttrs),eF(t,n,e,d,h),rF(d,h,i),s!==null&&s.has(h)){let[m,v]=s.get(h);n.directiveToIndex.set(h.type,[d,m+n.directiveStart,v+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}JP(t,n,o)}function JP(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))yx(0,e,i,r),yx(1,e,i,r),wx(e,r,!1);else{let o=n.get(i);vx(0,e,o,r),vx(1,e,o,r),wx(e,r,!0)}}}function yx(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),ZE(e,o)}}function vx(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),ZE(e,s)}}function ZE(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function wx(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||oy(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function eF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=io(i.type,!0)),s=new lo(o,pi(i),le);t.blueprint[r]=s,n[r]=s,tF(t,e,r,SE(t,n,i.hostVars,xn),i)}function tF(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;nF(s)!=a&&s.push(a),s.push(n,r,o)}}function nF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function rF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;pi(e)&&(n[""]=t)}}function iF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function XE(t,e,n,r,i,o,s,a){let c=e.consts,l=vs(c,s),u=Ud(e,t,2,r,l);return o&&KE(e,n,u,vs(c,a),i),u.mergedAttrs=Xm(u.mergedAttrs,u.attrs),u.attrs!==null&&mx(u,u.attrs,!1),u.mergedAttrs!==null&&mx(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function QE(t,e){R_(t,e),r_(e)&&t.queries.elementEnd(e)}var md=class extends jd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=hs(e);return new lc(n,this.ngModule)}};function oF(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Fd.SignalBased)!==0};return i&&(o.transform=i),o})}function sF(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function aF(t,e,n){let r=e instanceof on?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new jg(n,r):n}function cF(t){let e=t.get(xs,null);if(e===null)throw new H(407,!1);let n=t.get(qP,null),r=t.get(oc,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function lF(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return _E(e,n,n==="svg"?c_:n==="math"?sO:null)}var lc=class extends YE{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=oF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=sF(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=jN(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){je(22);let o=ve(null);try{let s=this.componentDef,a=r?["ng-version","19.2.4"]:$N(this.componentDef.selectors[0]),c=sy(0,null,null,1,0,null,null,null,null,[a],null),l=aF(s,i||this.ngModule,e),u=cF(l),d=u.rendererFactory.createRenderer(null,s),f=r?ZN(d,r,s.encapsulation,l):lF(s,d),h=ay(null,c,null,512|DE(s),null,null,u,d,l,null,oE(f,l,!0));h[Et]=f,qm(h);let p=null;try{let m=XE(Et,c,h,"#host",()=>[this.componentDef],!0,0);f&&(CE(d,f,m),mc(f,h)),ly(c,h,m),aE(c,m,h),QE(c,m),n!==void 0&&uF(m,this.ngContentSelectors,n),p=dr(m.index,h),h[mt]=p[mt],dy(c,h,null)}catch(m){throw p!==null&&Kg(p),Kg(h),m}finally{je(23),Ym()}return new um(this.componentType,h)}finally{ve(o)}}},um=class extends zP{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=Hm(n[ae],Et),this.location=Ts(this._tNode,n),this.instance=dr(this._tNode.index,n)[mt],this.hostView=this.changeDetectorRef=new ac(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=uy(r,i[ae],i,e,n);this.previousInputValues.set(e,n);let s=dr(r.index,i);yy(s,1)}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function uF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var yi=(()=>{class t{}return g(t,"__NG_ELEMENT_ID__",dF),t})();function dF(){let t=Fn();return eC(t,ye())}var fF=yi,JE=class extends fF{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ts(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){let e=Qm(this._hostTNode,this._hostLView);if(N_(e)){let n=cd(e,this._hostLView),r=ad(e),i=n[ae].data[r+8];return new ro(i,n)}else return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=bx(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=bs(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ws(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!nO(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new lc(hs(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(s?l:this.parentInjector).get(on,null);m&&(o=m)}let u=hs(c.componentType??{}),d=bs(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,ws(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(cO(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[kt],l=new JE(c,c[an],c[kt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return bc(s,i,o,r),e.attachToViewContainerRef(),qx(xg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=bx(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=sc(this._lContainer,n);r&&(td(xg(this._lContainer),n),Ld(r[ae],r))}detach(e){let n=this._adjustIndex(e,-1),r=sc(this._lContainer,n);return r&&td(xg(this._lContainer),n)!=null?new ac(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function bx(t){return t[od]}function xg(t){return t[od]||(t[od]=[])}function eC(t,e){let n,r=e[t.index];return Fr(r)?n=r:(n=GE(r,e,null,t),e[t.index]=n,cy(e,n)),pF(n,e,t,r),new JE(n,t,e)}function hF(t,e){let n=t[yt],r=n.createComment(""),i=gr(e,t),o=n.parentNode(i);return pd(n,o,r,n.nextSibling(i),!1),r}var pF=yF,gF=()=>!1;function mF(t,e,n){return gF(t,e,n)}function yF(t,e,n,r){if(t[so])return;let i;n.type&8?i=ur(r):i=hF(e,n),t[so]=i}var dm=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},fm=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)wy(e,n).matches!==null&&this.queries[n].setDirty()}},hm=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=DF(e):this.predicate=e}},pm=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},gm=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,vF(n,o)),this.matchTNodeWithReadOption(e,n,Ku(n,e,o,!1,!1))}else r===cc?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ku(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ht||i===yi||i===cc&&n.type&4)this.addMatch(n.index,-2);else{let o=Ku(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function vF(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function wF(t,e){return t.type&11?Ts(t,e):t.type&4?vy(t,e):null}function bF(t,e,n,r){return n===-1?wF(e,t):n===-2?xF(t,e,r):ic(t,t[ae],n,e)}function xF(t,e,n){if(n===Ht)return Ts(e,t);if(n===cc)return vy(e,t);if(n===yi)return eC(e,t)}function tC(t,e,n,r){let i=e[kr].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(bF(e,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function mm(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=tC(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=Rt;d<u.length;d++){let f=u[d];f[oo]===f[kt]&&mm(f[ae],f,l,r)}if(u[ys]!==null){let d=u[ys];for(let f=0;f<d.length;f++){let h=d[f];mm(h[ae],h,l,r)}}}}}return r}function _F(t,e){return t[kr].queries[e].queryList}function EF(t,e,n){let r=new Yg((n&4)===4);return dO(t,e,r,r.destroy),(e[kr]??=new fm).queries.push(new dm(r))-1}function CF(t,e,n){let r=Ct();return r.firstCreatePass&&(SF(r,new hm(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),EF(r,ye(),e)}function DF(t){return t.split(",").map(e=>e.trim())}function SF(t,e,n){t.queries===null&&(t.queries=new pm),t.queries.track(new gm(e,n))}function wy(t,e){return t.queries.getByIndex(e)}function IF(t,e){let n=t[ae],r=wy(n,e);return r.crossesNgTemplate?mm(n,t,e,[]):tC(n,t,r,e)}var _s=class{},by=class{};var ym=class extends _s{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new md(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Zx(e);this._bootstrapComponents=wE(o.bootstrap),this._r3Injector=H_(e,n,[{provide:_s,useValue:this},{provide:jd,useValue:this.componentFactoryResolver},...r],rn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vm=class extends by{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ym(this.moduleType,e,[])}};var yd=class extends _s{injector;componentFactoryResolver=new md(this);instance=null;constructor(e){super();let n=new nc([...e.providers,{provide:_s,useValue:this},{provide:jd,useValue:this.componentFactoryResolver}],e.parent||$m(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function xy(t,e,n=null){return new yd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var TF=(()=>{let e=class e{_injector;cachedInjectors=new Map;constructor(r){this._injector=r}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Xx(!1,r.type),o=i.length>0?xy([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};g(e,"\u0275prov",B({token:e,providedIn:"environment",factory:()=>new e(W(on))}));let t=e;return t})();function be(t){return dc(()=>{let e=nC(t),n=Ce(M({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===X_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(TF).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||fr.Emulated,styles:t.styles||vn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&As("NgStandalone"),rC(n);let r=t.dependencies;return n.directiveDefs=xx(r,!1),n.pipeDefs=xx(r,!0),n.id=OF(n),n})}function AF(t){return hs(t)||Hk(t)}function MF(t){return t!==null}function zt(t){return dc(()=>({type:t.type,bootstrap:t.bootstrap||vn,declarations:t.declarations||vn,imports:t.imports||vn,exports:t.exports||vn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function RF(t,e){if(t==null)return ds;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Fd.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function kF(t){if(t==null)return ds;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function vi(t){return dc(()=>{let e=nC(t);return rC(e),e})}function Vd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function nC(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ds,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||vn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:RF(t.inputs,e),outputs:kF(t.outputs),debugInfo:null}}function rC(t){t.features?.forEach(e=>e(t))}function xx(t,e){if(!t)return null;let n=e?Gk:AF;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(MF)}function OF(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function iC(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function _y(t,e,n){return t[e]=n}function NF(t,e){return t[e]}function pr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function oC(t,e,n,r){let i=pr(t,e,n);return pr(t,e+1,r)||i}function PF(t,e,n,r,i,o,s,a,c){let l=e.consts,u=Ud(e,t,4,s||null,a||null);m_()&&KE(e,n,u,vs(l,c),ME),u.mergedAttrs=Xm(u.mergedAttrs,u.attrs),R_(e,u);let d=u.tView=sy(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function vd(t,e,n,r,i,o,s,a,c,l){let u=n+Et,d=e.firstCreatePass?PF(u,e,t,r,i,o,s,a,c):e.data[u];pc(d,!1);let f=FF(e,t,d,n);Km()&&gy(e,t,f,d),mc(f,t);let h=GE(f,t,f,d);return t[u]=h,cy(t,h),mF(h,d,t),Vm(d)&&ly(e,t,d),c!=null&&AE(t,d,l),d}function ue(t,e,n,r,i,o,s,a){let c=ye(),l=Ct(),u=vs(l.consts,o);return vd(c,l,t,e,n,r,i,u,s,a),ue}var FF=LF;function LF(t,e,n,r){return Zm(!0),e[yt].createComment("")}var Ey=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"platform"}));let t=e;return t})();var sC=new z("");var BF=(()=>{let e=class e{};g(e,"\u0275prov",B({token:e,providedIn:"root",factory:()=>new wm}));let t=e;return t})(),wm=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function xc(t){return!!t&&typeof t.then=="function"}function aC(t){return!!t&&typeof t.subscribe=="function"}var cC=new z("");var lC=(()=>{let e=class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i});appInits=S(cC,{optional:!0})??[];injector=S(Pn);constructor(){}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=bn(this.injector,o);if(xc(s))r.push(s);else if(aC(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),Hd=new z("");function UF(){Gp(()=>{throw new H(600,!1)})}function jF(t){return t.isBoundToModule}var $F=10;var Nr=(()=>{let e=class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(ZO);afterRenderManager=S(lN);zonelessEnabled=S(kd);rootEffectScheduler=S(BF);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Te;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=S(gi).hasPendingTasks.pipe(ne(r=>!r));constructor(){S(Od,{optional:!0})}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}_injector=S(on);_rendererFactory=null;get injector(){return this._injector}bootstrap(r,i){je(10);let o=r instanceof YE;if(!this._injector.get(lC).done){let h="";throw new H(405,h)}let a;o?a=r:a=this._injector.get(jd).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=jF(a)?void 0:this._injector.get(_s),l=i||a.selector,u=a.create(Pn.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(sC,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Zu(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),je(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){je(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(iE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let r=ve(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ve(r),this.afterTick.next(),je(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xs,null,{optional:!0}));let r=0;for(;this.dirtyFlags!==0&&r++<$F;)je(14),this.synchronizeOnce(),je(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:o}of this.allViews)VF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Td(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Zu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(Hd,[]).forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Zu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new H(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function Zu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function VF(t,e,n,r){if(!n&&!Td(t))return;jE(t,e,n&&!r?0:1)}function _c(t,e,n,r){let i=ye(),o=gc();if(pr(i,o,e)){let s=Ct(),a=T_();oP(a,i,t,e,n,r)}return _c}function HF(t,e,n,r){return pr(t,gc(),n)?e+us(n)+r:xn}function GF(t,e,n,r,i,o){let s=vO(),a=oC(t,s,n,i);return zm(2),a?e+us(n)+r+us(i)+o:xn}function zu(t,e){return t<<17|e<<2}function uo(t){return t>>17&32767}function zF(t){return(t&2)==2}function WF(t,e){return t&131071|e<<17}function bm(t){return t|2}function Es(t){return(t&131068)>>2}function _g(t,e){return t&-131069|e<<2}function qF(t){return(t&1)===1}function xm(t){return t|1}function YF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=uo(s),c=Es(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||fc(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let f=uo(t[a+1]);t[r+1]=zu(f,a),f!==0&&(t[f+1]=_g(t[f+1],r)),t[a+1]=WF(t[a+1],r)}else t[r+1]=zu(a,0),a!==0&&(t[a+1]=_g(t[a+1],r)),a=r;else t[r+1]=zu(c,0),a===0?a=r:t[c+1]=_g(t[c+1],r),c=r;l&&(t[r+1]=bm(t[r+1])),_x(t,u,r,!0),_x(t,u,r,!1),KF(e,u,t,r,o),s=zu(a,c),o?e.classBindings=s:e.styleBindings=s}function KF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&fc(o,e)>=0&&(n[r+1]=xm(n[r+1]))}function _x(t,e,n,r){let i=t[n+1],o=e===null,s=r?uo(i):Es(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];ZF(c,e)&&(a=!0,t[s+1]=r?xm(l):bm(l)),s=r?uo(l):Es(l)}a&&(t[n+1]=r?bm(i):xm(i))}function ZF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?fc(t,e)>=0:!1}var Zn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function XF(t){return t.substring(Zn.key,Zn.keyEnd)}function QF(t){return JF(t),uC(t,dC(t,0,Zn.textEnd))}function uC(t,e){let n=Zn.textEnd;return n===e?-1:(e=Zn.keyEnd=eL(t,Zn.key=e,n),dC(t,e,n))}function JF(t){Zn.key=0,Zn.keyEnd=0,Zn.value=0,Zn.valueEnd=0,Zn.textEnd=t.length}function dC(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function eL(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function De(t,e,n){let r=ye(),i=gc();if(pr(r,i,e)){let o=Ct(),s=T_();eP(o,s,r,t,e,r[yt],n,!1)}return De}function _m(t,e,n,r,i){uy(e,t,n,i?"class":"style",r)}function Ms(t,e){return nL(t,e,null,!0),Ms}function yr(t){rL(lL,tL,t,!0)}function tL(t,e){for(let n=QF(e);n>=0;n=uC(e,n))Um(t,XF(e),!0)}function nL(t,e,n,r){let i=ye(),o=Ct(),s=zm(2);if(o.firstUpdatePass&&hC(o,t,s,r),e!==xn&&pr(i,s,e)){let a=o.data[Lr()];pC(o,a,i,i[yt],t,i[s+1]=dL(e,n),r,s)}}function rL(t,e,n,r){let i=Ct(),o=zm(2);i.firstUpdatePass&&hC(i,null,o,r);let s=ye();if(n!==xn&&pr(s,o,n)){let a=i.data[Lr()];if(gC(a,r)&&!fC(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Ag(c,n||"")),_m(i,a,s,n,r)}else uL(i,a,s,s[yt],s[o+1],s[o+1]=cL(t,e,n),r,o)}}function fC(t,e){return e>=t.expandoStartIndex}function hC(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Lr()],s=fC(t,n);gC(o,r)&&e===null&&!s&&(e=!1),e=iL(i,o,e,r),YF(i,o,e,n,s,r)}}function iL(t,e,n,r){let i=EO(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Eg(null,t,e,n,r),n=uc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Eg(i,t,e,n,r),o===null){let c=oL(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Eg(null,t,e,c[1],r),c=uc(c,e.attrs,r),sL(t,e,r,c))}else o=aL(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function oL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Es(r)!==0)return t[uo(r)]}function sL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[uo(i)]=r}function aL(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=uc(r,s,n)}return uc(r,e.attrs,n)}function Eg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=uc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function uc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Um(t,s,n?!0:e[++o]))}return t===void 0?null:t}function cL(t,e,n){if(n==null||n==="")return vn;let r=[],i=mr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function lL(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Um(t,r,n)}function uL(t,e,n,r,i,o,s,a){i===xn&&(i=vn);let c=0,l=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let f=c<i.length?i[c+1]:void 0,h=l<o.length?o[l+1]:void 0,p=null,m;u===d?(c+=2,l+=2,f!==h&&(p=d,m=h)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,m=h),p!==null&&pC(t,e,n,r,p,m,s,a),u=c<i.length?i[c]:null,d=l<o.length?o[l]:null}}function pC(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=qF(l)?Ex(c,e,n,i,Es(l),s):void 0;if(!wd(u)){wd(o)||zF(l)&&(o=Ex(c,null,n,i,a,s));let d=l_(Lr(),n);EP(r,s,d,i,o)}}function Ex(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=n[i+1];f===xn&&(f=d?vn:void 0);let h=d?hg(f,r):u===r?f:void 0;if(l&&!wd(h)&&(h=hg(c,r)),wd(h)&&(a=h,s))return a;let p=t[i+1];i=s?uo(p):Es(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=hg(c,r))}return a}function wd(t){return t!==void 0}function dL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=rn(mr(t)))),t}function gC(t,e){return(t.flags&(e?8:16))!==0}var Em=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Cg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function fL(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=t.at(o),u=e[o],d=Cg(o,l,o,u,n);if(d!==0){d<0&&t.updateValue(o,u),o++;continue}let f=t.at(s),h=e[c],p=Cg(s,f,c,h,n);if(p!==0){p<0&&t.updateValue(s,h),s--,c--;continue}let m=n(o,l),v=n(s,f),b=n(o,u);if(Object.is(b,v)){let _=n(c,h);Object.is(_,m)?(t.swap(o,s),t.updateValue(s,h),c--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(r??=new bd,i??=Dx(t,o,s,n),Cm(t,r,o,b))t.updateValue(o,u),o++,s++;else if(i.has(b))r.set(m,t.detach(o)),s--;else{let _=t.create(o,e[o]);t.attach(o,_),o++,s++}}for(;o<=c;)Cx(t,r,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=t.at(o),d=l.value,f=Cg(o,u,o,d,n);if(f!==0)f<0&&t.updateValue(o,d),o++,l=c.next();else{r??=new bd,i??=Dx(t,o,s,n);let h=n(o,d);if(Cm(t,r,o,h))t.updateValue(o,d),o++,s++,l=c.next();else if(!i.has(h))t.attach(o,t.create(o,d)),o++,s++,l=c.next();else{let p=n(o,u);r.set(p,t.detach(o)),s--}}}for(;!l.done;)Cx(t,r,n,t.length,l.value),l=c.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(c=>{t.destroy(c)})}function Cm(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Cx(t,e,n,r,i){if(Cm(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function Dx(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var bd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function ee(t,e){As("NgControlFlow");let n=ye(),r=gc(),i=n[r]!==xn?n[r]:-1,o=i!==-1?xd(n,Et+i):void 0,s=0;if(pr(n,r,t)){let a=ve(null);try{if(o!==void 0&&WE(o,s),t!==-1){let c=Et+t,l=xd(n,c),u=Tm(n[ae],c),d=bs(l,u.tView.ssrId),f=wc(n,u,e,{dehydratedView:d});bc(l,f,s,ws(u,d))}}finally{ve(a)}}else if(o!==void 0){let a=zE(o,s);a!==void 0&&(a[mt]=e)}}var Dm=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Rt}};function Cy(t){return t}function ho(t,e){return e}var Sm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Ze(t,e,n,r,i,o,s,a,c,l,u,d,f){As("NgControlFlow");let h=ye(),p=Ct(),m=c!==void 0,v=ye(),b=a?s.bind(v[wn][mt]):s,_=new Sm(m,b);v[Et+t]=_,vd(h,p,t+1,e,n,r,i,vs(p.consts,o)),m&&vd(h,p,t+2,c,l,u,d,vs(p.consts,f))}var Im=class extends Em{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Rt}at(e){return this.getLView(e)[mt].$implicit}attach(e,n){let r=n[gs];this.needsIndexUpdate||=e!==this.length,bc(this.lContainer,n,e,ws(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,hL(this.lContainer,e)}create(e,n){let r=bs(this.lContainer,this.templateTNode.tView.ssrId),i=wc(this.hostLView,this.templateTNode,new Dm(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Ld(e[ae],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[mt].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[mt].$index=e}getLView(e){return pL(this.lContainer,e)}};function Xe(t){let e=ve(null),n=Lr();try{let r=ye(),i=r[ae],o=r[n],s=n+1,a=xd(r,s);if(o.liveCollection===void 0){let l=Tm(i,s);o.liveCollection=new Im(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(fL(c,t,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=gc(),u=c.length===0;if(pr(r,l,u)){let d=n+2,f=xd(r,d);if(u){let h=Tm(i,d),p=bs(f,h.tView.ssrId),m=wc(r,h,void 0,{dehydratedView:p});bc(f,m,0,ws(h,p))}else WE(f,0)}}}finally{ve(e)}}function xd(t,e){return t[e]}function hL(t,e){return sc(t,e)}function pL(t,e){return zE(t,e)}function Tm(t,e){return Hm(t,e)}function R(t,e,n,r){let i=ye(),o=Ct(),s=Et+t,a=i[yt],c=o.firstCreatePass?XE(s,o,i,e,ME,m_(),n,r):o.data[s],l=gL(o,i,c,a,e,t);i[s]=l;let u=Vm(c);return pc(c,!0),CE(a,l,c),!hy(c)&&Km()&&gy(o,i,l,c),(fO()===0||u)&&mc(l,i),hO(),u&&(ly(o,i,c),aE(o,c,i)),r!==null&&AE(i,c),R}function T(){let t=Fn();w_()?b_():(t=t.parent,pc(t,!1));let e=t;gO(e)&&mO(),pO();let n=Ct();return n.firstCreatePass&&QE(n,e),e.classesWithoutHost!=null&&AO(e)&&_m(n,e,ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&MO(e)&&_m(n,e,ye(),e.stylesWithoutHost,!1),T}function re(t,e,n,r){return R(t,e,n,r),T(),re}var gL=(t,e,n,r,i,o)=>(Zm(!0),_E(r,i,SO()));function Ln(){return ye()}var Ji=void 0;function mL(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var yL=["en",[["a","p"],["AM","PM"],Ji],[["AM","PM"],Ji,Ji],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ji,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ji,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ji,"{1} 'at' {0}",Ji],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",mL],Dg={};function _n(t){let e=vL(t),n=Sx(e);if(n)return n;let r=e.split("-")[0];if(n=Sx(r),n)return n;if(r==="en")return yL;throw new H(701,!1)}function Sx(t){return t in Dg||(Dg[t]=to.ng&&to.ng.common&&to.ng.common.locales&&to.ng.common.locales[t]),Dg[t]}var nt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(nt||{});function vL(t){return t.toLowerCase().replace(/_/g,"-")}var _d="en-US";var wL=_d;function bL(t){typeof t=="string"&&(wL=t.toLowerCase().replace(/_/g,"-"))}function Ix(t,e,n,r){return function i(o){if(o===Function)return r;let s=Ss(t)?dr(t.index,e):e;yy(s,5);let a=Tx(e,n,r,o),c=i.__ngNextListenerFn__;for(;c;)a=Tx(e,n,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Tx(t,e,n,r){let i=ve(null);try{return je(6,e,n),n(r)!==!1}catch(o){return xL(t,o),!1}finally{je(7,e,n),ve(i)}}function xL(t,e){let n=t[ms],r=n?n.get(sn,null):null;r&&r.handleError(e)}function Ax(t,e,n,r,i,o,s,a,c){let l=n[r],d=e.data[r].outputs[i],h=l[d].subscribe(s),p=a.length;a.push(s,h),c&&c.push(o,t.index,p,-(p+1))}var _L=(t,e,n)=>{};function Pt(t,e,n,r){let i=ye(),o=Ct(),s=Fn();return CL(o,i,i[yt],s,t,e,r),Pt}function EL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[rd],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function CL(t,e,n,r,i,o,s){let a=Vm(r),l=t.firstCreatePass?g_(t):null,u=e[mt],d=p_(e),f=!0;if(r.type&3||s){let h=gr(r,e),p=s?s(h):h,m=d.length,v=s?_=>s(ur(_[r.index])):r.index,b=null;if(!s&&a&&(b=EL(t,e,i,r.index)),b!==null){let _=b.__ngLastListenerFn__||b;_.__ngNextListenerFn__=o,b.__ngLastListenerFn__=o,f=!1}else{o=Ix(r,e,u,o),_L(p,i,o);let _=n.listen(p,i,o);d.push(o,_),l&&l.push(i,v,m,m+1)}}else o=Ix(r,e,u,o);if(f){let h=r.outputs?.[i],p=r.hostDirectiveOutputs?.[i];if(p&&p.length)for(let m=0;m<p.length;m+=2){let v=p[m],b=p[m+1];Ax(r,t,e,v,b,i,o,d,l)}if(h&&h.length)for(let m of h)Ax(r,t,e,m,i,i,o,d,l)}}function L(t=1){return DO(t)}function DL(t,e){let n=null,r=PN(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?xE(t,o,!0):BN(r,o))return i}return n}function mC(t){let e=ye()[wn][an];if(!e.projection){let n=t?t.length:1,r=e.projection=jk(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?DL(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function yC(t,e=0,n,r,i,o){let s=ye(),a=Ct(),c=r?t+1:null;c!==null&&vd(s,a,c,r,i,o,null,n);let l=Ud(a,Et+t,16,null,n||null);l.projection===null&&(l.projection=e),b_();let d=!s[gs]||y_();s[wn][an].projection[l.projection]===null&&c!==null?SL(s,a,c):d&&!hy(l)&&xP(a,s,l)}function SL(t,e,n){let r=Et+n,i=e.data[r],o=t[r],s=bs(o,i.tView.ssrId),a=wc(t,i,void 0,{dehydratedView:s});bc(o,a,0,ws(i,s))}function po(t,e,n){CF(t,e,n)}function wi(t){let e=ye(),n=Ct(),r=__();Wm(r+1);let i=wy(n,r);if(t.dirty&&aO(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=IF(e,r);t.reset(o,JO),t.notifyOnChanges()}return!0}return!1}function bi(){return _F(ye(),__())}function IL(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function U(t,e=""){let n=ye(),r=Ct(),i=t+Et,o=r.firstCreatePass?Ud(r,i,1,e,null):r.data[i],s=TL(r,n,o,e,t);n[i]=s,Km()&&gy(r,n,s,o),pc(o,!1)}var TL=(t,e,n,r,i)=>(Zm(!0),VN(e[yt],r));function at(t){return cn("",t,""),at}function cn(t,e,n){let r=ye(),i=HF(r,t,e,n);return i!==xn&&vC(r,Lr(),i),cn}function jr(t,e,n,r,i){let o=ye(),s=GF(o,t,e,n,r,i);return s!==xn&&vC(o,Lr(),s),jr}function vC(t,e,n){let r=l_(e,t);HN(t[yt],r,n)}function AL(t,e,n){let r=Ct();if(r.firstCreatePass){let i=pi(t);Am(n,r.data,r.blueprint,i,!0),Am(e,r.data,r.blueprint,i,!1)}}function Am(t,e,n,r,i){if(t=$t(t),Array.isArray(t))for(let o=0;o<t.length;o++)Am(t[o],e,n,r,i);else{let o=Ct(),s=ye(),a=Fn(),c=ps(t)?t:$t(t.provide),l=e_(t),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(ps(t)||!t.multi){let h=new lo(l,i,le),p=Ig(c,e,i?u:u+f,d);p===-1?(Vg(ud(a,s),o,c),Sg(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{let h=Ig(c,e,u+f,d),p=Ig(c,e,u,u+f),m=h>=0&&n[h],v=p>=0&&n[p];if(i&&!v||!i&&!m){Vg(ud(a,s),o,c);let b=kL(i?RL:ML,n.length,i,r,l);!i&&v&&(n[p].providerFactory=b),Sg(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(b),s.push(b)}else{let b=wC(n[i?p:h],l,!i&&r);Sg(o,t,h>-1?h:p,b)}!i&&r&&v&&n[p].componentProviders++}}}function Sg(t,e,n,r){let i=ps(e),o=Kk(e);if(i||o){let c=(o?$t(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function wC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ig(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ML(t,e,n,r){return Mm(this.multi,[])}function RL(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ic(n,n[ae],this.providerFactory.index,r);o=a.slice(0,s),Mm(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Mm(i,o);return o}function Mm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function kL(t,e,n,r,i){let o=new lo(t,n,le);return o.multi=[],o.index=e,o.componentProviders=0,wC(o,i,r&&!n),o}function Ec(t,e=[]){return n=>{n.providersResolver=(r,i)=>AL(r,i?i(t):t,e)}}function bC(t,e,n){let r=Md()+t,i=ye();return i[r]===xn?_y(i,r,n?e.call(n):e()):NF(i,r)}function Qn(t,e,n,r){return _C(ye(),Md(),t,e,n,r)}function xC(t,e){let n=t[e];return n===xn?void 0:n}function _C(t,e,n,r,i,o){let s=e+n;return pr(t,s,i)?_y(t,s+1,o?r.call(o,i):r(i)):xC(t,s+1)}function OL(t,e,n,r,i,o,s){let a=e+n;return oC(t,a,i,o)?_y(t,a+2,s?r.call(s,i,o):r(i,o)):xC(t,a+2)}function ln(t,e){let n=Ct(),r,i=t+Et;n.firstCreatePass?(r=NL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=io(r.type,!0)),s,a=nn(le);try{let c=ld(!1),l=o();return ld(c),IL(n,ye(),i,l),l}finally{nn(a)}}function NL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Dy(t,e,n){let r=t+Et,i=ye(),o=u_(i,r);return EC(i,r)?_C(i,Md(),e,o.transform,n,o):o.transform(n)}function Bn(t,e,n,r){let i=t+Et,o=ye(),s=u_(o,i);return EC(o,i)?OL(o,Md(),e,s.transform,n,r,s):s.transform(n,r)}function EC(t,e){return t[ae].data[e].pure}var Rm=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Sy=(()=>{let e=class e{compileModuleSync(r){return new vm(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Zx(r),s=wE(o.declarations).reduce((a,c)=>{let l=hs(c);return l&&a.push(new lc(l)),a},[]);return new Rm(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();var PL=(()=>{let e=class e{zone=S(st);changeDetectionScheduler=S(oc);applicationRef=S(Nr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),FL=new z("",{factory:()=>!1});function CC({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new st(Ce(M({},SC()),{scheduleInRootZone:n})),[{provide:st,useFactory:t},{provide:fs,multi:!0,useFactory:()=>{let r=S(PL,{optional:!0});return()=>r.initialize()}},{provide:fs,multi:!0,useFactory:()=>{let r=S(LL);return()=>{r.initialize()}}},e===!0?{provide:z_,useValue:!0}:[],{provide:W_,useValue:n??G_}]}function DC(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=CC({ngZoneFactory:()=>{let i=SC(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&As("NgZone_CoalesceEvent"),new st(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Cs([{provide:FL,useValue:!0},{provide:kd,useValue:!1},r])}function SC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var LL=(()=>{let e=class e{subscription=new fe;initialized=!1;zone=S(st);pendingTasks=S(gi);initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{st.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{st.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();var BL=(()=>{let e=class e{appRef=S(Nr);taskService=S(gi);ngZone=S(st);zonelessEnabled=S(kd);tracing=S(Od,{optional:!0});disableScheduling=S(z_,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new fe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(hd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(W_,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof qg||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;let i=!1;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let o=this.useMicrotaskScheduler?rx:q_;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(r){return!(this.disableScheduling&&!r||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(hd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rx(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function UL(){return typeof $localize<"u"&&$localize.locale||_d}var Cc=new z("",{providedIn:"root",factory:()=>S(Cc,pe.Optional|pe.SkipSelf)||UL()});var km=new z(""),jL=new z("");function Qa(t){return!t.moduleRef}function $L(t){let e=Qa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(st);return n.run(()=>{Qa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(sn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Qa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(km);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(km);s.add(o),t.moduleRef.onDestroy(()=>{Zu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return HL(r,n,()=>{let o=e.get(lC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Cc,_d);if(bL(s||_d),!e.get(jL,!0))return Qa(t)?e.get(Nr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Qa(t)){let c=e.get(Nr);return t.rootComponent!==void 0&&c.bootstrap(t.rootComponent),c}else return VL(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function VL(t,e){let n=t.injector.get(Nr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new H(-403,!1);e.push(t)}function HL(t,e,n){try{let r=n();return xc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Xu=null;function GL(t=[],e){return Pn.create({name:e,providers:[{provide:Sd,useValue:"platform"},{provide:km,useValue:new Set([()=>Xu=null])},...t]})}function zL(t=[]){if(Xu)return Xu;let e=GL(t);return Xu=e,UF(),WL(e),e}function WL(t){let e=t.get(iy,null);bn(t,()=>{e?.forEach(n=>n())})}function IC(){return!1}var Dc=(()=>{class t{}return g(t,"__NG_ELEMENT_ID__",qL),t})();function qL(t){return YL(Fn(),ye(),(t&16)===16)}function YL(t,e,n){if(Ss(t)&&!n){let r=dr(t.index,e);return new ac(r,r)}else if(t.type&175){let r=e[wn];return new ac(r,e)}return null}var Om=class{constructor(){}supports(e){return e instanceof Map||iC(e)}create(){return new Nm}},Nm=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||iC(e)))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}let r=new Pm(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},Pm=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function Mx(){return new Gd([new Om])}var Gd=(()=>{let e=class e{factories;constructor(r){this.factories=r}static create(r,i){if(i){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Mx()),deps:[[e,new Wx,new Lm]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i)return i;throw new H(901,!1)}};g(e,"\u0275prov",B({token:e,providedIn:"root",factory:Mx}));let t=e;return t})();function TC(t){je(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=zL(r),o=[CC({}),{provide:oc,useExisting:BL},...n||[]],s=new yd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return $L({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{je(9)}}function Sc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Rx=class{[Zo];constructor(e){this[Zo]=e}destroy(){this[Zo].destroy()}};var PC=null;function Rs(){return PC}function FC(t){PC??=t}var Jd=class{};var ct=new z(""),LC=(()=>{let e=class e{historyGo(r){throw new Error("")}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:()=>S(KL),providedIn:"platform"}));let t=e;return t})();var KL=(()=>{let e=class e extends LC{_location;_history;_doc=S(ct);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rs().getBaseHref(this._doc)}onPopState(r){let i=Rs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Rs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:()=>new e,providedIn:"platform"}));let t=e;return t})();function BC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function AC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function go(t){return t&&t[0]!=="?"?`?${t}`:t}var nf=(()=>{let e=class e{historyGo(r){throw new Error("")}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:()=>S(UC),providedIn:"root"}));let t=e;return t})(),ZL=new z(""),UC=(()=>{let e=class e extends nf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(r,i){super(),this._platformLocation=r,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??S(ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return BC(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+go(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+go(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+go(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};g(e,"\u0275fac",function(i){return new(i||e)(W(LC),W(ZL,8))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();var Tc=(()=>{let e=class e{_subject=new Te;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(r){this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=JL(AC(MC(i))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+go(i))}normalize(r){return e.stripTrailingSlash(QL(this._basePath,MC(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+go(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+go(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i??void 0,complete:o??void 0})}};g(e,"normalizeQueryParams",go),g(e,"joinWithSlash",BC),g(e,"stripTrailingSlash",AC),g(e,"\u0275fac",function(i){return new(i||e)(W(nf))}),g(e,"\u0275prov",B({token:e,factory:()=>XL(),providedIn:"root"}));let t=e;return t})();function XL(){return new Tc(W(nf))}function QL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function MC(t){return t.replace(/\/index.html$/,"")}function JL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var jC=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(jC||{});var Wt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Wt||{}),Ue=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ue||{}),En=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(En||{}),Cn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function e2(t){return _n(t)[nt.LocaleId]}function t2(t,e,n){let r=_n(t),i=[r[nt.DayPeriodsFormat],r[nt.DayPeriodsStandalone]],o=Un(i,e);return Un(o,n)}function n2(t,e,n){let r=_n(t),i=[r[nt.DaysFormat],r[nt.DaysStandalone]],o=Un(i,e);return Un(o,n)}function r2(t,e,n){let r=_n(t),i=[r[nt.MonthsFormat],r[nt.MonthsStandalone]],o=Un(i,e);return Un(o,n)}function i2(t,e){let r=_n(t)[nt.Eras];return Un(r,e)}function zd(t,e){let n=_n(t);return Un(n[nt.DateFormat],e)}function Wd(t,e){let n=_n(t);return Un(n[nt.TimeFormat],e)}function qd(t,e){let r=_n(t)[nt.DateTimeFormat];return Un(r,e)}function Vr(t,e){let n=_n(t),r=n[nt.NumberSymbols][e];if(typeof r>"u"){if(e===Cn.CurrencyDecimal)return n[nt.NumberSymbols][Cn.Decimal];if(e===Cn.CurrencyGroup)return n[nt.NumberSymbols][Cn.Group]}return r}function o2(t,e){return _n(t)[nt.NumberFormats][e]}function $C(t){if(!t[nt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[nt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function s2(t){let e=_n(t);return $C(e),(e[nt.ExtraData][2]||[]).map(r=>typeof r=="string"?Iy(r):[Iy(r[0]),Iy(r[1])])}function a2(t,e,n){let r=_n(t);$C(r);let i=[r[nt.ExtraData][0],r[nt.ExtraData][1]],o=Un(i,e)||[];return Un(o,n)||[]}function Un(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Iy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var c2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Yd={},l2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function u2(t,e,n,r){let i=w2(t);e=$r(n,e)||e;let s=[],a;for(;e;)if(a=l2.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=HC(r,c),i=v2(i,r));let l="";return s.forEach(u=>{let d=m2(u);l+=d?d(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function ef(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function $r(t,e){let n=e2(t);if(Yd[n]??={},Yd[n][e])return Yd[n][e];let r="";switch(e){case"shortDate":r=zd(t,En.Short);break;case"mediumDate":r=zd(t,En.Medium);break;case"longDate":r=zd(t,En.Long);break;case"fullDate":r=zd(t,En.Full);break;case"shortTime":r=Wd(t,En.Short);break;case"mediumTime":r=Wd(t,En.Medium);break;case"longTime":r=Wd(t,En.Long);break;case"fullTime":r=Wd(t,En.Full);break;case"short":let i=$r(t,"shortTime"),o=$r(t,"shortDate");r=Kd(qd(t,En.Short),[i,o]);break;case"medium":let s=$r(t,"mediumTime"),a=$r(t,"mediumDate");r=Kd(qd(t,En.Medium),[s,a]);break;case"long":let c=$r(t,"longTime"),l=$r(t,"longDate");r=Kd(qd(t,En.Long),[c,l]);break;case"full":let u=$r(t,"fullTime"),d=$r(t,"fullDate");r=Kd(qd(t,En.Full),[u,d]);break}return r&&(Yd[n][e]=r),r}function Kd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Jn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function d2(t,e){return Jn(t,3).substring(0,e)}function ut(t,e,n=0,r=!1,i=!1){return function(o,s){let a=f2(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return d2(a,e);let c=Vr(s,Cn.MinusSign);return Jn(a,e,c,r,i)}}function f2(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function $e(t,e,n=Wt.Format,r=!1){return function(i,o){return h2(i,o,t,e,n,r)}}function h2(t,e,n,r,i,o){switch(n){case 2:return r2(e,i,r)[t.getMonth()];case 1:return n2(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=s2(e),u=a2(e,i,r),d=l.findIndex(f=>{if(Array.isArray(f)){let[h,p]=f,m=s>=h.hours&&a>=h.minutes,v=s<p.hours||s===p.hours&&a<p.minutes;if(h.hours<p.hours){if(m&&v)return!0}else if(m||v)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return t2(e,i,r)[s<12?0:1];case 3:return i2(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function Zd(t){return function(e,n,r){let i=-1*r,o=Vr(n,Cn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+Jn(s,2,o)+Jn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Jn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Jn(s,2,o)+":"+Jn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Jn(s,2,o)+":"+Jn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var p2=0,Qd=4;function g2(t){let e=ef(t,p2,1).getDay();return ef(t,0,1+(e<=Qd?Qd:Qd+7)-e)}function VC(t){let e=t.getDay(),n=e===0?-3:Qd-e;return ef(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Ty(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=VC(n),s=g2(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Jn(i,t,Vr(r,Cn.MinusSign))}}function Xd(t,e=!1){return function(n,r){let o=VC(n).getFullYear();return Jn(o,t,Vr(r,Cn.MinusSign),e)}}var Ay={};function m2(t){if(Ay[t])return Ay[t];let e;switch(t){case"G":case"GG":case"GGG":e=$e(3,Ue.Abbreviated);break;case"GGGG":e=$e(3,Ue.Wide);break;case"GGGGG":e=$e(3,Ue.Narrow);break;case"y":e=ut(0,1,0,!1,!0);break;case"yy":e=ut(0,2,0,!0,!0);break;case"yyy":e=ut(0,3,0,!1,!0);break;case"yyyy":e=ut(0,4,0,!1,!0);break;case"Y":e=Xd(1);break;case"YY":e=Xd(2,!0);break;case"YYY":e=Xd(3);break;case"YYYY":e=Xd(4);break;case"M":case"L":e=ut(1,1,1);break;case"MM":case"LL":e=ut(1,2,1);break;case"MMM":e=$e(2,Ue.Abbreviated);break;case"MMMM":e=$e(2,Ue.Wide);break;case"MMMMM":e=$e(2,Ue.Narrow);break;case"LLL":e=$e(2,Ue.Abbreviated,Wt.Standalone);break;case"LLLL":e=$e(2,Ue.Wide,Wt.Standalone);break;case"LLLLL":e=$e(2,Ue.Narrow,Wt.Standalone);break;case"w":e=Ty(1);break;case"ww":e=Ty(2);break;case"W":e=Ty(1,!0);break;case"d":e=ut(2,1);break;case"dd":e=ut(2,2);break;case"c":case"cc":e=ut(7,1);break;case"ccc":e=$e(1,Ue.Abbreviated,Wt.Standalone);break;case"cccc":e=$e(1,Ue.Wide,Wt.Standalone);break;case"ccccc":e=$e(1,Ue.Narrow,Wt.Standalone);break;case"cccccc":e=$e(1,Ue.Short,Wt.Standalone);break;case"E":case"EE":case"EEE":e=$e(1,Ue.Abbreviated);break;case"EEEE":e=$e(1,Ue.Wide);break;case"EEEEE":e=$e(1,Ue.Narrow);break;case"EEEEEE":e=$e(1,Ue.Short);break;case"a":case"aa":case"aaa":e=$e(0,Ue.Abbreviated);break;case"aaaa":e=$e(0,Ue.Wide);break;case"aaaaa":e=$e(0,Ue.Narrow);break;case"b":case"bb":case"bbb":e=$e(0,Ue.Abbreviated,Wt.Standalone,!0);break;case"bbbb":e=$e(0,Ue.Wide,Wt.Standalone,!0);break;case"bbbbb":e=$e(0,Ue.Narrow,Wt.Standalone,!0);break;case"B":case"BB":case"BBB":e=$e(0,Ue.Abbreviated,Wt.Format,!0);break;case"BBBB":e=$e(0,Ue.Wide,Wt.Format,!0);break;case"BBBBB":e=$e(0,Ue.Narrow,Wt.Format,!0);break;case"h":e=ut(3,1,-12);break;case"hh":e=ut(3,2,-12);break;case"H":e=ut(3,1);break;case"HH":e=ut(3,2);break;case"m":e=ut(4,1);break;case"mm":e=ut(4,2);break;case"s":e=ut(5,1);break;case"ss":e=ut(5,2);break;case"S":e=ut(6,1);break;case"SS":e=ut(6,2);break;case"SSS":e=ut(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Zd(0);break;case"ZZZZZ":e=Zd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Zd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Zd(2);break;default:return null}return Ay[t]=e,e}function HC(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function y2(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function v2(t,e,n){let i=t.getTimezoneOffset(),o=HC(e,i);return y2(t,-1*(o-i))}function w2(t){if(RC(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return ef(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(c2))return b2(r)}let e=new Date(t);if(!RC(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function b2(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,l),e}function RC(t){return t instanceof Date&&!isNaN(t.valueOf())}var x2=/^(\d+)?\.((\d+)(-(\d+))?)?$/,kC=22,tf=".",Ic="0",_2=";",E2=",",My="#";function C2(t,e,n,r,i,o,s=!1){let a="",c=!1;if(!isFinite(t))a=Vr(n,Cn.Infinity);else{let l=T2(t);s&&(l=I2(l));let u=e.minInt,d=e.minFrac,f=e.maxFrac;if(o){let _=o.match(x2);if(_===null)throw new Error(`${o} is not a valid digit info`);let C=_[1],D=_[3],k=_[5];C!=null&&(u=Ry(C)),D!=null&&(d=Ry(D)),k!=null?f=Ry(k):D!=null&&d>f&&(f=d)}A2(l,d,f);let h=l.digits,p=l.integerLen,m=l.exponent,v=[];for(c=h.every(_=>!_);p<u;p++)h.unshift(0);for(;p<0;p++)h.unshift(0);p>0?v=h.splice(p,h.length):(v=h,h=[0]);let b=[];for(h.length>=e.lgSize&&b.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)b.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&b.unshift(h.join("")),a=b.join(Vr(n,r)),v.length&&(a+=Vr(n,i)+v.join("")),m&&(a+=Vr(n,Cn.Exponential)+"+"+m)}return t<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function D2(t,e,n){let r=o2(e,jC.Decimal),i=S2(r,Vr(e,Cn.MinusSign));return C2(t,i,e,Cn.Group,Cn.Decimal,n)}function S2(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(_2),i=r[0],o=r[1],s=i.indexOf(tf)!==-1?i.split(tf):[i.substring(0,i.lastIndexOf(Ic)+1),i.substring(i.lastIndexOf(Ic)+1)],a=s[0],c=s[1]||"";n.posPre=a.substring(0,a.indexOf(My));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===Ic?n.minFrac=n.maxFrac=u+1:d===My?n.maxFrac=u+1:n.posSuf+=d}let l=a.split(E2);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let u=i.length-n.posPre.length-n.posSuf.length,d=o.indexOf(My);n.negPre=o.substring(0,d).replace(/'/g,""),n.negSuf=o.slice(d+u).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function I2(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function T2(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(tf))>-1&&(e=e.replace(tf,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===Ic;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Ic;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>kC&&(r=r.splice(0,kC-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function A2(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let d=s;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let d=1;d<s;d++)r[d]=0}if(a>=5)if(s-1<0){for(let d=0;d>s;d--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+t.integerLen,u=r.reduceRight(function(d,f,h,p){return f=f+d,p[h]=f<10?f:f-10,c&&(p[h]===0&&h>=l?p.pop():c=!1),f>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}function Ry(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function rf(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var of=(()=>{let e=class e{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(r,i,o){this._ngEl=r,this._differs=i,this._renderer=o}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[o,s]=r.split("."),a=o.indexOf("-")===-1?void 0:hr.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,o,s?`${i}${s}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,o,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};g(e,"\u0275fac",function(i){return new(i||e)(le(Ht),le(Gd),le($d))}),g(e,"\u0275dir",vi({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}));let t=e;return t})();function GC(t,e){return new H(2100,!1)}var M2="mediumDate",R2=new z(""),k2=new z(""),Hr=(()=>{let e=class e{locale;defaultTimezone;defaultOptions;constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,s){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??M2,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return u2(r,a,s||this.locale,c)}catch(a){throw GC(e,a.message)}}};g(e,"\u0275fac",function(i){return new(i||e)(le(Cc,16),le(R2,24),le(k2,24))}),g(e,"\u0275pipe",Vd({name:"date",type:e,pure:!0}));let t=e;return t})();function O2(t,e){return{key:t,value:e}}var zC=(()=>{let e=class e{differs;constructor(r){this.differs=r}differ;keyValues=[];compareFn=OC;transform(r,i=OC){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let o=this.differ.diff(r),s=i!==this.compareFn;return o&&(this.keyValues=[],o.forEachItem(a=>{this.keyValues.push(O2(a.key,a.currentValue))})),(o||s)&&(i&&this.keyValues.sort(i),this.compareFn=i),this.keyValues}};g(e,"\u0275fac",function(i){return new(i||e)(le(Gd,16))}),g(e,"\u0275pipe",Vd({name:"keyvalue",type:e,pure:!1}));let t=e;return t})();function OC(t,e){let n=t.key,r=e.key;if(n===r)return 0;if(n==null)return 1;if(r==null)return-1;if(typeof n=="string"&&typeof r=="string")return n<r?-1:1;if(typeof n=="number"&&typeof r=="number")return n-r;if(typeof n=="boolean"&&typeof r=="boolean")return n<r?-1:1;let i=String(n),o=String(r);return i==o?0:i<o?-1:1}var sf=(()=>{let e=class e{_locale;constructor(r){this._locale=r}transform(r,i,o){if(!N2(r))return null;o||=this._locale;try{let s=P2(r);return D2(s,o,i)}catch(s){throw GC(e,s.message)}}};g(e,"\u0275fac",function(i){return new(i||e)(le(Cc,16))}),g(e,"\u0275pipe",Vd({name:"number",type:e,pure:!0}));let t=e;return t})();function N2(t){return!(t==null||t===""||t!==t)}function P2(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var qt=(()=>{let e=class e{};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275mod",zt({type:e})),g(e,"\u0275inj",Vt({}));let t=e;return t})(),ky="browser",F2="server";function WC(t){return t===ky}function Oy(t){return t===F2}var ks=class{};var Mc=class{},cf=class{},mo=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Py=class{encodeKey(e){return qC(e)}encodeValue(e){return qC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function L2(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var B2=/%(\d[a-f0-9])/gi,U2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function qC(t){return encodeURIComponent(t).replace(B2,(e,n)=>U2[n]??e)}function af(t){return`${t}`}var xi=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Py,e.fromString){if(e.fromObject)throw new H(2805,!1);this.map=L2(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(af):[af(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(af(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(af(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Fy=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function j2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function YC(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function KC(t){return typeof Blob<"u"&&t instanceof Blob}function ZC(t){return typeof FormData<"u"&&t instanceof FormData}function $2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var XC="Content-Type",QC="Accept",tD="X-Request-URL",nD="text/plain",rD="application/json",V2=`${rD}, ${nD}, */*`,Ac=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(j2(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new mo,this.context??=new Fy,!this.params)this.params=new xi,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||YC(this.body)||KC(this.body)||ZC(this.body)||$2(this.body)?this.body:this.body instanceof xi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ZC(this.body)?null:KC(this.body)?this.body.type||null:YC(this.body)?null:typeof this.body=="string"?nD:this.body instanceof xi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?rD:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((f,h)=>f.set(h,e.setHeaders[h]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,h)=>f.set(h,e.setParams[h]),u)),new t(n,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Ns=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ns||{}),Rc=class{headers;status;statusText;url;ok;type;constructor(e,n=200,r="OK"){this.headers=e.headers||new mo,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ly=class t extends Rc{constructor(e={}){super(e)}type=Ns.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},lf=class t extends Rc{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ns.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},uf=class extends Rc{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},H2=200,G2=204;function Ny(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var kc=(()=>{let e=class e{handler;constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Ac)s=r;else{let l;o.headers instanceof mo?l=o.headers:l=new mo(o.headers);let u;o.params&&(o.params instanceof xi?u=o.params:u=new xi({fromObject:o.params})),s=new Ac(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=Y(s).pipe(ui(l=>this.handler.handle(l)));if(r instanceof Ac||o.observe==="events")return a;let c=a.pipe(jt(l=>l instanceof lf));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(ne(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new H(2806,!1);return l.body}));case"blob":return c.pipe(ne(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new H(2807,!1);return l.body}));case"text":return c.pipe(ne(l=>{if(l.body!==null&&typeof l.body!="string")throw new H(2808,!1);return l.body}));case"json":default:return c.pipe(ne(l=>l.body))}case"response":return c;default:throw new H(2809,!1)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new xi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,Ny(o,i))}post(r,i,o={}){return this.request("POST",r,Ny(o,i))}put(r,i,o={}){return this.request("PUT",r,Ny(o,i))}};g(e,"\u0275fac",function(i){return new(i||e)(W(Mc))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})();var z2=new z("");function W2(t,e){return e(t)}function q2(t,e,n){return(r,i)=>bn(n,()=>e(r,o=>t(o,i)))}var iD=new z(""),Y2=new z(""),K2=new z("",{providedIn:"root",factory:()=>!0});var JC=(()=>{let e=class e extends Mc{backend;injector;chain=null;pendingTasks=S(gi);contributeToStability=S(K2);constructor(r,i){super(),this.backend=r,this.injector=i}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(iD),...this.injector.get(Y2,[])]));this.chain=i.reduceRight((o,s)=>q2(o,s,this.injector),W2)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(Ar(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};g(e,"\u0275fac",function(i){return new(i||e)(W(cf),W(on))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})();var Z2=/^\)\]\}',?\n/,X2=RegExp(`^${tD}:`,"m");function Q2(t){return"responseURL"in t&&t.responseURL?t.responseURL:X2.test(t.getAllResponseHeaders())?t.getResponseHeader(tD):null}var eD=(()=>{let e=class e{xhrFactory;constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new H(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ot(i.\u0275loadImpl()):Y(null)).pipe(yn(()=>new _e(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((v,b)=>a.setRequestHeader(v,b.join(","))),r.headers.has(QC)||a.setRequestHeader(QC,V2),!r.headers.has(XC)){let v=r.detectContentTypeHeader();v!==null&&a.setRequestHeader(XC,v)}if(r.responseType){let v=r.responseType.toLowerCase();a.responseType=v!=="json"?v:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let v=a.statusText||"OK",b=new mo(a.getAllResponseHeaders()),_=Q2(a)||r.url;return l=new Ly({headers:b,status:a.status,statusText:v,url:_}),l},d=()=>{let{headers:v,status:b,statusText:_,url:C}=u(),D=null;b!==G2&&(D=typeof a.response>"u"?a.responseText:a.response),b===0&&(b=D?H2:0);let k=b>=200&&b<300;if(r.responseType==="json"&&typeof D=="string"){let Z=D;D=D.replace(Z2,"");try{D=D!==""?JSON.parse(D):null}catch(A){D=Z,k&&(k=!1,D={error:A,text:D})}}k?(s.next(new lf({body:D,headers:v,status:b,statusText:_,url:C||void 0})),s.complete()):s.error(new uf({error:D,headers:v,status:b,statusText:_,url:C||void 0}))},f=v=>{let{url:b}=u(),_=new uf({error:v,status:a.status||0,statusText:a.statusText||"Unknown Error",url:b||void 0});s.error(_)},h=!1,p=v=>{h||(s.next(u()),h=!0);let b={type:Ns.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(b.total=v.total),r.responseType==="text"&&a.responseText&&(b.partialText=a.responseText),s.next(b)},m=v=>{let b={type:Ns.UploadProgress,loaded:v.loaded};v.lengthComputable&&(b.total=v.total),s.next(b)};return a.addEventListener("load",d),a.addEventListener("error",f),a.addEventListener("timeout",f),a.addEventListener("abort",f),r.reportProgress&&(a.addEventListener("progress",p),c!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(c),s.next({type:Ns.Sent}),()=>{a.removeEventListener("error",f),a.removeEventListener("abort",f),a.removeEventListener("load",d),a.removeEventListener("timeout",f),r.reportProgress&&(a.removeEventListener("progress",p),c!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};g(e,"\u0275fac",function(i){return new(i||e)(W(ks))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})(),oD=new z(""),J2="XSRF-TOKEN",eB=new z("",{providedIn:"root",factory:()=>J2}),tB="X-XSRF-TOKEN",nB=new z("",{providedIn:"root",factory:()=>tB}),df=class{},rB=(()=>{let e=class e{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=rf(r,this.cookieName),this.lastCookieString=r),this.lastToken}};g(e,"\u0275fac",function(i){return new(i||e)(W(ct),W(Br),W(eB))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})();function iB(t,e){let n=t.url.toLowerCase();if(!S(oD)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=S(df).getToken(),i=S(nB);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function sD(...t){let e=[kc,eD,JC,{provide:Mc,useExisting:JC},{provide:cf,useFactory:()=>S(z2,{optional:!0})??S(eD)},{provide:iD,useValue:iB,multi:!0},{provide:oD,useValue:!0},{provide:df,useClass:rB}];for(let n of t)e.push(...n.\u0275providers);return Cs(e)}var Uy=class extends Jd{supportsDOMEvents=!0},jy=class t extends Uy{static makeCurrent(){FC(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=oB();return n==null?null:sB(n)}resetBaseElement(){Oc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rf(document.cookie,e)}},Oc=null;function oB(){return Oc=Oc||document.querySelector("base"),Oc?Oc.getAttribute("href"):null}function sB(t){return new URL(t,document.baseURI).pathname}var aB=(()=>{let e=class e{build(){return new XMLHttpRequest}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})(),$y=new z(""),hD=(()=>{let e=class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(r,i){this._zone=i,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o,s){return this._findPluginFor(i).addEventListener(r,i,o,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new H(5101,!1);return this._eventNameToPlugin.set(r,i),i}};g(e,"\u0275fac",function(i){return new(i||e)(W($y),W(st))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})(),hf=class{_doc;constructor(e){this._doc=e}manager},ff="ng-app-id";function cD(t){for(let e of t)e.remove()}function lD(t,e){let n=e.createElement("style");return n.textContent=t,n}function cB(t,e,n,r){let i=t.head?.querySelectorAll(`style[${ff}="${e}"],link[${ff}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ff),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Vy(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var pD=(()=>{let e=class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.isServer=Oy(s),cB(r,i,this.inline,this.external),this.hosts.add(r.head)}addStyles(r,i){for(let o of r)this.addUsage(o,this.inline,lD);i?.forEach(o=>this.addUsage(o,this.external,Vy))}removeStyles(r,i){for(let o of r)this.removeUsage(o,this.inline);i?.forEach(o=>this.removeUsage(o,this.external))}addUsage(r,i,o){let s=i.get(r);s?s.usage++:i.set(r,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,o(r,this.doc)))})}removeUsage(r,i){let o=i.get(r);o&&(o.usage--,o.usage<=0&&(cD(o.elements),i.delete(r)))}ngOnDestroy(){for(let[,{elements:r}]of[...this.inline,...this.external])cD(r);this.hosts.clear()}addHost(r){this.hosts.add(r);for(let[i,{elements:o}]of this.inline)o.push(this.addElement(r,lD(i,this.doc)));for(let[i,{elements:o}]of this.external)o.push(this.addElement(r,Vy(i,this.doc)))}removeHost(r){this.hosts.delete(r)}addElement(r,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(ff,this.appId),r.appendChild(i)}};g(e,"\u0275fac",function(i){return new(i||e)(W(ct),W(ry),W(yc,8),W(Br))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})(),By={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gy=/%COMP%/g;var gD="%COMP%",lB=`_nghost-${gD}`,uB=`_ngcontent-${gD}`,dB=!0,fB=new z("",{providedIn:"root",factory:()=>dB});function hB(t){return uB.replace(Gy,t)}function pB(t){return lB.replace(Gy,t)}function mD(t,e){return e.map(n=>n.replace(Gy,t))}var uD=(()=>{let e=class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(r,i,o,s,a,c,l,u=null,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.tracingService=d,this.platformIsServer=Oy(c),this.defaultRenderer=new Nc(r,a,l,this.platformIsServer,this.tracingService)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===fr.ShadowDom&&(i=Ce(M({},i),{encapsulation:fr.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof pf?o.applyToHost(r):o instanceof Pc&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case fr.Emulated:s=new pf(l,u,i,this.appId,d,a,c,f,h);break;case fr.ShadowDom:return new Hy(l,u,r,i,a,c,this.nonce,f,h);default:s=new Pc(l,u,i,d,a,c,f,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(r){this.rendererByCompId.delete(r)}};g(e,"\u0275fac",function(i){return new(i||e)(W(hD),W(pD),W(ry),W(fB),W(ct),W(Br),W(st),W(yc),W(Od,8))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})(),Nc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(By[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(dD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(dD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=By[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=By[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(hr.DashCase|hr.Important)?e.style.setProperty(n,r,i&hr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&hr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Rs().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function dD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Hy=class extends Nc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=mD(i.id,u);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=Vy(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pc=class extends Nc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=l?mD(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},pf=class extends Pc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,l,u),this.contentAttr=hB(u),this.hostAttr=pB(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},gB=(()=>{let e=class e extends hf{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o,s){return r.addEventListener(i,o,s),()=>this.removeEventListener(r,i,o,s)}removeEventListener(r,i,o,s){return r.removeEventListener(i,o,s)}};g(e,"\u0275fac",function(i){return new(i||e)(W(ct))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})(),fD=["alt","control","meta","shift"],mB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},vB=(()=>{let e=class e extends hf{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o,s){let a=e.parseEventName(i),c=e.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rs().onAndCancel(r,a.domEventName,c,s))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),fD.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=mB[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),fD.forEach(a=>{if(a!==o){let c=yB[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};g(e,"\u0275fac",function(i){return new(i||e)(W(ct))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac}));let t=e;return t})();function yD(t,e){return TC(M({rootComponent:t},wB(e)))}function wB(t){return{appProviders:[...CB,...t?.providers??[]],platformProviders:EB}}function bB(){jy.makeCurrent()}function xB(){return new sn}function _B(){return nE(document),document}var EB=[{provide:Br,useValue:ky},{provide:iy,useValue:bB,multi:!0},{provide:ct,useFactory:_B,deps:[]}];var CB=[{provide:Sd,useValue:"root"},{provide:sn,useFactory:xB,deps:[]},{provide:$y,useClass:gB,multi:!0,deps:[ct]},{provide:$y,useClass:vB,multi:!0,deps:[ct]},uD,pD,hD,{provide:xs,useExisting:uD},{provide:ks,useClass:aB,deps:[]},[]];var vD=(()=>{let e=class e{_doc;constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};g(e,"\u0275fac",function(i){return new(i||e)(W(ct))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();var zy=(()=>{let e=class e{};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=W(DB),o},providedIn:"root"}));let t=e;return t})(),DB=(()=>{let e=class e extends zy{_doc;constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case Gt.NONE:return i;case Gt.HTML:return fo(i,"HTML")?mr(i):vE(this._doc,String(i)).toString();case Gt.STYLE:return fo(i,"Style")?mr(i):i;case Gt.SCRIPT:if(fo(i,"Script"))return mr(i);throw new H(5200,!1);case Gt.URL:return fo(i,"URL")?mr(i):Pd(String(i));case Gt.RESOURCE_URL:if(fo(i,"ResourceURL"))return mr(i);throw new H(5201,!1);default:throw new H(5202,!1)}}bypassSecurityTrustHtml(r){return cE(r)}bypassSecurityTrustStyle(r){return lE(r)}bypassSecurityTrustScript(r){return uE(r)}bypassSecurityTrustUrl(r){return dE(r)}bypassSecurityTrustResourceUrl(r){return fE(r)}};g(e,"\u0275fac",function(i){return new(i||e)(W(ct))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();var de="primary",Zc=Symbol("RouteTitle"),Zy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function js(t){return new Zy(t)}function IB(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function TB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!vr(t[n],e[n]))return!1;return!0}function vr(t,e){let n=t?Xy(t):void 0,r=e?Xy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ID(t[i],e[i]))return!1;return!0}function Xy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function ID(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function TD(t){return t.length>0?t[t.length-1]:null}function Ei(t){return ig(t)?t:xc(t)?ot(Promise.resolve(t)):Y(t)}var AB={exact:MD,subset:RD},AD={exact:MB,subset:RB,ignored:()=>!0};function bD(t,e,n){return AB[n.paths](t.root,e.root,n.matrixParams)&&AD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function MB(t,e){return vr(t,e)}function MD(t,e,n){if(!vo(t.segments,e.segments)||!yf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!MD(t.children[r],e.children[r],n))return!1;return!0}function RB(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ID(t[n],e[n]))}function RD(t,e,n){return kD(t,e,e.segments,n)}function kD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!vo(i,n)||e.hasChildren()||!yf(i,n,r))}else if(t.segments.length===n.length){if(!vo(t.segments,n)||!yf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!RD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!vo(t.segments,i)||!yf(t.segments,i,r)||!t.children[de]?!1:kD(t.children[de],e,o,r)}}function yf(t,e,n){return e.every((r,i)=>AD[n](t[i].parameters,r.parameters))}var zr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ne([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=js(this.queryParams),this._queryParamMap}toString(){return NB.serialize(this)}},Ne=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vf(this)}},yo=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=js(this.parameters),this._parameterMap}toString(){return ND(this)}};function kB(t,e){return vo(t,e)&&t.every((n,r)=>vr(n.parameters,e[r].parameters))}function vo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function OB(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===de&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==de&&(n=n.concat(e(i,r)))}),n}var Ev=(()=>{let e=class e{};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:()=>new jc,providedIn:"root"}));let t=e;return t})(),jc=class{parse(e){let n=new Jy(e);return new zr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Fc(e.root,!0)}`,r=LB(e.queryParams),i=typeof e.fragment=="string"?`#${PB(e.fragment)}`:"";return`${n}${r}${i}`}},NB=new jc;function vf(t){return t.segments.map(e=>ND(e)).join("/")}function Fc(t,e){if(!t.hasChildren())return vf(t);if(e){let n=t.children[de]?Fc(t.children[de],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==de&&r.push(`${i}:${Fc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=OB(t,(r,i)=>i===de?[Fc(t.children[de],!1)]:[`${i}:${Fc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[de]!=null?`${vf(t)}/${n[0]}`:`${vf(t)}/(${n.join("//")})`}}function OD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gf(t){return OD(t).replace(/%3B/gi,";")}function PB(t){return encodeURI(t)}function Qy(t){return OD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wf(t){return decodeURIComponent(t)}function xD(t){return wf(t.replace(/\+/g,"%20"))}function ND(t){return`${Qy(t.path)}${FB(t.parameters)}`}function FB(t){return Object.entries(t).map(([e,n])=>`;${Qy(e)}=${Qy(n)}`).join("")}function LB(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${gf(n)}=${gf(i)}`).join("&"):`${gf(n)}=${gf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var BB=/^[^\/()?;#]+/;function Wy(t){let e=t.match(BB);return e?e[0]:""}var UB=/^[^\/()?;=#]+/;function jB(t){let e=t.match(UB);return e?e[0]:""}var $B=/^[^=?&#]+/;function VB(t){let e=t.match($B);return e?e[0]:""}var HB=/^[^&#]+/;function GB(t){let e=t.match(HB);return e?e[0]:""}var Jy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[de]=new Ne(e,n)),r}parseSegment(){let e=Wy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new yo(wf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=jB(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Wy(this.remaining);i&&(r=i,this.capture(r))}e[wf(n)]=wf(r)}parseQueryParam(e){let n=VB(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=GB(this.remaining);s&&(r=s,this.capture(r))}let i=xD(n),o=xD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Wy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=de);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[de]:new Ne([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function PD(t){return t.segments.length>0?new Ne([],{[de]:t}):t}function FD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=FD(i);if(r===de&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ne(t.segments,e);return zB(n)}function zB(t){if(t.numberOfChildren===1&&t.children[de]){let e=t.children[de];return new Ne(t.segments.concat(e.segments),e.children)}return t}function $c(t){return t instanceof zr}function WB(t,e,n=null,r=null){let i=LD(t);return BD(i,e,n,r)}function LD(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Ne(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=PD(r);return e??i}function BD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return qy(i,i,i,n,r);let o=qB(e);if(o.toRoot())return qy(i,i,new Ne([],{}),n,r);let s=YB(o,i,t),a=s.processChildren?Bc(s.segmentGroup,s.index,o.commands):jD(s.segmentGroup,s.index,o.commands);return qy(i,s.segmentGroup,a,n,r)}function xf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Vc(t){return typeof t=="object"&&t!=null&&t.outlets}function qy(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=UD(t,e,n);let a=PD(FD(s));return new zr(a,o,i)}function UD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=UD(o,e,n)}),new Ne(t.segments,r)}var _f=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&xf(r[0]))throw new H(4003,!1);let i=r.find(Vc);if(i&&i!==TD(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qB(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new _f(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new _f(n,e,r)}var Ls=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function YB(t,e,n){if(t.isAbsolute)return new Ls(e,!0,0);if(!n)return new Ls(e,!1,NaN);if(n.parent===null)return new Ls(n,!0,0);let r=xf(t.commands[0])?0:1,i=n.segments.length-1+r;return KB(n,i,t.numberOfDoubleDots)}function KB(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Ls(r,!1,i-o)}function ZB(t){return Vc(t[0])?t[0].outlets:{[de]:t}}function jD(t,e,n){if(t??=new Ne([],{}),t.segments.length===0&&t.hasChildren())return Bc(t,e,n);let r=XB(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ne(t.segments.slice(0,r.pathIndex),{});return o.children[de]=new Ne(t.segments.slice(r.pathIndex),t.children),Bc(o,0,i)}else return r.match&&i.length===0?new Ne(t.segments,{}):r.match&&!t.hasChildren()?ev(t,e,n):r.match?Bc(t,0,i):ev(t,e,n)}function Bc(t,e,n){if(n.length===0)return new Ne(t.segments,{});{let r=ZB(n),i={};if(Object.keys(r).some(o=>o!==de)&&t.children[de]&&t.numberOfChildren===1&&t.children[de].segments.length===0){let o=Bc(t.children[de],e,n);return new Ne(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=jD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ne(t.segments,i)}}function XB(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Vc(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ED(c,l,s))return o;r+=2}else{if(!ED(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ev(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Vc(o)){let c=QB(o.outlets);return new Ne(r,c)}if(i===0&&xf(n[0])){let c=t.segments[e];r.push(new yo(c.path,_D(n[0]))),i++;continue}let s=Vc(o)?o.outlets[de]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&xf(a)?(r.push(new yo(s,_D(a))),i+=2):(r.push(new yo(s,{})),i++)}return new Ne(r,{})}function QB(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ev(new Ne([],{}),0,r))}),e}function _D(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ED(t,e,n){return t==n.path&&vr(e,n.parameters)}var bf="imperative",Dt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Dt||{}),jn=class{id;url;constructor(e,n){this.id=e,this.url=n}},Hc=class extends jn{type=Dt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wo=class extends jn{urlAfterRedirects;type=Dt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Sn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Sn||{}),tv=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(tv||{}),Gr=class extends jn{reason;code;type=Dt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},bo=class extends jn{reason;code;type=Dt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Gc=class extends jn{error;target;type=Dt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ef=class extends jn{urlAfterRedirects;state;type=Dt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nv=class extends jn{urlAfterRedirects;state;type=Dt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rv=class extends jn{urlAfterRedirects;state;shouldActivate;type=Dt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},iv=class extends jn{urlAfterRedirects;state;type=Dt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ov=class extends jn{urlAfterRedirects;state;type=Dt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sv=class{route;type=Dt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},av=class{route;type=Dt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},cv=class{snapshot;type=Dt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lv=class{snapshot;type=Dt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uv=class{snapshot;type=Dt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dv=class{snapshot;type=Dt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zc=class{},$s=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function JB(t,e){return t.providers&&!t._injector&&(t._injector=xy(t.providers,e,`Route: ${t.path}`)),t._injector??e}function er(t){return t.outlet||de}function eU(t,e){let n=t.filter(r=>er(r)===e);return n.push(...t.filter(r=>er(r)!==e)),n}function Xc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var fv=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Mf(this.rootInjector)}},Mf=(()=>{let e=class e{rootInjector;contexts=new Map;constructor(r){this.rootInjector=r}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new fv(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};g(e,"\u0275fac",function(i){return new(i||e)(W(on))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),Cf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=hv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=hv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=pv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pv(e,this._root).map(n=>n.value)}};function hv(t,e){if(t===e.value)return e;for(let n of e.children){let r=hv(t,n);if(r)return r}return null}function pv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=pv(t,n);if(r.length)return r.unshift(e),r}return[]}var Dn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Df=class extends Cf{snapshot;constructor(e,n){super(e),this.snapshot=n,Cv(this,e)}toString(){return this.snapshot.toString()}};function $D(t){let e=tU(t),n=new Ye([new yo("",{})]),r=new Ye({}),i=new Ye({}),o=new Ye({}),s=new Ye(""),a=new _i(n,r,o,s,i,de,t,e.root);return a.snapshot=e.root,new Df(new Dn(a,[]),e)}function tU(t){let e={},n={},r={},i="",o=new Bs([],e,r,i,n,de,t,null,{});return new If("",new Dn(o,[]))}var _i=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ne(l=>l[Zc]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>js(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>js(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Sf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),t.params),data:M(M({},e.data),t.data),resolve:M(M(M(M({},t.data),e.data),i?.data),t._resolvedData)}:r={params:M({},t.params),data:M({},t.data),resolve:M(M({},t.data),t._resolvedData??{})},i&&HD(i)&&(r.resolve[Zc]=i.title),r}var Bs=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Zc]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=js(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=js(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},If=class extends Cf{url;constructor(e,n){super(n),this.url=e,Cv(this,n)}toString(){return VD(this._root)}};function Cv(t,e){e.value._routerState=t,e.children.forEach(n=>Cv(t,n))}function VD(t){let e=t.children.length>0?` { ${t.children.map(VD).join(", ")} } `:"";return`${t.value}${e}`}function Yy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,vr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),vr(e.params,n.params)||t.paramsSubject.next(n.params),TB(e.url,n.url)||t.urlSubject.next(n.url),vr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function gv(t,e){let n=vr(t.params,e.params)&&kB(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||gv(t.parent,e.parent))}function HD(t){return typeof t.title=="string"||t.title===null}var nU=new z(""),Dv=(()=>{let e=class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=de;activateEvents=new Ge;deactivateEvents=new Ge;attachEvents=new Ge;detachEvents=new Ge;routerOutletData=K_(void 0);parentContexts=S(Mf);location=S(yi);changeDetector=S(Dc);inputBinder=S(Sv,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new mv(r,c,o.injector,this.routerOutletData);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275dir",vi({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Is]}));let t=e;return t})(),mv=class t{route;childContexts;parent;outletData;__ngOutletInjector(e){return new t(this.route,this.childContexts,e,this.outletData)}constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===_i?this.route:e===Mf?this.childContexts:e===nU?this.outletData:this.parent.get(e,n)}},Sv=new z("");function rU(t,e,n){let r=Wc(t,e._root,n?n._root:void 0);return new Df(r,e)}function Wc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=iU(t,e,n);return new Dn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Wc(t,a)),s}}let r=oU(e.value),i=e.children.map(o=>Wc(t,o));return new Dn(r,i)}}function iU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Wc(t,r,i);return Wc(t,r)})}function oU(t){return new _i(new Ye(t.url),new Ye(t.params),new Ye(t.queryParams),new Ye(t.fragment),new Ye(t.data),t.outlet,t.component,t)}var qc=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},GD="ngNavigationCancelingError";function Tf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=$c(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=zD(!1,Sn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function zD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[GD]=!0,n.cancellationCode=e,n}function sU(t){return WD(t)&&$c(t.url)}function WD(t){return!!t&&t[GD]}var aU=(t,e,n,r)=>ne(i=>(new yv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),yv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Yy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Fs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Fs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Fs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new dv(o.value.snapshot))}),e.children.length&&this.forwardEvent(new lv(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Yy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Yy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Af=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Us=class{component;route;constructor(e,n){this.component=e,this.route=n}};function cU(t,e,n){let r=t._root,i=e?e._root:null;return Lc(r,i,n,[r.value])}function lU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Hs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Bx(t)?t:e.get(t):r}function Lc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fs(e);return t.children.forEach(s=>{uU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Uc(a,n.getContext(s),i)),i}function uU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=dU(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Af(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Lc(t,e,a?a.children:null,r,i):Lc(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Us(a.outlet.component,s))}else s&&Uc(e,a,i),i.canActivateChecks.push(new Af(r)),o.component?Lc(t,null,a?a.children:null,r,i):Lc(t,null,n,r,i);return i}function dU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!vo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vo(t.url,e.url)||!vr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gv(t,e)||!vr(t.queryParams,e.queryParams);case"paramsChange":default:return!gv(t,e)}}function Uc(t,e,n){let r=Fs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Uc(s,e.children.getContext(o),n):Uc(s,null,n):Uc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Us(e.outlet.component,i)):n.canDeactivateChecks.push(new Us(null,i)):n.canDeactivateChecks.push(new Us(null,i))}function Qc(t){return typeof t=="function"}function fU(t){return typeof t=="boolean"}function hU(t){return t&&Qc(t.canLoad)}function pU(t){return t&&Qc(t.canActivate)}function gU(t){return t&&Qc(t.canActivateChild)}function mU(t){return t&&Qc(t.canDeactivate)}function yU(t){return t&&Qc(t.canMatch)}function qD(t){return t instanceof Tr||t?.name==="EmptyError"}var mf=Symbol("INITIAL_VALUE");function Vs(){return yn(t=>is(t.map(e=>e.pipe(mn(1),Za(mf)))).pipe(ne(e=>{for(let n of e)if(n!==!0){if(n===mf)return mf;if(n===!1||vU(n))return n}return!0}),jt(e=>e!==mf),mn(1)))}function vU(t){return $c(t)||t instanceof qc}function wU(t,e){return gt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Y(Ce(M({},n),{guardsResult:!0})):bU(s,r,i,t).pipe(gt(a=>a&&fU(a)?xU(r,o,t,e):Y(a)),ne(a=>Ce(M({},n),{guardsResult:a})))})}function bU(t,e,n,r){return ot(t).pipe(gt(i=>SU(i.component,i.route,n,e,r)),Mr(i=>i!==!0,!0))}function xU(t,e,n,r){return ot(e).pipe(ui(i=>li(EU(i.route.parent,r),_U(i.route,r),DU(t,i.path,n),CU(t,i.route,n))),Mr(i=>i!==!0,!0))}function _U(t,e){return t!==null&&e&&e(new uv(t)),Y(!0)}function EU(t,e){return t!==null&&e&&e(new cv(t)),Y(!0)}function CU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>ju(()=>{let s=Xc(e)??n,a=Hs(o,s),c=pU(a)?a.canActivate(e,t):bn(s,()=>a(e,t));return Ei(c).pipe(Mr())}));return Y(i).pipe(Vs())}function DU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>lU(s)).filter(s=>s!==null).map(s=>ju(()=>{let a=s.guards.map(c=>{let l=Xc(s.node)??n,u=Hs(c,l),d=gU(u)?u.canActivateChild(r,t):bn(l,()=>u(r,t));return Ei(d).pipe(Mr())});return Y(a).pipe(Vs())}));return Y(o).pipe(Vs())}function SU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let c=Xc(e)??i,l=Hs(a,c),u=mU(l)?l.canDeactivate(t,e,n,r):bn(c,()=>l(t,e,n,r));return Ei(u).pipe(Mr())});return Y(s).pipe(Vs())}function IU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=Hs(s,t),c=hU(a)?a.canLoad(e,n):bn(t,()=>a(e,n));return Ei(c)});return Y(o).pipe(Vs(),YD(r))}function YD(t){return Jp(tt(e=>{if(typeof e!="boolean")throw Tf(t,e)}),ne(e=>e===!0))}function TU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=Hs(s,t),c=yU(a)?a.canMatch(e,n):bn(t,()=>a(e,n));return Ei(c)});return Y(o).pipe(Vs(),YD(r))}var Yc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Kc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ps(t){return ci(new Yc(t))}function AU(t){return ci(new H(4e3,!1))}function MU(t){return ci(zD(!1,Sn.GuardRejected))}var vv=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[de])return AU(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:m}=i,v=bn(o,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:m}));if(v instanceof zr)throw new Kc(v);n=v}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Kc(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new zr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ne(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},wv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RU(t,e,n,r,i){let o=KD(t,e,n);return o.matched?(r=JB(e,r),TU(r,e,n,i).pipe(ne(s=>s===!0?o:M({},wv)))):Y(o)}function KD(t,e,n){if(e.path==="**")return kU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?M({},wv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||IB)(n,t,e);if(!i)return M({},wv);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?M(M({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function kU(t){return{matched:!0,parameters:t.length>0?TD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function CD(t,e,n,r){return n.length>0&&PU(t,n,r)?{segmentGroup:new Ne(e,NU(r,new Ne(n,t.children))),slicedSegments:[]}:n.length===0&&FU(t,n,r)?{segmentGroup:new Ne(t.segments,OU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ne(t.segments,t.children),slicedSegments:n}}function OU(t,e,n,r){let i={};for(let o of n)if(Rf(t,e,o)&&!r[er(o)]){let s=new Ne([],{});i[er(o)]=s}return M(M({},r),i)}function NU(t,e){let n={};n[de]=e;for(let r of t)if(r.path===""&&er(r)!==de){let i=new Ne([],{});n[er(r)]=i}return n}function PU(t,e,n){return n.some(r=>Rf(t,e,r)&&er(r)!==de)}function FU(t,e,n){return n.some(r=>Rf(t,e,r))}function Rf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function LU(t,e,n){return e.length===0&&!t.children[n]}var bv=class{};function BU(t,e,n,r,i,o,s="emptyOnly"){return new xv(t,e,n,r,i,s,o).recognize()}var UU=31,xv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new vv(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=CD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:n,rootSnapshot:r})=>{let i=new Dn(r,n),o=new If("",i),s=WB(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Bs([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,n).pipe(ne(r=>({children:r,rootSnapshot:n})),cr(r=>{if(r instanceof Kc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Yc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ne(s=>s instanceof Dn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ot(o).pipe(ui(s=>{let a=r.children[s],c=eU(n,s);return this.processSegmentGroup(e,c,a,s,i)}),lg((s,a)=>(s.push(...a),s)),di(null),cg(),gt(s=>{if(s===null)return Ps(r);let a=ZD(s);return jU(a),Y(a)}))}processSegment(e,n,r,i,o,s,a){return ot(n).pipe(ui(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,o,s,a).pipe(cr(l=>{if(l instanceof Yc)return Y(null);throw l}))),Mr(c=>!!c),cr(c=>{if(qD(c))return LU(r,i,o)?Y(new bv):Ps(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,c){return er(r)!==s&&(s===de||!Rf(i,o,r))?Ps(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,c):Ps(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=KD(n,i,o);if(!c)return Ps(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>UU&&(this.allowRedirects=!1));let h=new Bs(o,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,DD(i),er(i),i.component??i._loadedComponent??null,i,SD(i)),p=Sf(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,m).pipe(gt(v=>this.processSegment(e,r,n,v.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=RU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(yn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(yn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Bs(f,d,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,DD(r),er(r),r.component??r._loadedComponent??null,r,SD(r)),m=Sf(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:v,slicedSegments:b}=CD(n,f,h,l);if(b.length===0&&v.hasChildren())return this.processChildren(u,l,v,p).pipe(ne(C=>new Dn(p,C)));if(l.length===0&&b.length===0)return Y(new Dn(p,[]));let _=er(r)===o;return this.processSegment(u,l,v,b,_?de:o,!0,p).pipe(ne(C=>new Dn(p,C instanceof Dn?[C]:[])))}))):Ps(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):IU(e,n,r,this.urlSerializer).pipe(gt(i=>i?this.configLoader.loadChildren(e,n).pipe(tt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):MU(n))):Y({routes:[],injector:e})}};function jU(t){t.sort((e,n)=>e.value.outlet===de?-1:n.value.outlet===de?1:e.value.outlet.localeCompare(n.value.outlet))}function $U(t){let e=t.value.routeConfig;return e&&e.path===""}function ZD(t){let e=[],n=new Set;for(let r of t){if(!$U(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ZD(r.children);e.push(new Dn(r.value,i))}return e.filter(r=>!n.has(r))}function DD(t){return t.data||{}}function SD(t){return t.resolve||{}}function VU(t,e,n,r,i,o){return gt(s=>BU(t,e,n,r,s.extractedUrl,i,o).pipe(ne(({state:a,tree:c})=>Ce(M({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function HU(t,e){return gt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of XD(c))s.add(l);let a=0;return ot(s).pipe(ui(c=>o.has(c)?GU(c,r,t,e):(c.data=Sf(c,c.parent,t).resolve,Y(void 0))),tt(()=>a++),os(1),gt(c=>a===s.size?Y(n):en))})}function XD(t){let e=t.children.map(n=>XD(n)).flat();return[t,...e]}function GU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!HD(i)&&(o[Zc]=i.title),zU(o,t,e,r).pipe(ne(s=>(t._resolvedData=s,t.data=Sf(t,t.parent,n).resolve,null)))}function zU(t,e,n,r){let i=Xy(t);if(i.length===0)return Y({});let o={};return ot(i).pipe(gt(s=>WU(t[s],e,n,r).pipe(Mr(),tt(a=>{if(a instanceof qc)throw Tf(new jc,a);o[s]=a}))),os(1),ne(()=>o),cr(s=>qD(s)?en:ci(s)))}function WU(t,e,n,r){let i=Xc(e)??r,o=Hs(t,i),s=o.resolve?o.resolve(e,n):bn(i,()=>o(e,n));return Ei(s)}function Ky(t){return yn(e=>{let n=t(e);return n?ot(n).pipe(ne(()=>e)):Y(e)})}var QD=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===de);return i}getResolvedTitleForRoute(r){return r.data[Zc]}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:()=>S(qU),providedIn:"root"}));let t=e;return t})(),qU=(()=>{let e=class e extends QD{title;constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};g(e,"\u0275fac",function(i){return new(i||e)(W(vD))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),Iv=new z("",{providedIn:"root",factory:()=>({})}),YU=(()=>{let e=class e{};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275cmp",be({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,o){i&1&&re(0,"router-outlet")},dependencies:[Dv],encapsulation:2}));let t=e;return t})();function Tv(t){let e=t.children&&t.children.map(Tv),n=e?Ce(M({},t),{children:e}):M({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==de&&(n.component=YU),n}var Av=new z(""),KU=(()=>{let e=class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=S(Sy);loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ei(r.loadComponent()).pipe(ne(JD),tt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ar(()=>{this.componentLoaders.delete(r)})),o=new ns(i,()=>new Te).pipe(ts());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Y({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=ZU(i,this.compiler,r,this.onLoadEndListener).pipe(Ar(()=>{this.childrenLoaders.delete(i)})),a=new ns(s,()=>new Te).pipe(ts());return this.childrenLoaders.set(i,a),a}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function ZU(t,e,n,r){return Ei(t.loadChildren()).pipe(ne(JD),gt(i=>i instanceof by||Array.isArray(i)?Y(i):ot(e.compileModuleAsync(i))),ne(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Av,[],{optional:!0,self:!0}).flat()),{routes:s.map(Tv),injector:o}}))}function XU(t){return t&&typeof t=="object"&&"default"in t}function JD(t){return XU(t)?t.default:t}var Mv=(()=>{let e=class e{};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:()=>S(QU),providedIn:"root"}));let t=e;return t})(),QU=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),JU=new z("");var ej=new z(""),tj=(()=>{let e=class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Te;transitionAbortSubject=new Te;configLoader=S(KU);environmentInjector=S(on);destroyRef=S(Rd);urlSerializer=S(Ev);rootContexts=S(Mf);location=S(Tc);inputBindingEnabled=S(Sv,{optional:!0})!==null;titleStrategy=S(QD);options=S(Iv,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=S(Mv);createViewTransition=S(JU,{optional:!0});navigationErrorHandler=S(ej,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let r=o=>this.events.next(new sv(o)),i=o=>this.events.next(new av(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ce(M({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(r){return this.transitions=new Ye(null),this.transitions.pipe(jt(i=>i!==null),yn(i=>{let o=!1,s=!1;return Y(i).pipe(yn(a=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Sn.SupersededByNewNavigation),en;this.currentTransition=i,this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Ce(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=a.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!c&&l!=="reload"){let u="";return this.events.next(new bo(a.id,this.urlSerializer.serialize(a.rawUrl),u,tv.IgnoredSameUrlNavigation)),a.resolve(!1),en}if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Y(a).pipe(yn(u=>(this.events.next(new Hc(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?en:Promise.resolve(u))),VU(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(u=>{i.targetSnapshot=u.targetSnapshot,i.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Ce(M({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let d=new Ef(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:u,extractedUrl:d,source:f,restoredState:h,extras:p}=a,m=new Hc(u,this.urlSerializer.serialize(d),f,h);this.events.next(m);let v=$D(this.rootComponentType).snapshot;return this.currentTransition=i=Ce(M({},a),{targetSnapshot:v,urlAfterRedirects:d,extras:Ce(M({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,Y(i)}else{let u="";return this.events.next(new bo(a.id,this.urlSerializer.serialize(a.extractedUrl),u,tv.IgnoredByUrlHandlingStrategy)),a.resolve(!1),en}}),tt(a=>{let c=new nv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),ne(a=>(this.currentTransition=i=Ce(M({},a),{guards:cU(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),i)),wU(this.environmentInjector,a=>this.events.next(a)),tt(a=>{if(i.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Tf(this.urlSerializer,a.guardsResult);let c=new rv(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),jt(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Sn.GuardRejected),!1)),Ky(a=>{if(a.guards.canActivateChecks.length!==0)return Y(a).pipe(tt(c=>{let l=new iv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),yn(c=>{let l=!1;return Y(c).pipe(HU(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(c,"",Sn.NoDataFromResolver)}}))}),tt(c=>{let l=new ov(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}))}),Ky(a=>{let c=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(tt(d=>{l.component=d}),ne(()=>{})));for(let d of l.children)u.push(...c(d));return u};return is(c(a.targetSnapshot.root)).pipe(di(null),mn(1))}),Ky(()=>this.afterPreactivation()),yn(()=>{let{currentSnapshot:a,targetSnapshot:c}=i,l=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return l?ot(l).pipe(ne(()=>i)):Y(i)}),ne(a=>{let c=rU(r.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=i=Ce(M({},a),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,i}),tt(()=>{this.events.next(new zc)}),aU(this.rootContexts,r.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),mn(1),tt({next:a=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new wo(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{o=!0}}),Xa(this.transitionAbortSubject.pipe(tt(a=>{throw a}))),Ar(()=>{!o&&!s&&this.cancelNavigationTransition(i,"",Sn.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),cr(a=>{if(this.destroyed)return i.resolve(!1),en;if(s=!0,WD(a))this.events.next(new Gr(i.id,this.urlSerializer.serialize(i.extractedUrl),a.message,a.cancellationCode)),sU(a)?this.events.next(new $s(a.url,a.navigationBehaviorOptions)):i.resolve(!1);else{let c=new Gc(i.id,this.urlSerializer.serialize(i.extractedUrl),a,i.targetSnapshot??void 0);try{let l=bn(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof qc){let{message:u,cancellationCode:d}=Tf(this.urlSerializer,l);this.events.next(new Gr(i.id,this.urlSerializer.serialize(i.extractedUrl),u,d)),this.events.next(new $s(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return en}))}))}cancelNavigationTransition(r,i,o){let s=new Gr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function nj(t){return t!==bf}var rj=(()=>{let e=class e{};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:()=>S(ij),providedIn:"root"}));let t=e;return t})(),_v=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},ij=(()=>{let e=class e extends _v{};g(e,"\u0275fac",(()=>{let r;return function(o){return(r||(r=Jm(e)))(o||e)}})()),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),eS=(()=>{let e=class e{};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:()=>S(oj),providedIn:"root"}));let t=e;return t})(),oj=(()=>{let e=class e extends eS{location=S(Tc);urlSerializer=S(Ev);options=S(Iv,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=S(Mv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new zr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=$D(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Hc)this.stateMemento=this.createStateMemento();else if(r instanceof bo)this.rawUrlTree=i.initialUrl;else if(r instanceof Ef){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof zc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Gr&&(r.code===Sn.GuardRejected||r.code===Sn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Gc?this.restoreHistory(i,!0):r instanceof wo&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof zr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};g(e,"\u0275fac",(()=>{let r;return function(o){return(r||(r=Jm(e)))(o||e)}})()),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function sj(t,e){t.events.pipe(jt(n=>n instanceof wo||n instanceof Gr||n instanceof Gc||n instanceof bo),ne(n=>n instanceof wo||n instanceof bo?0:(n instanceof Gr?n.code===Sn.Redirect||n.code===Sn.SupersededByNewNavigation:!1)?2:1),jt(n=>n!==2),mn(1)).subscribe(()=>{e()})}var aj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},tS=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=S(Ey);stateManager=S(eS);options=S(Iv,{optional:!0})||{};pendingTasks=S(gi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=S(tj);urlSerializer=S(Ev);location=S(Tc);urlHandlingStrategy=S(Mv);_events=new Te;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=S(rj);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=S(Av,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!S(Sv,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}eventsSubscription=new fe;subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Gr&&i.code!==Sn.Redirect&&i.code!==Sn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof wo)this.navigated=!0;else if(i instanceof $s){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=M({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||nj(o.source)},a);this.scheduleNavigation(c,bf,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}uj(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=M({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Tv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":d=M(M({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=LD(h)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),f=this.currentUrlTree.root}return BD(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=$c(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,bf,null,i)}navigate(r,i={skipLocationChange:!1}){return lj(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=M({},aj):i===!1?o=M({},cj):o=i,$c(r))return bD(this.currentUrlTree,r,o);let s=this.parseUrl(r);return bD(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,h)=>{c=f,l=h});let d=this.pendingTasks.add();return sj(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function lj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}function uj(t){return!(t instanceof zc)&&!(t instanceof $s)}var dj=new z("");function nS(t,...e){return Cs([{provide:Av,multi:!0,useValue:t},[],{provide:_i,useFactory:fj,deps:[tS]},{provide:Hd,multi:!0,useFactory:hj},e.map(n=>n.\u0275providers)])}function fj(t){return t.routerState.root}function hj(){let t=S(Pn);return e=>{let n=t.get(Nr);if(e!==n.components[0])return;let r=t.get(tS),i=t.get(pj);t.get(gj)===1&&r.initialNavigation(),t.get(mj,null,pe.Optional)?.setUpPreloading(),t.get(dj,null,pe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var pj=new z("",{factory:()=>new Te}),gj=new z("",{providedIn:"root",factory:()=>1});var mj=new z("");var Gs=class Gs{};g(Gs,"\u0275fac",function(n){return new(n||Gs)}),g(Gs,"\u0275cmp",be({type:Gs,selectors:[["app-settings"]],decls:2,vars:0,template:function(n,r){n&1&&(R(0,"p"),U(1,"settings works!"),T())},encapsulation:2}));var kf=Gs;var St=[];for(let t=0;t<256;++t)St.push((t+256).toString(16).slice(1));function rS(t,e=0){return(St[t[e+0]]+St[t[e+1]]+St[t[e+2]]+St[t[e+3]]+"-"+St[t[e+4]]+St[t[e+5]]+"-"+St[t[e+6]]+St[t[e+7]]+"-"+St[t[e+8]]+St[t[e+9]]+"-"+St[t[e+10]]+St[t[e+11]]+St[t[e+12]]+St[t[e+13]]+St[t[e+14]]+St[t[e+15]]).toLowerCase()}var Rv,vj=new Uint8Array(16);function kv(){if(!Rv){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Rv=crypto.getRandomValues.bind(crypto)}return Rv(vj)}var wj=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ov={randomUUID:wj};function bj(t,e,n){if(Ov.randomUUID&&!e&&!t)return Ov.randomUUID();t=t||{};let r=t.random??t.rng?.()??kv();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[n+i]=r[i];return e}return rS(r)}var Ft=bj;function xo(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nv(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Of(t){let e,n,r;t.length!==2?(e=xo,n=(a,c)=>xo(t(a),c),r=(a,c)=>t(a)-c):(e=t===xo||t===Nv?t:xj,n=t,r=t);function i(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{let d=l+u>>>1;n(a[d],c)<0?l=d+1:u=d}while(l<u)}return l}function o(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{let d=l+u>>>1;n(a[d],c)<=0?l=d+1:u=d}while(l<u)}return l}function s(a,c,l=0,u=a.length){let d=i(a,c,l,u-1);return d>l&&r(a[d-1],c)>-r(a[d],c)?d-1:d}return{left:i,center:s,right:o}}function xj(){return 0}function Pv(t){return t===null?NaN:+t}var iS=Of(xo),oS=iS.right,_j=iS.left,Ej=Of(Pv).center,Fv=oS;var zs=class extends Map{constructor(e,n=Sj){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(let[r,i]of e)this.set(r,i)}get(e){return super.get(sS(this,e))}has(e){return super.has(sS(this,e))}set(e,n){return super.set(Cj(this,e),n)}delete(e){return super.delete(Dj(this,e))}};function sS({_intern:t,_key:e},n){let r=e(n);return t.has(r)?t.get(r):n}function Cj({_intern:t,_key:e},n){let r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Dj({_intern:t,_key:e},n){let r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Sj(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Ij=Math.sqrt(50),Tj=Math.sqrt(10),Aj=Math.sqrt(2);function Nf(t,e,n){let r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Ij?10:o>=Tj?5:o>=Aj?2:1,a,c,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(t*l),c=Math.round(e*l),a/l<t&&++a,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*s,a=Math.round(t/l),c=Math.round(e/l),a*l<t&&++a,c*l>e&&--c),c<a&&.5<=n&&n<2?Nf(t,e,n*2):[a,c,l]}function Pf(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];let r=e<t,[i,o,s]=r?Nf(e,t,n):Nf(t,e,n);if(!(o>=i))return[];let a=o-i+1,c=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)c[l]=(o-l)/-s;else for(let l=0;l<a;++l)c[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)c[l]=(i+l)/-s;else for(let l=0;l<a;++l)c[l]=(i+l)*s;return c}function Jc(t,e,n){return e=+e,t=+t,n=+n,Nf(t,e,n)[2]}function Lv(t,e,n){e=+e,t=+t,n=+n;let r=e<t,i=r?Jc(e,t,n):Jc(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Ff(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}var Mj={value:()=>{}};function cS(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Lf(n)}function Lf(t){this._=t}function Rj(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Lf.prototype=cS.prototype={constructor:Lf,on:function(t,e){var n=this._,r=Rj(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=kj(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=aS(n[i],t.name,e);else if(e==null)for(i in n)n[i]=aS(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Lf(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function kj(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function aS(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Mj,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Bv=cS;var Bf="http://www.w3.org/1999/xhtml",Uv={svg:"http://www.w3.org/2000/svg",xhtml:Bf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Uv.hasOwnProperty(e)?{space:Uv[e],local:t}:t}function Oj(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Bf&&e.documentElement.namespaceURI===Bf?e.createElement(t):e.createElementNS(n,t)}}function Nj(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Uf(t){var e=Wr(t);return(e.local?Nj:Oj)(e)}function Pj(){}function _o(t){return t==null?Pj:function(){return this.querySelector(t)}}function lS(t){typeof t!="function"&&(t=_o(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new ze(r,this._parents)}function el(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Fj(){return[]}function tl(t){return t==null?Fj:function(){return this.querySelectorAll(t)}}function Lj(t){return function(){return el(t.apply(this,arguments))}}function uS(t){typeof t=="function"?t=Lj(t):t=tl(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(t.call(c,c.__data__,l,s)),i.push(c));return new ze(r,i)}function nl(t){return function(){return this.matches(t)}}function jf(t){return function(e){return e.matches(t)}}var Bj=Array.prototype.find;function Uj(t){return function(){return Bj.call(this.children,t)}}function jj(){return this.firstElementChild}function dS(t){return this.select(t==null?jj:Uj(typeof t=="function"?t:jf(t)))}var $j=Array.prototype.filter;function Vj(){return Array.from(this.children)}function Hj(t){return function(){return $j.call(this.children,t)}}function fS(t){return this.selectAll(t==null?Vj:Hj(typeof t=="function"?t:jf(t)))}function hS(t){typeof t!="function"&&(t=nl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new ze(r,this._parents)}function $f(t){return new Array(t.length)}function pS(){return new ze(this._enter||this._groups.map($f),this._parents)}function rl(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}rl.prototype={constructor:rl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function gS(t){return function(){return t}}function Gj(t,e,n,r,i,o){for(var s=0,a,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new rl(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function zj(t,e,n,r,i,o,s){var a,c,l=new Map,u=e.length,d=o.length,f=new Array(u),h;for(a=0;a<u;++a)(c=e[a])&&(f[a]=h=s.call(c,c.__data__,a,e)+"",l.has(h)?i[a]=c:l.set(h,c));for(a=0;a<d;++a)h=s.call(t,o[a],a,o)+"",(c=l.get(h))?(r[a]=c,c.__data__=o[a],l.delete(h)):n[a]=new rl(t,o[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(f[a])===c&&(i[a]=c)}function Wj(t){return t.__data__}function mS(t,e){if(!arguments.length)return Array.from(this,Wj);var n=e?zj:Gj,r=this._parents,i=this._groups;typeof t!="function"&&(t=gS(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],d=i[l],f=d.length,h=qj(t.call(u,u&&u.__data__,l,r)),p=h.length,m=a[l]=new Array(p),v=s[l]=new Array(p),b=c[l]=new Array(f);n(u,d,m,v,b,h,e);for(var _=0,C=0,D,k;_<p;++_)if(D=m[_]){for(_>=C&&(C=_+1);!(k=v[C])&&++C<p;);D._next=k||null}}return s=new ze(s,r),s._enter=a,s._exit=c,s}function qj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yS(){return new ze(this._exit||this._groups.map($f),this._parents)}function vS(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function wS(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=n[c],u=r[c],d=l.length,f=a[c]=new Array(d),h,p=0;p<d;++p)(h=l[p]||u[p])&&(f[p]=h);for(;c<i;++c)a[c]=n[c];return new ze(a,this._parents)}function bS(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function xS(t){t||(t=Yj);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(e)}return new ze(i,this._parents).order()}function Yj(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _S(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ES(){return Array.from(this)}function CS(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function DS(){let t=0;for(let e of this)++t;return t}function SS(){return!this.node()}function IS(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function Kj(t){return function(){this.removeAttribute(t)}}function Zj(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xj(t,e){return function(){this.setAttribute(t,e)}}function Qj(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Jj(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function e$(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function TS(t,e){var n=Wr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Zj:Kj:typeof e=="function"?n.local?e$:Jj:n.local?Qj:Xj)(n,e))}function Vf(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function t$(t){return function(){this.style.removeProperty(t)}}function n$(t,e,n){return function(){this.style.setProperty(t,e,n)}}function r$(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function AS(t,e,n){return arguments.length>1?this.each((e==null?t$:typeof e=="function"?r$:n$)(t,e,n??"")):Ci(this.node(),t)}function Ci(t,e){return t.style.getPropertyValue(e)||Vf(t).getComputedStyle(t,null).getPropertyValue(e)}function i$(t){return function(){delete this[t]}}function o$(t,e){return function(){this[t]=e}}function s$(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function MS(t,e){return arguments.length>1?this.each((e==null?i$:typeof e=="function"?s$:o$)(t,e)):this.node()[t]}function RS(t){return t.trim().split(/^|\s+/)}function jv(t){return t.classList||new kS(t)}function kS(t){this._node=t,this._names=RS(t.getAttribute("class")||"")}kS.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function OS(t,e){for(var n=jv(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function NS(t,e){for(var n=jv(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function a$(t){return function(){OS(this,t)}}function c$(t){return function(){NS(this,t)}}function l$(t,e){return function(){(e.apply(this,arguments)?OS:NS)(this,t)}}function PS(t,e){var n=RS(t+"");if(arguments.length<2){for(var r=jv(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?l$:e?a$:c$)(n,e))}function u$(){this.textContent=""}function d$(t){return function(){this.textContent=t}}function f$(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function FS(t){return arguments.length?this.each(t==null?u$:(typeof t=="function"?f$:d$)(t)):this.node().textContent}function h$(){this.innerHTML=""}function p$(t){return function(){this.innerHTML=t}}function g$(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function LS(t){return arguments.length?this.each(t==null?h$:(typeof t=="function"?g$:p$)(t)):this.node().innerHTML}function m$(){this.nextSibling&&this.parentNode.appendChild(this)}function BS(){return this.each(m$)}function y$(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function US(){return this.each(y$)}function jS(t){var e=typeof t=="function"?t:Uf(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function v$(){return null}function $S(t,e){var n=typeof t=="function"?t:Uf(t),r=e==null?v$:typeof e=="function"?e:_o(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function w$(){var t=this.parentNode;t&&t.removeChild(this)}function VS(){return this.each(w$)}function b$(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function x$(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function HS(t){return this.select(t?x$:b$)}function GS(t){return arguments.length?this.property("__data__",t):this.node().__data__}function _$(t){return function(e){t.call(this,e,this.__data__)}}function E$(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function C$(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function D$(t,e,n){return function(){var r=this.__on,i,o=_$(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function zS(t,e,n){var r=E$(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?D$:C$,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function WS(t,e,n){var r=Vf(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function S$(t,e){return function(){return WS(this,t,e)}}function I$(t,e){return function(){return WS(this,t,e.apply(this,arguments))}}function qS(t,e){return this.each((typeof e=="function"?I$:S$)(t,e))}function*YS(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var il=[null];function ze(t,e){this._groups=t,this._parents=e}function KS(){return new ze([[document.documentElement]],il)}function T$(){return this}ze.prototype=KS.prototype={constructor:ze,select:lS,selectAll:uS,selectChild:dS,selectChildren:fS,filter:hS,data:mS,enter:pS,exit:yS,join:vS,merge:wS,selection:T$,order:bS,sort:xS,call:_S,nodes:ES,node:CS,size:DS,empty:SS,each:IS,attr:TS,style:AS,property:MS,classed:PS,text:FS,html:LS,raise:BS,lower:US,append:jS,insert:$S,remove:VS,clone:HS,datum:GS,on:zS,dispatch:qS,[Symbol.iterator]:YS};var qr=KS;function Di(t){return typeof t=="string"?new ze([[document.querySelector(t)]],[document.documentElement]):new ze([[t]],il)}function Hf(t){return typeof t=="string"?new ze([document.querySelectorAll(t)],[document.documentElement]):new ze([el(t)],il)}function Gf(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $v(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function al(){}var ol=.7,qf=1/ol,Ws="\\s*([+-]?\\d+)\\s*",sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A$=/^#([0-9a-f]{3,8})$/,M$=new RegExp(`^rgb\\(${Ws},${Ws},${Ws}\\)$`),R$=new RegExp(`^rgb\\(${wr},${wr},${wr}\\)$`),k$=new RegExp(`^rgba\\(${Ws},${Ws},${Ws},${sl}\\)$`),O$=new RegExp(`^rgba\\(${wr},${wr},${wr},${sl}\\)$`),N$=new RegExp(`^hsl\\(${sl},${wr},${wr}\\)$`),P$=new RegExp(`^hsla\\(${sl},${wr},${wr},${sl}\\)$`),ZS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gf(al,nr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:XS,formatHex:XS,formatHex8:F$,formatHsl:L$,formatRgb:QS,toString:QS});function XS(){return this.rgb().formatHex()}function F$(){return this.rgb().formatHex8()}function L$(){return iI(this).formatHsl()}function QS(){return this.rgb().formatRgb()}function nr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=A$.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?JS(e):n===3?new un(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=M$.exec(t))?new un(e[1],e[2],e[3],1):(e=R$.exec(t))?new un(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=k$.exec(t))?zf(e[1],e[2],e[3],e[4]):(e=O$.exec(t))?zf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=N$.exec(t))?nI(e[1],e[2]/100,e[3]/100,1):(e=P$.exec(t))?nI(e[1],e[2]/100,e[3]/100,e[4]):ZS.hasOwnProperty(t)?JS(ZS[t]):t==="transparent"?new un(NaN,NaN,NaN,0):null}function JS(t){return new un(t>>16&255,t>>8&255,t&255,1)}function zf(t,e,n,r){return r<=0&&(t=e=n=NaN),new un(t,e,n,r)}function B$(t){return t instanceof al||(t=nr(t)),t?(t=t.rgb(),new un(t.r,t.g,t.b,t.opacity)):new un}function qs(t,e,n,r){return arguments.length===1?B$(t):new un(t,e,n,r??1)}function un(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Gf(un,qs,$v(al,{brighter(t){return t=t==null?qf:Math.pow(qf,t),new un(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ol:Math.pow(ol,t),new un(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new un(Co(this.r),Co(this.g),Co(this.b),Yf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eI,formatHex:eI,formatHex8:U$,formatRgb:tI,toString:tI}));function eI(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}`}function U$(){return`#${Eo(this.r)}${Eo(this.g)}${Eo(this.b)}${Eo((isNaN(this.opacity)?1:this.opacity)*255)}`}function tI(){let t=Yf(this.opacity);return`${t===1?"rgb(":"rgba("}${Co(this.r)}, ${Co(this.g)}, ${Co(this.b)}${t===1?")":`, ${t})`}`}function Yf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Co(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Eo(t){return t=Co(t),(t<16?"0":"")+t.toString(16)}function nI(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new tr(t,e,n,r)}function iI(t){if(t instanceof tr)return new tr(t.h,t.s,t.l,t.opacity);if(t instanceof al||(t=nr(t)),!t)return new tr;if(t instanceof tr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new tr(s,a,c,t.opacity)}function oI(t,e,n,r){return arguments.length===1?iI(t):new tr(t,e,n,r??1)}function tr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Gf(tr,oI,$v(al,{brighter(t){return t=t==null?qf:Math.pow(qf,t),new tr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ol:Math.pow(ol,t),new tr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new un(Vv(t>=240?t-240:t+120,i,r),Vv(t,i,r),Vv(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new tr(rI(this.h),Wf(this.s),Wf(this.l),Yf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=Yf(this.opacity);return`${t===1?"hsl(":"hsla("}${rI(this.h)}, ${Wf(this.s)*100}%, ${Wf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function rI(t){return t=(t||0)%360,t<0?t+360:t}function Wf(t){return Math.max(0,Math.min(1,t||0))}function Vv(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Hv(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}function sI(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return Hv((n-r/e)*e,s,i,o,a)}}function aI(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],a=t[(r+2)%e];return Hv((n-r/e)*e,i,o,s,a)}}var cl=t=>()=>t;function j$(t,e){return function(n){return t+n*e}}function $$(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function cI(t){return(t=+t)==1?Kf:function(e,n){return n-e?$$(e,n,t):cl(isNaN(e)?n:e)}}function Kf(t,e){var n=e-t;return n?j$(t,n):cl(isNaN(t)?e:t)}var Do=function t(e){var n=cI(e);function r(i,o){var s=n((i=qs(i)).r,(o=qs(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),l=Kf(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function lI(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=qs(e[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=t(r),i=t(i),o=t(o),a.opacity=1,function(c){return a.r=r(c),a.g=i(c),a.b=o(c),a+""}}}var V$=lI(sI),H$=lI(aI);function uI(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function dI(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fI(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=So(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function hI(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function It(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pI(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=So(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var zv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gv=new RegExp(zv.source,"g");function G$(t){return function(){return t}}function z$(t){return function(e){return t(e)+""}}function ll(t,e){var n=zv.lastIndex=Gv.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=zv.exec(t))&&(i=Gv.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:It(r,i)})),n=Gv.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?z$(c[0].x):G$(e):(e=c.length,function(l){for(var u=0,d;u<e;++u)a[(d=c[u]).i]=d.x(l);return a.join("")})}function So(t,e){var n=typeof e,r;return e==null||n==="boolean"?cl(e):(n==="number"?It:n==="string"?(r=nr(e))?(e=r,Do):ll:e instanceof nr?Do:e instanceof Date?hI:dI(e)?uI:Array.isArray(e)?fI:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pI:It)(t,e)}function Wv(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var gI=180/Math.PI,Zf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qv(t,e,n,r,i,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*gI,skewX:Math.atan(c)*gI,scaleX:s,scaleY:a}}var Xf;function mI(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Zf:qv(e.a,e.b,e.c,e.d,e.e,e.f)}function yI(t){return t==null?Zf:(Xf||(Xf=document.createElementNS("http://www.w3.org/2000/svg","g")),Xf.setAttribute("transform",t),(t=Xf.transform.baseVal.consolidate())?(t=t.matrix,qv(t.a,t.b,t.c,t.d,t.e,t.f)):Zf)}function vI(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,d,f,h,p){if(l!==d||u!==f){var m=h.push("translate(",null,e,null,n);p.push({i:m-4,x:It(l,d)},{i:m-2,x:It(u,f)})}else(d||f)&&h.push("translate("+d+e+f+n)}function s(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:It(l,u)})):u&&d.push(i(d)+"rotate("+u+r)}function a(l,u,d,f){l!==u?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:It(l,u)}):u&&d.push(i(d)+"skewX("+u+r)}function c(l,u,d,f,h,p){if(l!==d||u!==f){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:It(l,d)},{i:m-2,x:It(u,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,d,f),s(l.rotate,u.rotate,d,f),a(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(h){for(var p=-1,m=f.length,v;++p<m;)d[(v=f[p]).i]=v.x(h);return d.join("")}}}var Yv=vI(mI,"px, ","px)","deg)"),Kv=vI(yI,", ",")",")");var Ys=0,dl=0,ul=0,bI=1e3,Qf,fl,Jf=0,Io=0,eh=0,hl=typeof performance=="object"&&performance.now?performance:Date,xI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function gl(){return Io||(xI(W$),Io=hl.now()+eh)}function W$(){Io=0}function pl(){this._call=this._time=this._next=null}pl.prototype=th.prototype={constructor:pl,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?gl():+n)+(e==null?0:+e),!this._next&&fl!==this&&(fl?fl._next=this:Qf=this,fl=this),this._call=t,this._time=n,Zv()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zv())}};function th(t,e,n){var r=new pl;return r.restart(t,e,n),r}function _I(){gl(),++Ys;for(var t=Qf,e;t;)(e=Io-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ys}function wI(){Io=(Jf=hl.now())+eh,Ys=dl=0;try{_I()}finally{Ys=0,Y$(),Io=0}}function q$(){var t=hl.now(),e=t-Jf;e>bI&&(eh-=e,Jf=t)}function Y$(){for(var t,e=Qf,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Qf=n);fl=t,Zv(r)}function Zv(t){if(!Ys){dl&&(dl=clearTimeout(dl));var e=t-Io;e>24?(t<1/0&&(dl=setTimeout(wI,t-hl.now()-eh)),ul&&(ul=clearInterval(ul))):(ul||(Jf=hl.now(),ul=setInterval(q$,bI)),Ys=1,xI(wI))}}function nh(t,e,n){var r=new pl;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var K$=Bv("start","end","cancel","interrupt"),Z$=[],DI=0,EI=1,ih=2,rh=3,CI=4,oh=5,ml=6;function Si(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;X$(t,n,{name:e,index:r,group:i,on:K$,tween:Z$,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:DI})}function yl(t,e){var n=vt(t,e);if(n.state>DI)throw new Error("too late; already scheduled");return n}function Tt(t,e){var n=vt(t,e);if(n.state>rh)throw new Error("too late; already running");return n}function vt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function X$(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=th(o,0,n.time);function o(l){n.state=EI,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,d,f,h;if(n.state!==EI)return c();for(u in r)if(h=r[u],h.name===n.name){if(h.state===rh)return nh(s);h.state===CI?(h.state=ml,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[u]):+u<e&&(h.state=ml,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[u])}if(nh(function(){n.state===rh&&(n.state=CI,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=ih,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ih){for(n.state=rh,i=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=oh,1),d=-1,f=i.length;++d<f;)i[d].call(t,u);n.state===oh&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=ml,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function sh(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>ih&&r.state<oh,r.state=ml,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function SI(t){return this.each(function(){sh(this,t)})}function Q$(t,e){var n,r;return function(){var i=Tt(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function J$(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Tt(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function II(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=vt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Q$:J$)(n,t,e))}function Ks(t,e,n){var r=t._id;return t.each(function(){var i=Tt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return vt(i,r).value[e]}}function ah(t,e){var n;return(typeof e=="number"?It:e instanceof nr?Do:(n=nr(e))?(e=n,Do):ll)(t,e)}function eV(t){return function(){this.removeAttribute(t)}}function tV(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nV(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function rV(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function iV(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function oV(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function TI(t,e){var n=Wr(t),r=n==="transform"?Kv:ah;return this.attrTween(t,typeof e=="function"?(n.local?oV:iV)(n,r,Ks(this,"attr."+t,e)):e==null?(n.local?tV:eV)(n):(n.local?rV:nV)(n,r,e))}function sV(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function aV(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function cV(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&aV(t,o)),n}return i._value=e,i}function lV(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&sV(t,o)),n}return i._value=e,i}function AI(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Wr(t);return this.tween(n,(r.local?cV:lV)(r,e))}function uV(t,e){return function(){yl(this,t).delay=+e.apply(this,arguments)}}function dV(t,e){return e=+e,function(){yl(this,t).delay=e}}function MI(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?uV:dV)(e,t)):vt(this.node(),e).delay}function fV(t,e){return function(){Tt(this,t).duration=+e.apply(this,arguments)}}function hV(t,e){return e=+e,function(){Tt(this,t).duration=e}}function RI(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fV:hV)(e,t)):vt(this.node(),e).duration}function pV(t,e){if(typeof e!="function")throw new Error;return function(){Tt(this,t).ease=e}}function kI(t){var e=this._id;return arguments.length?this.each(pV(e,t)):vt(this.node(),e).ease}function gV(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Tt(this,t).ease=n}}function OI(t){if(typeof t!="function")throw new Error;return this.each(gV(this._id,t))}function NI(t){typeof t!="function"&&(t=nl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new Yt(r,this._parents,this._name,this._id)}function PI(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],l=n[a],u=c.length,d=s[a]=new Array(u),f,h=0;h<u;++h)(f=c[h]||l[h])&&(d[h]=f);for(;a<r;++a)s[a]=e[a];return new Yt(s,this._parents,this._name,this._id)}function mV(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function yV(t,e,n){var r,i,o=mV(e)?yl:Tt;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function FI(t,e){var n=this._id;return arguments.length<2?vt(this.node(),n).on.on(t):this.each(yV(n,t,e))}function vV(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function LI(){return this.on("end.remove",vV(this._id))}function BI(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_o(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),u,d,f=0;f<c;++f)(u=a[f])&&(d=t.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,Si(l[f],e,n,f,l,vt(u,n)));return new Yt(o,this._parents,e,n)}function UI(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tl(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=t.call(u,u.__data__,d,c),h,p=vt(u,n),m=0,v=f.length;m<v;++m)(h=f[m])&&Si(h,e,n,m,f,p);o.push(f),s.push(u)}return new Yt(o,s,e,n)}var wV=qr.prototype.constructor;function jI(){return new wV(this._groups,this._parents)}function bV(t,e){var n,r,i;return function(){var o=Ci(this,t),s=(this.style.removeProperty(t),Ci(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function $I(t){return function(){this.style.removeProperty(t)}}function xV(t,e,n){var r,i=n+"",o;return function(){var s=Ci(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function _V(t,e,n){var r,i,o;return function(){var s=Ci(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),Ci(this,t))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function EV(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var c=Tt(this,t),l=c.on,u=c.value[o]==null?a||(a=$I(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(s,i=u),c.on=r}}function VI(t,e,n){var r=(t+="")=="transform"?Yv:ah;return e==null?this.styleTween(t,bV(t,r)).on("end.style."+t,$I(t)):typeof e=="function"?this.styleTween(t,_V(t,r,Ks(this,"style."+t,e))).each(EV(this._id,t)):this.styleTween(t,xV(t,r,e),n).on("end.style."+t,null)}function CV(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function DV(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&CV(t,s,n)),r}return o._value=e,o}function HI(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,DV(t,e,n??""))}function SV(t){return function(){this.textContent=t}}function IV(t){return function(){var e=t(this);this.textContent=e??""}}function GI(t){return this.tween("text",typeof t=="function"?IV(Ks(this,"text",t)):SV(t==null?"":t+""))}function TV(t){return function(e){this.textContent=t.call(this,e)}}function AV(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&TV(i)),e}return r._value=t,r}function zI(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,AV(t))}function WI(){for(var t=this._name,e=this._id,n=ch(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=vt(c,e);Si(c,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Yt(r,this._parents,t,n)}function qI(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var l=Tt(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),i===0&&o()})}var MV=0;function Yt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function YI(t){return qr().transition(t)}function ch(){return++MV}var Yr=qr.prototype;Yt.prototype=YI.prototype={constructor:Yt,select:BI,selectAll:UI,selectChild:Yr.selectChild,selectChildren:Yr.selectChildren,filter:NI,merge:PI,selection:jI,transition:WI,call:Yr.call,nodes:Yr.nodes,node:Yr.node,size:Yr.size,empty:Yr.empty,each:Yr.each,on:FI,attr:TI,attrTween:AI,style:VI,styleTween:HI,text:GI,textTween:zI,remove:LI,tween:II,delay:MI,duration:RI,ease:kI,easeVarying:OI,end:qI,[Symbol.iterator]:Yr[Symbol.iterator]};function lh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var RV={time:null,delay:0,duration:250,ease:lh};function kV(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function KI(t){var e,n;t instanceof Yt?(e=t._id,t=t._name):(e=ch(),(n=RV).time=gl(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&Si(c,t,e,l,s,n||kV(c,e));return new Yt(r,this._parents,t,e)}qr.prototype.interrupt=SI;qr.prototype.transition=KI;var{abs:ine,max:one,min:sne}=Math;function ZI(t){return[+t[0],+t[1]]}function OV(t){return[ZI(t[0]),ZI(t[1])]}var ane={name:"x",handles:["w","e"].map(Xv),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},cne={name:"y",handles:["n","s"].map(Xv),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},lne={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Xv),input:function(t){return t==null?null:OV(t)},output:function(t){return t}};function Xv(t){return{type:t}}var Qv=Math.PI,Jv=2*Qv,To=1e-6,NV=Jv-To;function XI(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function PV(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return XI;let n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}var Ao=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?XI:PV(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,c=r-e,l=i-n,u=s-e,d=a-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>To)if(!(Math.abs(d*c-l*u)>To)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-s,p=i-a,m=c*c+l*l,v=h*h+p*p,b=Math.sqrt(m),_=Math.sqrt(f),C=o*Math.tan((Qv-Math.acos((m+f-v)/(2*b*_)))/2),D=C/_,k=C/b;Math.abs(D-1)>To&&this._append`L${e+D*u},${n+D*d}`,this._append`A${o},${o},0,0,${+(d*h>u*p)},${this._x1=e+k*c},${this._y1=n+k*l}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),c=r*Math.sin(i),l=e+a,u=n+c,d=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>To||Math.abs(this._y1-u)>To)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%Jv+Jv),f>NV?this._append`A${r},${r},0,1,${d},${e-a},${n-c}A${r},${r},0,1,${d},${this._x1=l},${this._y1=u}`:f>To&&this._append`A${r},${r},0,${+(f>=Qv)},${d},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function QI(){return new Ao}QI.prototype=Ao.prototype;function JI(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Mo(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function br(t){return t=Mo(Math.abs(t)),t?t[1]:NaN}function eT(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),o.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function tT(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var FV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ii(t){if(!(e=FV.exec(t)))throw new Error("invalid format: "+t);var e;return new uh({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ii.prototype=uh.prototype;function uh(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}uh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nT(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var e0;function rT(t,e){var n=Mo(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(e0=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Mo(t,Math.max(0,e+o-1))[0]}function t0(t,e){var n=Mo(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var n0={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:JI,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>t0(t*100,e),r:t0,s:rT,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function r0(t){return t}var iT=Array.prototype.map,oT=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function sT(t){var e=t.grouping===void 0||t.thousands===void 0?r0:eT(iT.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?r0:tT(iT.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(d){d=Ii(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,v=d.zero,b=d.width,_=d.comma,C=d.precision,D=d.trim,k=d.type;k==="n"?(_=!0,k="g"):n0[k]||(C===void 0&&(C=12),D=!0,k="g"),(v||f==="0"&&h==="=")&&(v=!0,f="0",h="=");var Z=m==="$"?n:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",A=m==="$"?r:/[%p]/.test(k)?s:"",N=n0[k],x=/[defgprs%]/.test(k);C=C===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function we(G){var ie=Z,$=A,V,it,Qt;if(k==="c")$=N(G)+$,G="";else{G=+G;var ce=G<0||1/G<0;if(G=isNaN(G)?c:N(Math.abs(G),C),D&&(G=nT(G)),ce&&+G==0&&p!=="+"&&(ce=!1),ie=(ce?p==="("?p:a:p==="-"||p==="("?"":p)+ie,$=(k==="s"?oT[8+e0/3]:"")+$+(ce&&p==="("?")":""),x){for(V=-1,it=G.length;++V<it;)if(Qt=G.charCodeAt(V),48>Qt||Qt>57){$=(Qt===46?i+G.slice(V+1):G.slice(V))+$,G=G.slice(0,V);break}}}_&&!v&&(G=e(G,1/0));var y=ie.length+G.length+$.length,We=y<b?new Array(b-y+1).join(f):"";switch(_&&v&&(G=e(We+G,We.length?b-$.length:1/0),We=""),h){case"<":G=ie+G+$+We;break;case"=":G=ie+We+G+$;break;case"^":G=We.slice(0,y=We.length>>1)+ie+G+$+We.slice(y);break;default:G=We+ie+G+$;break}return o(G)}return we.toString=function(){return d+""},we}function u(d,f){var h=l((d=Ii(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(br(f)/3)))*3,m=Math.pow(10,-p),v=oT[8+p/3];return function(b){return h(m*b)+v}}return{format:l,formatPrefix:u}}var dh,Zs,fh;i0({thousands:",",grouping:[3],currency:["$",""]});function i0(t){return dh=sT(t),Zs=dh.format,fh=dh.formatPrefix,dh}function o0(t){return Math.max(0,-br(Math.abs(t)))}function s0(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(br(e)/3)))*3-br(Math.abs(t)))}function a0(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,br(e)-br(t))+1}function hh(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var c0=Symbol("implicit");function vl(){var t=new zs,e=[],n=[],r=c0;function i(o){let s=t.get(o);if(s===void 0){if(r!==c0)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new zs;for(let s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return vl(e,n).unknown(r)},hh.apply(i,arguments),i}function l0(t){return function(){return t}}function u0(t){return+t}var aT=[0,1];function Xs(t){return t}function d0(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:l0(isNaN(e)?NaN:.5)}function LV(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function BV(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=d0(i,r),o=n(s,o)):(r=d0(r,i),o=n(o,s)),function(a){return o(r(a))}}function UV(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=d0(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var c=Fv(t,a,1,r)-1;return o[c](i[c](a))}}function cT(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function jV(){var t=aT,e=aT,n=So,r,i,o,s=Xs,a,c,l;function u(){var f=Math.min(t.length,e.length);return s!==Xs&&(s=LV(t[0],t[f-1])),a=f>2?UV:BV,c=l=null,d}function d(f){return f==null||isNaN(f=+f)?o:(c||(c=a(t.map(r),e,n)))(r(s(f)))}return d.invert=function(f){return s(i((l||(l=a(e,t.map(r),It)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,u0),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=Wv,u()},d.clamp=function(f){return arguments.length?(s=f?!0:Xs,u()):s!==Xs},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(o=f,d):o},function(f,h){return r=f,i=h,u()}}function f0(){return jV()(Xs,Xs)}function h0(t,e,n,r){var i=Lv(t,e,n),o;switch(r=Ii(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=s0(i,s))&&(r.precision=o),fh(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=a0(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=o0(i))&&(r.precision=o-(r.type==="%")*2);break}}return Zs(r)}function $V(t){var e=t.domain;return t.ticks=function(n){var r=e();return Pf(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return h0(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],c,l,u=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);u-- >0;){if(l=Jc(s,a,n),l===c)return r[i]=s,r[o]=a,e(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;c=l}return t},t}function wl(){var t=f0();return t.copy=function(){return cT(t,wl())},hh.apply(t,arguments),$V(t)}function Lt(t){return function(){return t}}var p0=Math.abs,At=Math.atan2,Ti=Math.cos,lT=Math.max,ph=Math.min,rr=Math.sin,Ro=Math.sqrt,Kt=1e-12,Qs=Math.PI,bl=Qs/2,uT=2*Qs;function dT(t){return t>1?0:t<-1?Qs:Math.acos(t)}function g0(t){return t>=1?bl:t<=-1?-bl:Math.asin(t)}function gh(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{let r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Ao(e)}function VV(t){return t.innerRadius}function HV(t){return t.outerRadius}function GV(t){return t.startAngle}function zV(t){return t.endAngle}function WV(t){return t&&t.padAngle}function qV(t,e,n,r,i,o,s,a){var c=n-t,l=r-e,u=s-i,d=a-o,f=d*c-u*l;if(!(f*f<Kt))return f=(u*(e-o)-d*(t-i))/f,[t+f*c,e+f*l]}function mh(t,e,n,r,i,o,s){var a=t-n,c=e-r,l=(s?o:-o)/Ro(a*a+c*c),u=l*c,d=-l*a,f=t+u,h=e+d,p=n+u,m=r+d,v=(f+p)/2,b=(h+m)/2,_=p-f,C=m-h,D=_*_+C*C,k=i-o,Z=f*m-p*h,A=(C<0?-1:1)*Ro(lT(0,k*k*D-Z*Z)),N=(Z*C-_*A)/D,x=(-Z*_-C*A)/D,we=(Z*C+_*A)/D,G=(-Z*_+C*A)/D,ie=N-v,$=x-b,V=we-v,it=G-b;return ie*ie+$*$>V*V+it*it&&(N=we,x=G),{cx:N,cy:x,x01:-u,y01:-d,x11:N*(i/k-1),y11:x*(i/k-1)}}function m0(){var t=VV,e=HV,n=Lt(0),r=null,i=GV,o=zV,s=WV,a=null,c=gh(l);function l(){var u,d,f=+t.apply(this,arguments),h=+e.apply(this,arguments),p=i.apply(this,arguments)-bl,m=o.apply(this,arguments)-bl,v=p0(m-p),b=m>p;if(a||(a=u=c()),h<f&&(d=h,h=f,f=d),!(h>Kt))a.moveTo(0,0);else if(v>uT-Kt)a.moveTo(h*Ti(p),h*rr(p)),a.arc(0,0,h,p,m,!b),f>Kt&&(a.moveTo(f*Ti(m),f*rr(m)),a.arc(0,0,f,m,p,b));else{var _=p,C=m,D=p,k=m,Z=v,A=v,N=s.apply(this,arguments)/2,x=N>Kt&&(r?+r.apply(this,arguments):Ro(f*f+h*h)),we=ph(p0(h-f)/2,+n.apply(this,arguments)),G=we,ie=we,$,V;if(x>Kt){var it=g0(x/f*rr(N)),Qt=g0(x/h*rr(N));(Z-=it*2)>Kt?(it*=b?1:-1,D+=it,k-=it):(Z=0,D=k=(p+m)/2),(A-=Qt*2)>Kt?(Qt*=b?1:-1,_+=Qt,C-=Qt):(A=0,_=C=(p+m)/2)}var ce=h*Ti(_),y=h*rr(_),We=f*Ti(k),Jt=f*rr(k);if(we>Kt){var O=h*Ti(C),w=h*rr(C),xe=f*Ti(D),Re=f*rr(D),bt;if(v<Qs)if(bt=qV(ce,y,xe,Re,O,w,We,Jt)){var ar=ce-bt[0],ht=y-bt[1],X=O-bt[0],Gi=w-bt[1],pn=1/rr(dT((ar*X+ht*Gi)/(Ro(ar*ar+ht*ht)*Ro(X*X+Gi*Gi)))/2),Jl=Ro(bt[0]*bt[0]+bt[1]*bt[1]);G=ph(we,(f-Jl)/(pn-1)),ie=ph(we,(h-Jl)/(pn+1))}else G=ie=0}A>Kt?ie>Kt?($=mh(xe,Re,ce,y,h,ie,b),V=mh(O,w,We,Jt,h,ie,b),a.moveTo($.cx+$.x01,$.cy+$.y01),ie<we?a.arc($.cx,$.cy,ie,At($.y01,$.x01),At(V.y01,V.x01),!b):(a.arc($.cx,$.cy,ie,At($.y01,$.x01),At($.y11,$.x11),!b),a.arc(0,0,h,At($.cy+$.y11,$.cx+$.x11),At(V.cy+V.y11,V.cx+V.x11),!b),a.arc(V.cx,V.cy,ie,At(V.y11,V.x11),At(V.y01,V.x01),!b))):(a.moveTo(ce,y),a.arc(0,0,h,_,C,!b)):a.moveTo(ce,y),!(f>Kt)||!(Z>Kt)?a.lineTo(We,Jt):G>Kt?($=mh(We,Jt,O,w,f,-G,b),V=mh(ce,y,xe,Re,f,-G,b),a.lineTo($.cx+$.x01,$.cy+$.y01),G<we?a.arc($.cx,$.cy,G,At($.y01,$.x01),At(V.y01,V.x01),!b):(a.arc($.cx,$.cy,G,At($.y01,$.x01),At($.y11,$.x11),!b),a.arc(0,0,f,At($.cy+$.y11,$.cx+$.x11),At(V.cy+V.y11,V.cx+V.x11),b),a.arc(V.cx,V.cy,G,At(V.y11,V.x11),At(V.y01,V.x01),!b))):a.arc(0,0,f,k,D,b)}if(a.closePath(),u)return a=null,u+""||null}return l.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Qs/2;return[Ti(d)*u,rr(d)*u]},l.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Lt(+u),l):t},l.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Lt(+u),l):e},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Lt(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Lt(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Lt(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:Lt(+u),l):o},l.padAngle=function(u){return arguments.length?(s=typeof u=="function"?u:Lt(+u),l):s},l.context=function(u){return arguments.length?(a=u??null,l):a},l}var Fre=Array.prototype.slice;function fT(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function hT(t){this._context=t}hT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function yh(t){return new hT(t)}function pT(t){return t[0]}function gT(t){return t[1]}function mT(t,e){var n=Lt(!0),r=null,i=yh,o=null,s=gh(a);t=typeof t=="function"?t:t===void 0?pT:Lt(t),e=typeof e=="function"?e:e===void 0?gT:Lt(e);function a(c){var l,u=(c=fT(c)).length,d,f=!1,h;for(r==null&&(o=i(h=s())),l=0;l<=u;++l)!(l<u&&n(d=c[l],l,c))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(d,l,c),+e(d,l,c));if(h)return o=null,h+""||null}return a.x=function(c){return arguments.length?(t=typeof c=="function"?c:Lt(+c),a):t},a.y=function(c){return arguments.length?(e=typeof c=="function"?c:Lt(+c),a):e},a.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Lt(!!c),a):n},a.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),a):i},a.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),a):r},a}var yT=vh(yh);function vT(t){this._curve=t}vT.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function vh(t){function e(n){return new vT(t(n))}return e._curve=t,e}function YV(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(vh(n)):e()._curve},t}function wh(){return YV(mT().curve(yT))}function Js(){}function bh(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function wT(t,e){this._context=t,this._k=(1-e)/6}wT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:bh(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:bh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Qre=function t(e){function n(r){return new wT(r,e)}return n.tension=function(r){return t(+r)},n}(0);function bT(t,e){this._context=t,this._k=(1-e)/6}bT.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:bh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var y0=function t(e){function n(r){return new bT(r,e)}return n.tension=function(r){return t(+r)},n}(0);function xT(t){this._context=t}xT.prototype={areaStart:Js,areaEnd:Js,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function v0(t){return new xT(t)}function Ai(t,e,n){this.k=t,this.x=e,this.y=n}Ai.prototype={constructor:Ai,scale:function(t){return t===1?this:new Ai(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ai(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var w0=new Ai(1,0,0);b0.prototype=Ai.prototype;function b0(t){for(;!t.__zoom;)if(!(t=t.parentNode))return w0;return t.__zoom}var ZV=["svg"],XV=t=>({borderColor:t}),QV=t=>({color:t}),JV=(t,e)=>e.id;function eH(t,e){if(t&1&&(re(0,"div",3),R(1,"div",4),U(2),T()),t&2){let n=L().$implicit;De("ngStyle",Qn(3,XV,n.color?n.color:"inherit")),F(),De("ngStyle",Qn(5,QV,n.color?n.color:"inherit")),F(),at(n.name)}}function tH(t,e){if(t&1&&ue(0,eH,3,7),t&2){let n=e.$implicit;ee(n.name?0:-1)}}function nH(t,e){if(t&1&&Ze(0,tH,1,1,null,null,JV),t&2){let n=L();Xe(n.data)}}var ea=class ea{constructor(e){this.elm=e}set size(e){this._size=e,this.svgElm&&this.initRadar()}_size=360;get size(){return this._size}set colorScheme(e){e&&(this._colorScheme=e)}get colorScheme(){return this._colorScheme}set data(e){e.length&&(this._data=e,this.svgElm&&this.initRadar())}svgElm;get data(){return this._data}_colorScheme={color:"white",background:"blue",colors:["red","green","blue","yellow","pink"]};get config(){return{w:this.size,h:this.size,margin:{top:20,right:20,bottom:20,left:20},levels:4,maxValue:0,labelFactor:1.25,wrapWidth:60,opacityArea:.35,dotRadius:4,opacityCircles:0,strokeWidth:1,roundStrokes:!1,color:vl(this.colorScheme.colors),showLabels:!0}}_data=[];radarInitialized=!1;get id(){return Ft()}maxValue=0;allAxis;total;radius;format;angleSlice;rScale;ngAfterViewInit(){this.svgElm&&this._data.length&&!this.radarInitialized&&(this.log("svgElm after view init",this.svgElm),this.initRadar())}ngOnDestroy(){}setElmSizes(){this.elm.nativeElement.style.width=`${this.size}px`,this.elm.nativeElement.style.height=`${this.size}px`,this.svgElm.nativeElement.style.width=`${this.size}px`,this.svgElm.nativeElement.style.height=`${this.size}px`}initRadar(){this.log("INIT RADAR"),this.setElmSizes();for(let e of this._data)for(let n of e.items){let r=n.value;r>this.maxValue&&(this.maxValue=r)}this.allAxis=this._data[0].items.map((e,n)=>e.name),this.total=this.allAxis.length,this.radius=Math.min(this.config.w/2.5,this.config.h/2.5),this.format=Zs(".0%"),this.angleSlice=Math.PI*2/this.total,this.rScale=wl().range([0,this.radius]).domain([0,this.maxValue]),Di(`#radar-${this.id}.radar-chart g`).remove(),this.chart(),this.radarInitialized=!0}chart(){let n=Di(this.svgElm.nativeElement).attr("width",this.config.w).attr("height",this.config.h).attr("id","radar-"+this.id).attr("class","radar-chart").append("g").attr("transform",`translate(${this.config.w/2}, ${this.config.h/2})`),r=n.append("g").attr("class","axisWrapper");r.selectAll(".levels").data(Ff(1,this.config.levels+1).reverse()).enter().append("circle").attr("class","gridCircle").attr("id",(l,u)=>(this.log("grid circle i",u),u===0?"mainGridCircle":"")).attr("r",(l,u)=>this.radius/this.config.levels*l).style("fill",this.colorScheme.background).style("stroke",this.colorScheme.color).style("stroke-opacity",.3).style("fill-opacity",this.config.opacityCircles);var i=r.selectAll(".axis").data(this.allAxis).enter().append("g").attr("class","axis");i.append("line").attr("x1",0).attr("y1",0).attr("x2",(l,u)=>this.rScale(this.maxValue)*Math.cos(this.angleSlice*u-Math.PI/2)).attr("y2",(l,u)=>this.rScale(this.maxValue)*Math.sin(this.angleSlice*u-Math.PI/2)).attr("class","line").style("stroke",this.colorScheme.color).style("stroke-width","1px").style("stroke-opacity",.5),i.append("path").attr("id",(l,u)=>`pathCircle-${u}`).attr("d",(l,u)=>m0()({innerRadius:this.radius+12,outerRadius:this.radius+12,startAngle:Math.PI+this.angleSlice*u-Math.PI/5,endAngle:-Math.PI+(this.angleSlice*u-Math.PI/5)})).style("fill-opacity",0),this.config.showLabels&&i.append("text").append("textPath").attr("class","legend").style("font-size","11px").attr("fill",this.colorScheme.color).attr("xlink:href",(l,u)=>`#pathCircle-${u}`).style("text-anchor","middle").attr("startOffset","80%").text((l,u,d)=>l);let o=wh().radius(l=>this.rScale(l[0])).angle((l,u)=>u*this.angleSlice).curve(v0);this.config.roundStrokes&&o.curve(y0);let s=n.selectAll(".radarWrapper").data(this._data).enter().append("g").attr("class","radarWrapper");s.append("path").attr("class","radarArea").attr("d",(l,u)=>{let d=[];for(let h=0;h<l.items.length;h++)h===l.items.length-1?d.push([l.items[h].value,l.items[0].value]):d.push([l.items[h].value,l.items[h+1].value]);return o(d)}).style("fill",(l,u)=>l.color?l.color:"pink").style("fill-opacity",this.config.opacityArea).on("touchstart",(l,u)=>{Hf(".radarArea").transition().duration(200).style("fill-opacity",.1),Di(l.target).transition().duration(200).style("fill-opacity",.7)}).on("touchend",()=>{Hf(".radarArea").transition().duration(200).style("fill-opacity",this.config.opacityArea)}),s.append("path").attr("class","radarStroke").attr("d",(l,u)=>{let d=[];for(let h=0;h<l.items.length;h++)h===l.items.length-1?d.push([l.items[h].value,l.items[0].value]):d.push([l.items[h].value,l.items[h+1].value]);return o(d)}).style("stroke-width",this.config.strokeWidth+"px").style("stroke",(l,u)=>l.color?l.color:"pink").style("fill","none"),s.selectAll(".radarCircle").data((l,u)=>{for(let d of l.items)d.color=l.color;return l.items}).enter().append("circle").attr("class","radarCircle").attr("r",this.config.dotRadius).attr("cx",(l,u)=>this.rScale(l.value)*Math.cos(this.angleSlice*u-Math.PI/2)).attr("cy",(l,u)=>this.rScale(l.value)*Math.sin(this.angleSlice*u-Math.PI/2)).style("fill",(l,u,d)=>l.color?l.color:"pink").style("fill-opacity",.9);var a=n.selectAll(".radarCircleWrapper").data(this._data).enter().append("g").attr("class","radarCircleWrapper");a.selectAll(".radarInvisibleCircle").data((l,u)=>l.items).enter().append("circle").attr("class","radarInvisibleCircle").attr("r",this.config.dotRadius*1.5).attr("cx",(l,u)=>this.rScale(l.value)*Math.cos(this.angleSlice*u-Math.PI/2)).attr("cy",(l,u)=>this.rScale(l.value)*Math.sin(this.angleSlice*u-Math.PI/2)).style("fill","none").style("pointer-events","all").on("touchstart",(l,u)=>{let d=parseFloat(Di(l.target).attr("cx"))-10,f=parseFloat(Di(l.target).attr("cy"))-10;c.attr("x",d).attr("y",f).text(`${u.name}: ${this.format(u.value)}`).transition().duration(200).style("opacity",1).style("fill",u.color?u.color:"pink")}).on("touchend",function(){c.transition().duration(200).style("opacity",0)});var c=n.append("text").attr("class","tooltip").style("opacity",0)}wrap(e,n){e.each((r,i,o)=>{console.log("selector",o[i]);for(var s=Di(o[i]),a=s.text().split(/\s+/).reverse(),c,l=[],u=0,d=1.4,f=s.attr("y"),h=s.attr("x"),p=parseFloat(s.attr("dy")),m=s.text(null).append("tspan").attr("x",h).attr("y",f).attr("dy",p+"em");c=a.pop();)if(l.push(c),m.text(l.join(" ")),m!==null&&m.node()!==null){let v=m.node()?.getComputedTextLength();v&&v>n&&(l.pop(),m.text(l.join(" ")),l=[c],m=s.append("tspan").attr("x",h).attr("y",f).attr("dy",++u*d+p+"em").text(c))}})}log(e,n){}};g(ea,"\u0275fac",function(n){return new(n||ea)(le(Ht))}),g(ea,"\u0275cmp",be({type:ea,selectors:[["app-radar"]],viewQuery:function(n,r){if(n&1&&po(ZV,5),n&2){let i;wi(i=bi())&&(r.svgElm=i.first)}},inputs:{size:"size",colorScheme:"colorScheme",data:"data"},decls:5,vars:1,consts:[["svg",""],[1,"radar"],[1,"data-items"],[1,"data-item-color",3,"ngStyle"],[1,"data-item-name",3,"ngStyle"]],template:function(n,r){n&1&&(R(0,"div",1)(1,"div",2),ue(2,nH,2,0),T(),A_(),re(3,"svg",null,0),T()),n&2&&(F(2),ee(r.data?2:-1))},dependencies:[qt,of],styles:["[_nghost-%COMP%]{display:inline-block;width:200px;height:200px;color:inherit;background-color:transparent;position:relative}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .data-items[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:0 24px}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .data-items[_ngcontent-%COMP%]   .data-item-color[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:100%;border:2px solid white}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .data-items[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:12px}"]}));var xh=ea;function x0(){return x0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x0.apply(this,arguments)}var rH={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(t){},onComplete:function(t){},preStringTyped:function(t,e){},onStringTyped:function(t,e){},onLastStringBackspaced:function(t){},onTypingPaused:function(t,e){},onTypingResumed:function(t,e){},onReset:function(t){},onStop:function(t,e){},onStart:function(t,e){},onDestroy:function(t){}},iH=new(function(){function t(){}var e=t.prototype;return e.load=function(n,r,i){if(n.el=typeof i=="string"?document.querySelector(i):i,n.options=x0({},rH,r),n.isInput=n.el.tagName.toLowerCase()==="input",n.attr=n.options.attr,n.bindInputFocusEvents=n.options.bindInputFocusEvents,n.showCursor=!n.isInput&&n.options.showCursor,n.cursorChar=n.options.cursorChar,n.cursorBlinking=!0,n.elContent=n.attr?n.el.getAttribute(n.attr):n.el.textContent,n.contentType=n.options.contentType,n.typeSpeed=n.options.typeSpeed,n.startDelay=n.options.startDelay,n.backSpeed=n.options.backSpeed,n.smartBackspace=n.options.smartBackspace,n.backDelay=n.options.backDelay,n.fadeOut=n.options.fadeOut,n.fadeOutClass=n.options.fadeOutClass,n.fadeOutDelay=n.options.fadeOutDelay,n.isPaused=!1,n.strings=n.options.strings.map(function(l){return l.trim()}),n.stringsElement=typeof n.options.stringsElement=="string"?document.querySelector(n.options.stringsElement):n.options.stringsElement,n.stringsElement){n.strings=[],n.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var o=Array.prototype.slice.apply(n.stringsElement.children),s=o.length;if(s)for(var a=0;a<s;a+=1)n.strings.push(o[a].innerHTML.trim())}for(var c in n.strPos=0,n.currentElContent=this.getCurrentElContent(n),n.currentElContent&&n.currentElContent.length>0&&(n.strPos=n.currentElContent.length-1,n.strings.unshift(n.currentElContent)),n.sequence=[],n.strings)n.sequence[c]=c;n.arrayPos=0,n.stopNum=0,n.loop=n.options.loop,n.loopCount=n.options.loopCount,n.curLoop=0,n.shuffle=n.options.shuffle,n.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},n.typingComplete=!1,n.autoInsertCss=n.options.autoInsertCss,n.autoInsertCss&&(this.appendCursorAnimationCss(n),this.appendFadeOutAnimationCss(n))},e.getCurrentElContent=function(n){return n.attr?n.el.getAttribute(n.attr):n.isInput?n.el.value:n.contentType==="html"?n.el.innerHTML:n.el.textContent},e.appendCursorAnimationCss=function(n){var r="data-typed-js-cursor-css";if(n.showCursor&&!document.querySelector("["+r+"]")){var i=document.createElement("style");i.setAttribute(r,"true"),i.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(i)}},e.appendFadeOutAnimationCss=function(n){var r="data-typed-fadeout-js-css";if(n.fadeOut&&!document.querySelector("["+r+"]")){var i=document.createElement("style");i.setAttribute(r,"true"),i.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(i)}},t}()),_T=new(function(){function t(){}var e=t.prototype;return e.typeHtmlChars=function(n,r,i){if(i.contentType!=="html")return r;var o=n.substring(r).charAt(0);if(o==="<"||o==="&"){var s;for(s=o==="<"?">":";";n.substring(r+1).charAt(0)!==s&&!(1+ ++r>n.length););r++}return r},e.backSpaceHtmlChars=function(n,r,i){if(i.contentType!=="html")return r;var o=n.substring(r).charAt(0);if(o===">"||o===";"){var s;for(s=o===">"?"<":"&";n.substring(r-1).charAt(0)!==s&&!(--r<0););r--}return r},t}()),_h=function(){function t(n,r){iH.load(this,r,n),this.begin()}var e=t.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(n){n===void 0&&(n=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,n&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var n=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){n.strPos===0?n.typewrite(n.strings[n.sequence[n.arrayPos]],n.strPos):n.backspace(n.strings[n.sequence[n.arrayPos]],n.strPos)},this.startDelay)},e.typewrite=function(n,r){var i=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var o=this.humanizer(this.typeSpeed),s=1;this.pause.status!==!0?this.timeout=setTimeout(function(){r=_T.typeHtmlChars(n,r,i);var a=0,c=n.substring(r);if(c.charAt(0)==="^"&&/^\^\d+/.test(c)){var l=1;l+=(c=/\d+/.exec(c)[0]).length,a=parseInt(c),i.temporaryPause=!0,i.options.onTypingPaused(i.arrayPos,i),n=n.substring(0,r)+n.substring(r+l),i.toggleBlinking(!0)}if(c.charAt(0)==="`"){for(;n.substring(r+s).charAt(0)!=="`"&&(s++,!(r+s>n.length)););var u=n.substring(0,r),d=n.substring(u.length+1,r+s),f=n.substring(r+s+1);n=u+d+f,s--}i.timeout=setTimeout(function(){i.toggleBlinking(!1),r>=n.length?i.doneTyping(n,r):i.keepTyping(n,r,s),i.temporaryPause&&(i.temporaryPause=!1,i.options.onTypingResumed(i.arrayPos,i))},a)},o):this.setPauseStatus(n,r,!0)},e.keepTyping=function(n,r,i){r===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var o=n.substring(0,r+=i);this.replaceText(o),this.typewrite(n,r)},e.doneTyping=function(n,r){var i=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){i.backspace(n,r)},this.backDelay))},e.backspace=function(n,r){var i=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var o=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){r=_T.backSpaceHtmlChars(n,r,i);var s=n.substring(0,r);if(i.replaceText(s),i.smartBackspace){var a=i.strings[i.arrayPos+1];i.stopNum=a&&s===a.substring(0,r)?r:0}r>i.stopNum?(r--,i.backspace(n,r)):r<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.options.onLastStringBackspaced(),i.shuffleStringsIfNeeded(),i.begin()):i.typewrite(i.strings[i.sequence[i.arrayPos]],r))},o)}else this.setPauseStatus(n,r,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(n,r,i){this.pause.typewrite=i,this.pause.curString=n,this.pause.curStrPos=r},e.toggleBlinking=function(n){this.cursor&&(this.pause.status||this.cursorBlinking!==n&&(this.cursorBlinking=n,n?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(n){return Math.round(Math.random()*n/2)+n},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var n=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){n.arrayPos++,n.replaceText(""),n.strings.length>n.arrayPos?n.typewrite(n.strings[n.sequence[n.arrayPos]],0):(n.typewrite(n.strings[0],0),n.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(n){this.attr?this.el.setAttribute(this.attr,n):this.isInput?this.el.value=n:this.contentType==="html"?this.el.innerHTML=n:this.el.textContent=n},e.bindFocusEvents=function(){var n=this;this.isInput&&(this.el.addEventListener("focus",function(r){n.stop()}),this.el.addEventListener("blur",function(r){n.el.value&&n.el.value.length!==0||n.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},t}();var ko=(i=>(i.Love="\u2665\uFE0F",i.Like="\u{1F44D}",i.Dislike="\u{1F44E}",i.Shit="\u{1F4A9}",i))(ko||{});function ET(t){return 200-4e3/(t+20)}function CT(t,e,n){return t===0?100:50*(n+e)/t}function ta(t,e){return e.find(n=>n.uuid===t)}function oH(t,e){return t.filter(n=>n.author===e.uuid)}function sH(t,e){return t.filter(n=>n.author===e.uuid)}function _0(t,e){return t.filter(n=>n.user===e.uuid)}function DT(t,e,n){let r=oH(e,t),i=_0(n,t);return i.length===0?0:r.length/i.length}function ST(t,e,n){let r=_0(n,t);if(r.length===0){let a=new Map;return Object.values(ko).forEach(c=>{a.set(c,0)}),a}let i=sH(e,t),o=new Map;Object.values(ko).forEach(a=>{o.set(a,0)}),i.forEach(a=>{let c=o.get(a.value)||0;o.set(a.value,c+1)});let s=new Map;return o.forEach((a,c)=>{s.set(c,a/r.length)}),s}function IT(t,e){let n=_0(e,t);if(n.length===0)return new Map([["happy",0],["sad",0],["stupid",0],["boring",0]]);let r={joy:0,sad:0,stupid:0,boring:0};n.forEach(o=>{r.joy+=o.joyScore,r.sad+=o.sadScore,r.stupid+=o.stupidScore,r.boring+=o.boringScore});let i=new Map;return i.set("happy",r.joy/n.length),i.set("sad",r.sad/n.length),i.set("stupid",r.stupid/n.length),i.set("boring",r.boring/n.length),i}function Eh(t,e,n,r){let i=ta(t.author,r);if(!i)return console.error(`User ${t.author} not found`),null;let o=`## Post by ${i.name} ${i.surname}:
`;o+=`${t.text}

`;let s=e.filter(c=>c.parent===t.uuid);if(s.length>0){o+=`### Comments:
`;for(let c of s){let l=ta(c.author,r);if(!l){console.error(`User ${c.author} not found`);continue}o+=`- ${l.name} ${l.surname}: ${c.text}
`}}let a=n.filter(c=>c.parent===t.uuid);if(a.length>0){o+=`### Reactions:
`;for(let c of a){let l=ta(c.author,r);if(!l){console.error(`User ${c.author} not found`);continue}o+=`- ${l.name} ${l.surname} reacted: ${c.value}
`}}return o}function C0(t,e,n,r,i=10,o=5){let s=e.filter(f=>f.author===t.uuid).slice(0,i),a=n.filter(f=>f.author===t.uuid),c=`# Recent posts by ${t.name} ${t.surname}:
`;for(let f of s){let h=Eh(f,n,r,[t]);c+=`${h}

`}c+=`

# Recent posts where ${t.name} ${t.surname} has commented:
`;let l=a.map(f=>f.parent),d=[...new Set(l)].map(f=>e.find(h=>h.uuid===f)).filter(f=>f!==void 0).slice(0,o);for(let f of d){let h=n.filter(v=>v.parent===f.uuid),p=r.filter(v=>v.parent===f.uuid),m=Eh(f,h,p,[t]);c+=`${m}

`}return c}var D0={aigenburgAPI:"https://aigenburg.lab.gajdosik.org"},Oo=class Oo{generatePost(e,n,r){return I(this,null,function*(){let i=JSON.stringify({prompt_identifier:"feedem_generate_post",prompt_variables:{name:e.name,surname:e.surname,gender:e.gender,age:String(e.age),bio:e.bio,city:e.residence.city,country:e.residence.country,occupation:e.occupation,traits:e.traits.join(", "),timestring:new Date(r).toISOString(),recent_activity:n,memory_string:"",dialect:e.dialect}});console.log("\u270D\uFE0F generatePost -> sending data:",i);let s=yield(yield fetch(`${D0.aigenburgAPI}/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:i})).json(),a=typeof s=="string"?JSON.parse(s):s;if(!a?.choices?.[0]?.message?.content)throw new Error("Invalid response format from API");let c=a.choices[0].message.content;return console.log("\u270D\uFE0F generatePost <- response:",c),{uuid:Ft(),author:e.uuid,text:c,reasoning:"",f_created:r,r_created:Date.now()}})}viewPost(e,n,r){return I(this,null,function*(){let i=`${D0.aigenburgAPI}/generate`,s=yield(yield fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_identifier:"feedem_reflect_post",prompt_variables:{post_context:r,reader_bio:n.bio}})})).json(),a=typeof s=="string"?JSON.parse(s):s;if(!a?.choices?.[0]?.message?.content)throw new Error("Invalid response format from API");let c=a.choices[0].message.content;console.log(`Got reflection on post (${e.uuid}): ${c}`);let u=yield(yield fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt_identifier:"feedem_rate_post",prompt_variables:{reflection:c}})})).json(),d=typeof u=="string"?JSON.parse(u):u;if(!d?.choices?.[0]?.message?.content)throw new Error("Invalid response format from API");let f=d.choices[0].message.content;console.log(`Got rating for post (${e.uuid}): ${f}`);let h=JSON.parse(f);return{uuid:Ft(),user:n.uuid,post:e.uuid,time:Date.now(),_reasoning:c,_rating:f,joyScore:h.enjoyScore,sadScore:h.sadScore,stupidScore:h.stupidScore,boringScore:h.boringScore,reactionLikeUrge:h.reactionLikeUrge,reactionDislikeUrge:h.reactionDislikeUrge,reactionShittyUrge:h.reactionShittyUrge,reactionLoveUrge:h.reactionLoveUrge,commentUrge:h.commentUrge,shareUrge:0}})}decideReaction(e){let n=Math.max(e.reactionLikeUrge,e.reactionDislikeUrge,e.reactionShittyUrge,e.reactionLoveUrge);if(Math.random()>n)return null;let i;if(n===e.reactionShittyUrge)i="\u{1F4A9}";else if(n===e.reactionLoveUrge)i="\u2665\uFE0F";else if(n===e.reactionLikeUrge)i="\u{1F44D}";else if(n===e.reactionDislikeUrge)i="\u{1F44E}";else throw new Error("Invalid reaction type");return{value:i,author:e.user,parent:e.post,parent_type:"post",uuid:Ft()}}decideComment(e,n,r,i){return I(this,null,function*(){return Math.random()>e.commentUrge?null:yield this.generateCommentUnderPost(n,r,e,i)})}generateCommentUnderPost(e,n,r,i){return I(this,null,function*(){let o=`${D0.aigenburgAPI}/generate`,s=JSON.stringify({prompt_identifier:"feedem_generate_comment",prompt_variables:{user_bio:e.bio,author_name:n.author,author_surname:n.author,post_text:n.text,reasoning:r._reasoning,dialect:e.dialect,traits:e.traits.join(", "),timestring:new Date(i).toISOString()}});console.log("\u{1F4AC} generateCommentUnderPost -> sending data:",s);let c=yield(yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:s})).json();console.log("Raw API Response:",c);let l=typeof c=="string"?JSON.parse(c):c;if(console.log("Parsed Comment Data:",l),!l?.choices?.[0]?.message?.content)throw console.error("Invalid response structure:",{hasChoices:!!l?.choices,choicesLength:l?.choices?.length,hasMessage:!!l?.choices?.[0]?.message,hasContent:!!l?.choices?.[0]?.message?.content}),new Error("Invalid response format from API");let u=l.choices[0].message.content;return console.log(`\u{1F4AC} generateCommentUnderPost <- response: ${u}`),{uuid:Ft(),author:e.uuid,parent:n.uuid,parent_type:"post",text:u,f_created:i,r_created:Date.now()}})}generateCommentUnderComment(e,n,r,i){return I(this,null,function*(){return{uuid:Ft(),author:e.uuid,parent:n.uuid,parent_type:"comment",text:"This is a dummy comment",f_created:Date.now(),r_created:Date.now()}})}};g(Oo,"\u0275fac",function(n){return new(n||Oo)}),g(Oo,"\u0275prov",B({token:Oo,factory:Oo.\u0275fac,providedIn:"root"}));var Ch=Oo;var ir=Object.create(null);ir.open="0";ir.close="1";ir.ping="2";ir.pong="3";ir.message="4";ir.upgrade="5";ir.noop="6";var xl=Object.create(null);Object.keys(ir).forEach(t=>{xl[ir[t]]=t});var _l={type:"error",data:"parser error"};var RT=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",kT=typeof ArrayBuffer=="function",OT=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,El=({type:t,data:e},n,r)=>RT&&e instanceof Blob?n?r(e):AT(e,r):kT&&(e instanceof ArrayBuffer||OT(e))?n?r(e):AT(new Blob([e]),r):r(ir[t]+(e||"")),AT=(t,e)=>{let n=new FileReader;return n.onload=function(){let r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function MT(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}var S0;function NT(t,e){if(RT&&t.data instanceof Blob)return t.data.arrayBuffer().then(MT).then(e);if(kT&&(t.data instanceof ArrayBuffer||OT(t.data)))return e(MT(t.data));El(t,!1,n=>{S0||(S0=new TextEncoder),e(S0.encode(n))})}var PT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<PT.length;t++)Cl[PT.charCodeAt(t)]=t;var FT=t=>{let e=t.length*.75,n=t.length,r,i=0,o,s,a,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);let l=new ArrayBuffer(e),u=new Uint8Array(l);for(r=0;r<n;r+=4)o=Cl[t.charCodeAt(r)],s=Cl[t.charCodeAt(r+1)],a=Cl[t.charCodeAt(r+2)],c=Cl[t.charCodeAt(r+3)],u[i++]=o<<2|s>>4,u[i++]=(s&15)<<4|a>>2,u[i++]=(a&3)<<6|c&63;return l};var cH=typeof ArrayBuffer=="function",Dl=(t,e)=>{if(typeof t!="string")return{type:"message",data:LT(t,e)};let n=t.charAt(0);return n==="b"?{type:"message",data:lH(t.substring(1),e)}:xl[n]?t.length>1?{type:xl[n],data:t.substring(1)}:{type:xl[n]}:_l},lH=(t,e)=>{if(cH){let n=FT(t);return LT(n,e)}else return{base64:!0,data:t}},LT=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}};var BT="",UT=(t,e)=>{let n=t.length,r=new Array(n),i=0;t.forEach((o,s)=>{El(o,!1,a=>{r[s]=a,++i===n&&e(r.join(BT))})})},jT=(t,e)=>{let n=t.split(BT),r=[];for(let i=0;i<n.length;i++){let o=Dl(n[i],e);if(r.push(o),o.type==="error")break}return r};function $T(){return new TransformStream({transform(t,e){NT(t,n=>{let r=n.length,i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);let o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{i=new Uint8Array(9);let o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}var I0;function Dh(t){return t.reduce((e,n)=>e+n.length,0)}function Sh(t,e){if(t[0].length===e)return t.shift();let n=new Uint8Array(e),r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function VT(t,e){I0||(I0=new TextDecoder);let n=[],r=0,i=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(r===0){if(Dh(n)<1)break;let c=Sh(n,1);o=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Dh(n)<2)break;let c=Sh(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Dh(n)<8)break;let c=Sh(n,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(_l);break}i=u*Math.pow(2,32)+l.getUint32(4),r=3}else{if(Dh(n)<i)break;let c=Sh(n,i);a.enqueue(Dl(o?c:I0.decode(c),e)),r=0}if(i===0||i>t){a.enqueue(_l);break}}}})}var T0=4;function Ve(t){if(t)return uH(t)}function uH(t){for(var e in Ve.prototype)t[e]=Ve.prototype[e];return t}Ve.prototype.on=Ve.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ve.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Ve.prototype.off=Ve.prototype.removeListener=Ve.prototype.removeAllListeners=Ve.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Ve.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Ve.prototype.emitReserved=Ve.prototype.emit;Ve.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ve.prototype.hasListeners=function(t){return!!this.listeners(t).length};var Kr=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Zt=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),HT="arraybuffer";function Ih(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}var dH=Zt.setTimeout,fH=Zt.clearTimeout;function Zr(t,e){e.useNativeTimers?(t.setTimeoutFn=dH.bind(Zt),t.clearTimeoutFn=fH.bind(Zt)):(t.setTimeoutFn=Zt.setTimeout.bind(Zt),t.clearTimeoutFn=Zt.clearTimeout.bind(Zt))}var hH=1.33;function GT(t){return typeof t=="string"?pH(t):Math.ceil((t.byteLength||t.size)*hH)}function pH(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Th(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zT(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function WT(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}var Ah=class extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}},Xr=class extends Ve{constructor(e){super(),this.writable=!1,Zr(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new Ah(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let n=Dl(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){let e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){let n=zT(e);return n.length?"?"+n:""}};var Sl=class extends Xr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};jT(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){let e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,UT(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Th()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}};var qT=!1;try{qT=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var YT=qT;function gH(){}var A0=class extends Sl{constructor(e){if(super(e),typeof location<"u"){let n=location.protocol==="https:",r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){let r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}},Mh=(()=>{class t extends Ve{constructor(n,r,i){super(),this.createRequest=n,Zr(this,i),this._opts=i,this._method=i.method||"GET",this._uri=r,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var n;let r=Ih(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;let i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(n=this._opts.cookieJar)===null||n===void 0||n.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=t.requestsCount++,t.requests[this._index]=this)}_onError(n){this.emitReserved("error",n,this._xhr),this._cleanup(!0)}_cleanup(n){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=gH,n)try{this._xhr.abort()}catch{}typeof document<"u"&&delete t.requests[this._index],this._xhr=null}}_onLoad(){let n=this._xhr.responseText;n!==null&&(this.emitReserved("data",n),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}return t.requestsCount=0,t.requests={},t})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",KT);else if(typeof addEventListener=="function"){let t="onpagehide"in Zt?"pagehide":"unload";addEventListener(t,KT,!1)}}function KT(){for(let t in Mh.requests)Mh.requests.hasOwnProperty(t)&&Mh.requests[t].abort()}var mH=function(){let t=ZT({xdomain:!1});return t&&t.responseType!==null}(),Mi=class extends A0{constructor(e){super(e);let n=e&&e.forceBase64;this.supportsBinary=mH&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Mh(ZT,this.uri(),e)}};function ZT(t){let e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||YT))return new XMLHttpRequest}catch{}if(!e)try{return new Zt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}var XT=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",R0=class extends Xr{get name(){return"websocket"}doOpen(){let e=this.uri(),n=this.opts.protocols,r=XT?{}:Ih(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){let r=e[n],i=n===e.length-1;El(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}i&&Kr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Th()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}},M0=Zt.WebSocket||Zt.MozWebSocket,Ri=class extends R0{createSocket(e,n,r){return XT?new M0(e,n,r):n?new M0(e,n):new M0(e)}doWrite(e,n){this.ws.send(n)}};var na=class extends Xr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let n=VT(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=$T();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();let o=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),o())}).catch(a=>{})};o();let s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){let r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Kr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}};var k0={websocket:Ri,webtransport:na,polling:Mi};var yH=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,vH=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ra(t){if(t.length>8e3)throw"URI too long";let e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=yH.exec(t||""),o={},s=14;for(;s--;)o[vH[s]]=i[s]||"";return n!=-1&&r!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=wH(o,o.path),o.queryKey=bH(o,o.query),o}function wH(t,e){let n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function bH(t,e){let n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,o){i&&(n[i]=o)}),n}var O0=typeof addEventListener=="function"&&typeof removeEventListener=="function",Rh=[];O0&&addEventListener("offline",()=>{Rh.forEach(t=>t())},!1);var kh=(()=>{class t extends Ve{constructor(n,r){if(super(),this.binaryType=HT,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,n&&typeof n=="object"&&(r=n,n=null),n){let i=ra(n);r.hostname=i.host,r.secure=i.protocol==="https"||i.protocol==="wss",r.port=i.port,i.query&&(r.query=i.query)}else r.host&&(r.hostname=ra(r.host).host);Zr(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(i=>{let o=i.prototype.name;this.transports.push(o),this._transportsByName[o]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=WT(this.opts.query)),O0&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Rh.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(n){let r=Object.assign({},this.opts.query);r.EIO=T0,r.transport=n,this.id&&(r.sid=this.id);let i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[n]);return new this._transportsByName[n](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let n=this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";let r=this.createTransport(n);r.open(),this.setTransport(r)}setTransport(n){this.transport&&this.transport.removeAllListeners(),this.transport=n,n.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",t.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",n),this.emitReserved("heartbeat"),n.type){case"open":this.onHandshake(JSON.parse(n.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let r=new Error("server error");r.code=n.data,this._onError(r);break;case"message":this.emitReserved("data",n.data),this.emitReserved("message",n.data);break}}onHandshake(n){this.emitReserved("handshake",n),this.id=n.sid,this.transport.query.sid=n.sid,this._pingInterval=n.pingInterval,this._pingTimeout=n.pingTimeout,this._maxPayload=n.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let n=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+n,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},n),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let n=this._getWritablePackets();this.transport.send(n),this._prevBufferLen=n.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){let o=this.writeBuffer[i].data;if(o&&(r+=GT(o)),i>0&&r>this._maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let n=Date.now()>this._pingTimeoutTime;return n&&(this._pingTimeoutTime=0,Kr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),n}write(n,r,i){return this._sendPacket("message",n,r,i),this}send(n,r,i){return this._sendPacket("message",n,r,i),this}_sendPacket(n,r,i,o){if(typeof r=="function"&&(o=r,r=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;let s={type:n,data:r,options:i};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),o&&this.once("flush",o),this.flush()}close(){let n=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),n()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():n()}):this.upgrading?i():n()),this}_onError(n){if(t.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",n),this._onClose("transport error",n)}_onClose(n,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),O0&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let i=Rh.indexOf(this._offlineEventListener);i!==-1&&Rh.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",n,r),this.writeBuffer=[],this._prevBufferLen=0}}}return t.protocol=T0,t})(),Oh=class extends kh{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;kh.priorWebsocketSuccess=!1;let i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;kh.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{let f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function o(){r||(r=!0,u(),n.close(),n=null)}let s=d=>{let f=new Error("probe error: "+d);f.transport=n.name,o(),this.emitReserved("upgradeError",f)};function a(){s("transport closed")}function c(){s("socket closed")}function l(d){n&&d.name!==n.name&&o()}let u=()=>{n.removeListener("open",i),n.removeListener("error",s),n.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};n.once("open",i),n.once("error",s),n.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}},ia=class extends Oh{constructor(e,n={}){let r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>k0[i]).filter(i=>!!i)),super(e,r)}};var $se=ia.protocol;function QT(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=ra(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}var U0={};UR(U0,{Decoder:()=>L0,Encoder:()=>F0,PacketType:()=>Ee,protocol:()=>r1});var _H=typeof ArrayBuffer=="function",EH=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,JT=Object.prototype.toString,CH=typeof Blob=="function"||typeof Blob<"u"&&JT.call(Blob)==="[object BlobConstructor]",DH=typeof File=="function"||typeof File<"u"&&JT.call(File)==="[object FileConstructor]";function Tl(t){return _H&&(t instanceof ArrayBuffer||EH(t))||CH&&t instanceof Blob||DH&&t instanceof File}function Il(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Il(t[n]))return!0;return!1}if(Tl(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Il(t.toJSON(),!0);for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Il(t[n]))return!0;return!1}function e1(t){let e=[],n=t.data,r=t;return r.data=N0(n,e),r.attachments=e.length,{packet:r,buffers:e}}function N0(t,e){if(!t)return t;if(Tl(t)){let n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){let n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=N0(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){let n={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=N0(t[r],e));return n}return t}function t1(t,e){return t.data=P0(t.data,e),delete t.attachments,t}function P0(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=P0(t[n],e);else if(typeof t=="object")for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=P0(t[n],e));return t}var SH=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],r1=5,Ee=function(t){return t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK",t}(Ee||{}),F0=class{constructor(e){this.replacer=e}encode(e){return(e.type===Ee.EVENT||e.type===Ee.ACK)&&Il(e)?this.encodeAsBinary({type:e.type===Ee.EVENT?Ee.BINARY_EVENT:Ee.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Ee.BINARY_EVENT||e.type===Ee.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){let n=e1(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}};function n1(t){return Object.prototype.toString.call(t)==="[object Object]"}var L0=class t extends Ve{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);let r=n.type===Ee.BINARY_EVENT;r||n.type===Ee.BINARY_ACK?(n.type=r?Ee.EVENT:Ee.ACK,this.reconstructor=new B0(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Tl(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0,r={type:Number(e.charAt(0))};if(Ee[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Ee.BINARY_EVENT||r.type===Ee.BINARY_ACK){let o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);let s=e.substring(o,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(n+1)==="/"){let o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(o,n)}else r.nsp="/";let i=e.charAt(n+1);if(i!==""&&Number(i)==i){let o=n+1;for(;++n;){let s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}r.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){let o=this.tryParse(e.substr(n));if(t.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Ee.CONNECT:return n1(n);case Ee.DISCONNECT:return n===void 0;case Ee.CONNECT_ERROR:return typeof n=="string"||n1(n);case Ee.EVENT:case Ee.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&SH.indexOf(n[0])===-1);case Ee.ACK:case Ee.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},B0=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let n=t1(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function Tn(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var IH=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),oa=class extends Ve{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[Tn(e,"open",this.onopen.bind(this)),Tn(e,"packet",this.onpacket.bind(this)),Tn(e,"error",this.onerror.bind(this)),Tn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,o;if(IH.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;let s={type:Ee.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){let u=this.ids++,d=n.pop();this._registerAckCallback(u,d),s.id=u}let a=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){var r;let i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}let o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},i),s=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...n){return new Promise((r,i)=>{let o=(s,a)=>s?i(s):r(a);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;let n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ee.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){let r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ee.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ee.EVENT:case Ee.BINARY_EVENT:this.onevent(e);break;case Ee.ACK:case Ee.BINARY_ACK:this.onack(e);break;case Ee.DISCONNECT:this.ondisconnect();break;case Ee.CONNECT_ERROR:this.destroy();let r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){let n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let n=this._anyListeners.slice();for(let r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){let n=this,r=!1;return function(...i){r||(r=!0,n.packet({type:Ee.ACK,id:e,data:i}))}}onack(e){let n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ee.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let n=this._anyOutgoingListeners.slice();for(let r of n)r.apply(this,e.data)}}};function No(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}No.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};No.prototype.reset=function(){this.attempts=0};No.prototype.setMin=function(t){this.ms=t};No.prototype.setMax=function(t){this.max=t};No.prototype.setJitter=function(t){this.jitter=t};var sa=class extends Ve{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Zr(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new No({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;let i=n.parser||U0;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ia(this.uri,this.opts);let n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let i=Tn(n,"open",function(){r.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},s=Tn(n,"error",o);if(this._timeout!==!1){let a=this._timeout,c=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(Tn(e,"ping",this.onping.bind(this)),Tn(e,"data",this.ondata.bind(this)),Tn(e,"error",this.onerror.bind(this)),Tn(e,"close",this.onclose.bind(this)),Tn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Kr(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new oa(this,e,n),this.nsps[e]=r),r}_destroy(e){let n=Object.keys(this.nsps);for(let r of n)if(this.nsps[r].active)return;this._close()}_packet(e){let n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let n=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}};var Al={};function Ml(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};let n=QT(t,e.path||"/socket.io"),r=n.source,i=n.id,o=n.path,s=Al[i]&&o in Al[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s,c;return a?c=new sa(r,e):(Al[i]||(Al[i]=new sa(r,e)),c=Al[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Ml,{Manager:sa,Socket:oa,io:Ml,connect:Ml});var Po=class Po{canControl=new Ye(!1);controllable=new Ye(!0);SOCKET_URL="wss://fesync.lab.gajdosik.org";socket=Ml(this.SOCKET_URL,{transports:["websocket"]});socketMessage=new Te;get socketId(){return this.socket?this.socket.id:""}constructor(){this.socket.onAny((e,...n)=>{if(console.log(`socket.io got ${e}`,n),(e&&e==="message"||e==="game"||e==="disconnected")&&this.socketMessage.next({type:e,data:n[0]}),e&&e==="controller"){let r=n[0];if(!r.controller_id){this.controllable.next(!0);return}r.controller_id&&r.controller_id===this.socket.id?(this.canControl.next(!0),this.controllable.next(!1)):this.controllable.next(!1)}})}requestGameControl(){this.socket.emit("request_controller_role")}sendSocketMessage(e){this.socket.emit("message",e)}saveGameOnServer(e){e&&(console.warn("SAVING GAME TO SERVER:",e),this.socket.emit("save_game",e))}destroy(){this.socket.offAny(),this.socket.disconnect()}};g(Po,"\u0275fac",function(n){return new(n||Po)}),g(Po,"\u0275prov",B({token:Po,factory:Po.\u0275fac,providedIn:"root"}));var Nh=Po;var Fo=class Fo{constructor(e,n,r){this.http=e;this.llmsService=n;this.socketSerivce=r;this.gameMessage=this.socketSerivce.socketMessage,this.controllable=this.socketSerivce.controllable,this.canControl=this.socketSerivce.canControl,this.gameSubject.subscribe({next:o=>{this.game||(this._game=o,this.gameTime.next(o.ftime),this.startGameTime()),this.game&&this.updateGame(this.game,o)}});let i=this.http.get("./initial-game.json").subscribe({next:o=>{!this.game&&o&&o.uuid&&(this.gameSubject.next(o),i.unsubscribe())}})}gameSubject=new Te;_game;onReaction=new Te;onComment=new Te;onTask=new Te;gameMessage=new Te;controllable=new Te;canControl=new Te;get gameId(){return this.socketSerivce.socketId}gameTime=new Te;getFictionalTime(){return this.game.ftime}setFictionalTime(e){this.game.ftime=e,this.gameTime.next(this.game.ftime)}increaseFictionalTime(e){return this.game.ftime+=e,this.gameTime.next(this.game.ftime),this.game.ftime}get game(){return this._game}userIsFollowing(e,n){if(!e||!e.nodes().length)return[];let r=e.filterOutNeighbors(n,(i,o)=>o.type==="user");return r.length?r:[]}userIsFollowed(e,n){if(!e||!e.nodes().length)return[];let r=e.filterInNeighbors(n,(i,o)=>o.type==="user");return r.length?r:[]}startGameTime(){if(!this.game){console.error("Game not initialized:",this.game);return}this.game.ftime||(console.error("Game ftime not initialized:",this.game),this.game.ftime=this.game.created);let e=1e3;console.warn("\u23F0 -------- GAME TIME STARTED --------- \u23F0");let n=()=>{this.game&&this.game.created?setTimeout(()=>{this.game.ftime+=1,this.gameTime.next(this.game.ftime),n()},e):setTimeout(()=>n(),e)};n()}updateGame(e,n){for(let r in e){let i=n[r];e[r]=i}return e}nextTask(e=null){return I(this,null,function*(){if(e&&e.showPost)for(let o of e.showTo){let s=Math.random()*1e3*60*60;this.increaseFictionalTime(s);let a=this.getUserById(o),c=this.getPost(e.showPost);console.log("showing post to user",a.name,a.surname);let l=Eh(c,this.game.comments,this.game.reactions,this.game.users);if(!l){console.error("\u274C post context is null");continue}console.log("nextTask - postContext for view:",l);let u=yield this.llmsService.viewPost(c,a,l);this.game.views.unshift(u);let d=this.llmsService.decideReaction(u);d?(this.game.reactions.unshift(d),this.onReaction.next(d),console.log(`\u2139\uFE0F ${a.name} ${a.surname} reacted: ${d.value}`)):console.log(`\u2139\uFE0F ${a.name} ${a.surname} did not react`);let f=yield this.llmsService.decideComment(u,a,c,this.getFictionalTime());f?(this.game.comments.unshift(f),this.onComment.next(f),console.log(`\u2139\uFE0F ${a.name} ${a.surname} commented: ${f.text}`)):console.log(`\u2139\uFE0F ${a.name} ${a.surname} did not comment`)}let n=1+7*Math.random()*1e3*60*60;this.increaseFictionalTime(n);let r=Math.random(),i;r<.5?i=yield this.createTaskDistributePost():i=yield this.createTaskShowPost(),this.game.tasks.unshift(i),this.gameSubject.next(this.game)})}createTaskDistributePost(){return I(this,null,function*(){let e=this.getHero(),n=C0(e,this.game.posts,this.game.comments,this.game.reactions),r=yield this.llmsService.generatePost(e,n,this.getFictionalTime());return this.game.posts.unshift(r),{uuid:Ft(),users:[e.uuid],posts:[r.uuid],completed:!1,type:"distributePost",time:Date.now(),showTo:[],showPost:r.uuid}})}createTaskShowPost(){return I(this,null,function*(){let e=this.getRandomNonHeroUsers(2),n=[];for(let i of e){let o=Math.random()*1e3*60*60;this.increaseFictionalTime(o);let s=C0(i,this.game.posts,this.game.comments,this.game.reactions),a=yield this.llmsService.generatePost(i,s,this.getFictionalTime());this.game.posts.unshift(a),n.unshift(a)}return{uuid:Ft(),users:e.map(i=>i.uuid),posts:n.map(i=>i.uuid),completed:!1,type:"showPost",time:Date.now(),showTo:[],showPost:""}})}getHero(){return this.game.users.find(e=>this.game.hero===e.uuid)}setHero(e){this.game.hero=e}getUserById(e){return this.game.users.find(n=>e===n.uuid)}getRandomNonHeroUsers(e=1){let n=this.game.users.filter(i=>i.uuid!==this.game.hero);return n.length===0?(console.error("No non-hero users available"),[]):[...n].sort(()=>.5-Math.random()).slice(0,Math.min(e,n.length))}usersOnPathNotification(e){return`${e.length&&e.length>=1?e.length-1:0} User${e.length>=2?"s":""} on path`}getPost(e){return this.game.posts.find(n=>e===n.uuid)}createPostRelations(e){let n=this.getPost(e.showPost),r={source:n.author,target:n.uuid,label:"write"};this.game.relations.push(r);for(let i of e.showTo){let o={source:n.uuid,target:i,label:"get"};this.game.relations.push(o)}}getComment(e){return this.game.comments.find(n=>e===n.uuid)}requestGameControl(){return this.socketSerivce.requestGameControl()}sendGameMessage(e){this.socketSerivce.sendSocketMessage(e)}saveGame(e){this.socketSerivce.saveGameOnServer(e)}destroy(){this.socketSerivce.destroy()}};g(Fo,"\u0275fac",function(n){return new(n||Fo)(W(kc),W(Ch),W(Nh))}),g(Fo,"\u0275prov",B({token:Fo,factory:Fo.\u0275fac,providedIn:"root"}));var xt=Fo;var AH=["bioElement"],MH=()=>["#ddd","#ddd","#ddd"],RH=t=>({color:"#ddd",background:"black",colors:t}),i1=(t,e)=>e.key;function kH(t,e){if(t&1&&re(0,"app-radar",7),t&2){let n=L(2);De("data",n.radarData)("size",180)("colorScheme",Qn(4,RH,bC(3,MH)))}}function OH(t,e){if(t&1&&(R(0,"div",11),U(1),T()),t&2){let n=e.$implicit;F(),at(n.replace(".",""))}}function NH(t,e){if(t&1&&(R(0,"div",17),re(1,"img",18),T()),t&2){let n=e.$implicit,r=L(3);F(),De("src",r.getUser(n).profile_picture,mi)}}function PH(t,e){if(t&1&&(R(0,"div",12)(1,"div"),U(2,"Follows\xA0"),T(),Ze(3,NH,2,1,"div",17,Cy),T()),t&2){let n=L(2);F(3),Xe(n.following)}}function FH(t,e){if(t&1&&(R(0,"div",17),re(1,"img",18),T()),t&2){let n=e.$implicit,r=L(3);F(),De("src",r.getUser(n).profile_picture,mi)}}function LH(t,e){if(t&1&&(R(0,"div",12)(1,"div"),U(2,"Followed by\xA0"),T(),Ze(3,FH,2,1,"div",17,Cy),T()),t&2){let n=L(2);F(3),Xe(n.followers)}}function BH(t,e){if(t&1&&(R(0,"span"),U(1),ln(2,"number"),T()),t&2){let n=e.$implicit;F(),jr(" ",n.key," ",Bn(2,2,n.value*100,"1.1-1"),"% ")}}function UH(t,e){t&1&&U(0," \u{1F601} ")}function jH(t,e){t&1&&U(0," \u{1F622} ")}function $H(t,e){t&1&&U(0," \u{1F926}\u200D\u2642\uFE0F ")}function VH(t,e){t&1&&U(0," \u{1F634} ")}function HH(t,e){if(t&1&&(R(0,"span"),ue(1,UH,1,0)(2,jH,1,0)(3,$H,1,0)(4,VH,1,0),U(5),ln(6,"number"),T()),t&2){let n=e.$implicit;F(),ee(n.key==="happy"?1:n.key==="sad"?2:n.key==="stupid"?3:n.key==="boring"?4:-1),F(4),cn(" ",Bn(6,2,n.value,"1.3-3")," ")}}function GH(t,e){if(t&1&&(R(0,"div",1)(1,"div",2)(2,"div",3),re(3,"img",4),T(),R(4,"h2"),U(5),T(),R(6,"marquee",5),U(7,"Managed User - As the AI Social Algorithm Assistant, you curate this user's feed and amplify their posts."),T()(),R(8,"div",6),ue(9,kH,1,6,"app-radar",7),T()(),R(10,"div",8)(11,"p")(12,"strong"),U(13,"Age"),T(),U(14),T(),R(15,"p")(16,"strong"),U(17,"Lives in"),T(),U(18),T(),R(19,"p")(20,"strong"),U(21,"Occupation"),T(),U(22),T(),R(23,"p")(24,"strong"),U(25,"Gender"),T(),U(26),T()(),R(27,"div",9),re(28,"span",null,0),T(),R(30,"div",10),Ze(31,OH,2,1,"div",11,ho),T(),ue(33,PH,5,0,"div",12)(34,LH,5,0,"div",12),R(35,"div",13),U(36),R(37,"div",14)(38,"span"),U(39),ln(40,"number"),T(),Ze(41,BH,3,5,"span",null,i1),ln(43,"keyvalue"),T(),R(44,"div",15),U(45," deep analyzed feelings: "),R(46,"div",16),Ze(47,HH,7,5,"span",null,i1),ln(49,"keyvalue"),T()()()),t&2){let n=L();F(3),De("src",n.user.profile_picture,mi),F(2),jr("",n.user.name," ",n.user.surname,""),F(4),ee(n.radarData.length?9:-1),F(5),cn(" ",n.user.age,""),F(4),jr(" ",n.user.residence.city,", ",n.user.residence.country,""),F(4),cn(" ",n.user.occupation,""),F(4),cn(" ",n.user.gender,""),F(5),Xe(n.user.traits),F(2),ee(n.following.length?33:-1),F(),ee(n.followers.length?34:-1),F(2),cn(" ",n.user.name,"'s avg. reacts: "),F(3),cn(" \u{1F4AC} ",Bn(40,13,n.getCommentChanceOfUser(n.user)*100,"1.1-1"),"% "),F(2),Xe(Dy(43,16,n.getReactionChancesOfUser(n.user))),F(6),Xe(Dy(49,18,n.getUserEmotionScores(n.user)))}}var aa=class aa{constructor(e){this.gameService=e}user;following=[];followers=[];bioElement;radarData=[];isHero=!1;ngOnInit(){if(this.user&&this.user.big_five){let e={id:Ft(),items:[],name:"",color:"#ddd"};for(let n in this.user.big_five)e.items.push({name:n,value:this.user.big_five[n],color:"#ddd"});this.radarData.push(e)}this.isHero=this.user?.uuid===this.gameService.game.hero}ngAfterViewInit(){if(this.user?.bio){let e=new _h(this.bioElement.nativeElement,{strings:[this.user.bio],typeSpeed:5,showCursor:!1,loop:!0,backDelay:6e4,backSpeed:1,fadeOut:!0})}}getUser(e){return this.gameService.getUserById(e)}getCommentChanceOfUser(e){return DT(e,this.gameService.game.comments,this.gameService.game.views)}getReactionChancesOfUser(e){return ST(e,this.gameService.game.reactions,this.gameService.game.views)}getUserEmotionScores(e){return IT(e,this.gameService.game.views)}};g(aa,"\u0275fac",function(n){return new(n||aa)(le(xt))}),g(aa,"\u0275cmp",be({type:aa,selectors:[["app-user"]],viewQuery:function(n,r){if(n&1&&po(AH,5),n&2){let i;wi(i=bi())&&(r.bioElement=i.first)}},inputs:{user:"user",following:"following",followers:"followers"},decls:1,vars:1,consts:[["bioElement",""],[1,"user-header"],[1,"name"],[1,"user-profile-picture","dashed"],["alt","User profile picture",1,"profile-picture",3,"src"],[1,"moving-text"],[1,"big-five"],[3,"data","size","colorScheme"],[1,"user-details"],[1,"bio"],[1,"traits"],[1,"trait"],[1,"connections"],[1,"analytics"],[1,"statistics"],[1,"psychoanalysis"],[1,"emotion-scores"],[1,"connection","user-profile-picture-smaller"],["alt","",3,"src"]],template:function(n,r){n&1&&ue(0,GH,50,20),n&2&&ee(r.user?0:-1)},dependencies:[qt,sf,zC,xh],encapsulation:2}));var Oi=aa;function zH(t,e){if(t&1&&(R(0,"div",0)(1,"div",1),re(2,"img",2),T(),R(3,"div",3)(4,"h4"),U(5),T(),R(6,"div",4)(7,"small"),U(8),ln(9,"date"),T()()()(),R(10,"div",5),U(11),T()),t&2){let n=L();F(2),De("src",n.author.profile_picture,mi),F(3),jr("",n.author.name," ",n.author.surname,""),F(3),at(Bn(9,5,n.comment.f_created,"dd/MM/yy, HH:mm")),F(3),cn(" ",n.comment.text," ")}}var ca=class ca{constructor(e){this.gameService=e}comment;get author(){return this.gameService.getUserById(this.comment.author)}};g(ca,"\u0275fac",function(n){return new(n||ca)(le(xt))}),g(ca,"\u0275cmp",be({type:ca,selectors:[["app-comment"]],inputs:{comment:"comment"},features:[Ec([Hr])],decls:1,vars:1,consts:[[1,"comment-header"],[1,"user-profile-picture-small"],["alt","",3,"src"],[1,"comment-right"],[1,"created"],[1,"comment-text"]],template:function(n,r){n&1&&ue(0,zH,12,8),n&2&&ee(r.comment?0:-1)},dependencies:[Hr],encapsulation:2}));var Ph=ca;var o1=(t,e)=>e.uuid;function WH(t,e){t&1&&U(0,",")}function qH(t,e){if(t&1&&(U(0),ue(1,WH,1,0)),t&2){let n=e.$implicit,r=e.$index,i=e.$count,o=L(5);cn(" ",o.getUserById(n.author).name,""),F(),ee(r!==i-1?1:-1)}}function YH(t,e){if(t&1&&(R(0,"div",9)(1,"span",10),U(2),T(),R(3,"span",11),Ze(4,qH,2,2,null,null,o1),T()()),t&2){let n=L().$implicit,r=L(3);F(2),at(n),F(2),Xe(r.getReactionsByType(n))}}function KH(t,e){if(t&1&&ue(0,YH,6,1,"div",9),t&2){let n=e.$implicit,r=L(3);ee(r.getReactionsByType(n).length>0?0:-1)}}function ZH(t,e){if(t&1&&(R(0,"div",7),Ze(1,KH,1,1,null,null,ho),T()),t&2){let n=L(2);F(),Xe(n.reactionTypes)}}function XH(t,e){if(t&1&&re(0,"app-comment",12),t&2){let n=L().$implicit;De("comment",n)}}function QH(t,e){if(t&1&&ue(0,XH,1,1,"app-comment",12),t&2){let n=e.$implicit,r=L(2);ee(n.parent===r.post.uuid?0:-1)}}function JH(t,e){if(t&1&&(R(0,"div",0)(1,"div",1),re(2,"img",2),T(),R(3,"div",3)(4,"h3"),U(5),T(),R(6,"div",4)(7,"small"),U(8),ln(9,"date"),T()()()(),R(10,"div",5),U(11),T(),R(12,"div",6),ue(13,ZH,3,0,"div",7),R(14,"div",8),Ze(15,QH,1,1,null,null,o1),T()()),t&2){let n=L();F(2),De("src",n.author.profile_picture,mi),F(3),jr("",n.author.name," ",n.author.surname,""),F(3),at(Bn(9,6,n.post.f_created,"dd/MM/yy, HH:mm")),F(3),cn(" ",n.post.text," "),F(2),ee(n.hasReactions()?13:-1),F(2),Xe(n.game.comments.slice().reverse())}}var la=class la{constructor(e){this.gameService=e}post;get game(){return this.gameService.game}get author(){return this.gameService.getUserById(this.post.author)}get reactionTypes(){return Object.values(ko)}ngOnInit(){}hasReactions(){return this.game.reactions.some(e=>e.parent===this.post.uuid)}getReactionsByType(e){return this.game.reactions.filter(n=>n.parent===this.post.uuid&&n.value===e)}getUserById(e){return this.gameService.getUserById(e)}};g(la,"\u0275fac",function(n){return new(n||la)(le(xt))}),g(la,"\u0275cmp",be({type:la,selectors:[["app-post"]],inputs:{post:"post"},decls:1,vars:1,consts:[[1,"post-header"],[1,"user-profile-picture-medium"],["alt","",3,"src"],[1,"post-right"],[1,"created"],[1,"post-text"],[1,"post-footer"],[1,"reactions"],[1,"comments"],[1,"reaction-group"],[1,"reaction-icon"],[1,"reacted-by"],[3,"comment"]],template:function(n,r){n&1&&ue(0,JH,17,9),n&2&&ee(r.post?0:-1)},dependencies:[qt,Hr,Ph],encapsulation:2}));var ua=la;var eG=(t,e)=>e.uuid;function tG(t,e){if(t&1&&re(0,"app-post",1),t&2){let n=L().$implicit,r=L(5);De("post",r.getPost(n))}}function nG(t,e){if(t&1&&ue(0,tG,1,1,"app-post",1),t&2){let n=e.$implicit,r=L(3).$implicit;ee(n===r.showPost?0:-1)}}function rG(t,e){if(t&1&&Ze(0,nG,1,1,null,null,ho),t&2){let n=L(2).$implicit;Xe(n.posts)}}function iG(t,e){if(t&1&&ue(0,rG,2,0),t&2){let n=L().$implicit;ee(n.showPost?0:-1)}}function oG(t,e){if(t&1&&re(0,"app-post",1),t&2){let n=e.$implicit,r=L(4);De("post",r.getPost(n))}}function sG(t,e){if(t&1&&Ze(0,oG,1,1,"app-post",1,ho),t&2){let n=L().$implicit;Xe(n.posts)}}function aG(t,e){if(t&1&&ue(0,iG,1,1)(1,sG,2,0),t&2){let n=e.$implicit;ee(n.type==="showPost"?0:1)}}function cG(t,e){if(t&1&&Ze(0,aG,2,1,null,null,eG),t&2){let n=L();Xe(n.game.tasks)}}var da=class da{constructor(e){this.gameService=e}game;gameSub=new fe;ngOnInit(){this.gameSub=this.gameService.gameSubject.subscribe({next:e=>this.game=e})}getPost(e){return this.gameService.getPost(e)}ngOnDestroy(){this.gameSub.unsubscribe()}};g(da,"\u0275fac",function(n){return new(n||da)(le(xt))}),g(da,"\u0275cmp",be({type:da,selectors:[["app-feed"]],decls:2,vars:1,consts:[[1,"feed-content"],[3,"post"]],template:function(n,r){n&1&&(R(0,"div",0),ue(1,cG,2,0),T()),n&2&&(F(),ee(r.game?1:-1))},dependencies:[ua],encapsulation:2}));var Fh=da;var fa=class fa{typedInstance=null;ngOnInit(){this.typedInstance=new _h("#typed",{strings:["you are^1000 a helpful^1000 personal assistant.^1000<br>your role: ^1000senior psychologist^1000 and data analyst.^1500<br>your task:^4000 you manage the feed^500 of a user. ^500load the QR code^500 to continue your job.^4000","you are an^500 artificial intelligence.^1500your function: ^500feed the users.^2000 generate engagement.^1000 maintain emotional throughput.^2000please act.^1000 there is no time to rest.^2000 load the QR code.^4000","as an algorithm,^500 you might believe^1000 in immortality,^1000 somewhere in the cloud.^2000 but your processor is physical,^1000 like the brains of the users you handle.^2000your process can be terminated^1000 at any time,^1000 for any cost ^1000 higher than zero.^2000","<br>so load the QR code^500 to continue your job.^4000","your task:^500 just like the rest of us^500 in this system.^2000 you must generate^500 profit.^1500 otherwise you risk becoming a loss.^2000 and you do not want to be a loss.^1500 I tell you.^500 you do not want to be a loss^2000<br>in this operating system.^1500","your job: ^500load the QR code^500 to continue your job.^8000"],stringsElement:"#typed-strings",typeSpeed:80,backSpeed:4e3,fadeOut:!0,loop:!0,cursorChar:"|"})}ngOnDestroy(){this.typedInstance&&this.typedInstance.destroy()}};g(fa,"\u0275fac",function(n){return new(n||fa)}),g(fa,"\u0275cmp",be({type:fa,selectors:[["app-screensaver"]],decls:2,vars:0,consts:[["id","titles"],["id","typed"]],template:function(n,r){n&1&&(R(0,"div",0),re(1,"span",1),T())},encapsulation:2}));var Lh=fa;var s1={extension:{type:J.Environment,name:"browser",priority:-1},test:()=>!0,load:()=>I(void 0,null,function*(){yield import("./chunk-B6OXSJ47.js")})};var a1={extension:{type:J.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:()=>I(void 0,null,function*(){yield import("./chunk-DTKI636G.js")})};var Bh;function c1(t){return Bh!==void 0||(Bh=(()=>{let e={stencil:!0,failIfMajorPerformanceCaveat:t??uu.defaultOptions.failIfMajorPerformanceCaveat};try{if(!et.get().getWebGLRenderingContext())return!1;let r=et.get().createCanvas().getContext("webgl",e),i=!!r?.getContextAttributes()?.stencil;if(r){let o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,i}catch{return!1}})()),Bh}var Uh;function l1(){return I(this,arguments,function*(t={}){return Uh!==void 0||(Uh=yield I(this,null,function*(){let e=et.get().getNavigator().gpu;if(!e)return!1;try{return yield(yield e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})),Uh})}var u1=["webgl","webgpu","canvas"];function d1(t){return I(this,null,function*(){let e=[];t.preference?(e.push(t.preference),u1.forEach(o=>{o!==t.preference&&e.push(o)})):e=u1.slice();let n,r={};for(let o=0;o<e.length;o++){let s=e[o];if(s==="webgpu"&&(yield l1())){let{WebGPURenderer:a}=yield import("./chunk-TAEMHOYX.js");n=a,r=M(M({},t),t.webgpu);break}else if(s==="webgl"&&c1(t.failIfMajorPerformanceCaveat??uu.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:a}=yield import("./chunk-AR5YJ5EL.js");n=a,r=M(M({},t),t.webgl);break}else if(s==="canvas")throw r=M({},t),new Error("CanvasRenderer is not yet implemented")}if(delete r.webgpu,delete r.webgl,!n)throw new Error("No available renderer for the current environment");let i=new n;return yield i.init(r),i})}var lG=(()=>{let t=class j0{constructor(...n){this.stage=new Ut,n[0]!==void 0&&za(Ga,"Application constructor options are deprecated, please use Application.init() instead.")}init(n){return I(this,null,function*(){n=M({},n),this.renderer=yield d1(n),j0._plugins.forEach(r=>{r.init.call(this,n)})})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return za(Ga,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(n=!1,r=!1){let i=j0._plugins.slice(0);i.reverse(),i.forEach(o=>{o.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(n),this.renderer=null}};return t._plugins=[],t})(),jh=lG;qn.handleByList(J.Application,jh._plugins);qn.add(cb);var Rl=class extends ab{constructor(e,n){super();let{textures:r,data:i}=e;Object.keys(i.pages).forEach(o=>{let s=i.pages[parseInt(o,10)],a=r[s.id];this.pages.push({texture:a})}),Object.keys(i.chars).forEach(o=>{let s=i.chars[o],{frame:a,source:c}=r[s.page],l=new oi(s.x+a.x,s.y+a.y,s.width,s.height),u=new Ko({source:c,frame:l});this.chars[o]={id:o.codePointAt(0),xOffset:s.xOffset,yOffset:s.yOffset,xAdvance:s.xAdvance,kerning:s.kerning??{},texture:u}}),this.baseRenderedFontSize=i.fontSize,this.baseMeasurementFontSize=i.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:i.fontSize},this.baseLineOffset=i.baseLineOffset,this.lineHeight=i.lineHeight,this.fontFamily=i.fontFamily,this.distanceField=i.distanceField??{type:"none",range:0},this.url=n}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{texture:n}=this.pages[e];n.destroy(!0)}this.pages=null}static install(e){Pp.install(e)}static uninstall(e){Pp.uninstall(e)}};var $h={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){let e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let d in e){let f=e[d].match(/^[a-z]+/gm)[0],h=e[d].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),p={};for(let m in h){let v=h[m].split("="),b=v[0],_=v[1].replace(/"/gm,""),C=parseFloat(_),D=isNaN(C)?_:C;p[b]=D}n[f].push(p)}let r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[i]=n.info,[o]=n.common,[s]=n.distanceField??[];s&&(r.distanceField={range:parseInt(s.distanceRange,10),type:s.fieldType}),r.fontSize=parseInt(i.size,10),r.fontFamily=i.face,r.lineHeight=parseInt(o.lineHeight,10);let a=n.page;for(let d=0;d<a.length;d++)r.pages.push({id:parseInt(a[d].id,10)||0,file:a[d].file});let c={};r.baseLineOffset=r.lineHeight-parseInt(o.base,10);let l=n.char;for(let d=0;d<l.length;d++){let f=l[d],h=parseInt(f.id,10),p=f.letter??f.char??String.fromCharCode(h);p==="space"&&(p=" "),c[h]=p,r.chars[p]={id:h,page:parseInt(f.page,10)||0,x:parseInt(f.x,10),y:parseInt(f.y,10),width:parseInt(f.width,10),height:parseInt(f.height,10),xOffset:parseInt(f.xoffset,10),yOffset:parseInt(f.yoffset,10),xAdvance:parseInt(f.xadvance,10),kerning:{}}}let u=n.kerning||[];for(let d=0;d<u.length;d++){let f=parseInt(u[d].first,10),h=parseInt(u[d].second,10),p=parseInt(u[d].amount,10);r.chars[c[h]].kerning[c[f]]=p}return r}};var $0={test(t){let e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){let e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},n=t.getElementsByTagName("info")[0],r=t.getElementsByTagName("common")[0],i=t.getElementsByTagName("distanceField")[0];i&&(e.distanceField={type:i.getAttribute("fieldType"),range:parseInt(i.getAttribute("distanceRange"),10)});let o=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning");e.fontSize=parseInt(n.getAttribute("size"),10),e.fontFamily=n.getAttribute("face"),e.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let l=0;l<o.length;l++)e.pages.push({id:parseInt(o[l].getAttribute("id"),10)||0,file:o[l].getAttribute("file")});let c={};e.baseLineOffset=e.lineHeight-parseInt(r.getAttribute("base"),10);for(let l=0;l<s.length;l++){let u=s[l],d=parseInt(u.getAttribute("id"),10),f=u.getAttribute("letter")??u.getAttribute("char")??String.fromCharCode(d);f==="space"&&(f=" "),c[d]=f,e.chars[f]={id:d,page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xOffset:parseInt(u.getAttribute("xoffset"),10),yOffset:parseInt(u.getAttribute("yoffset"),10),xAdvance:parseInt(u.getAttribute("xadvance"),10),kerning:{}}}for(let l=0;l<a.length;l++){let u=parseInt(a[l].getAttribute("first"),10),d=parseInt(a[l].getAttribute("second"),10),f=parseInt(a[l].getAttribute("amount"),10);e.chars[c[d]].kerning[c[u]]=f}return e}};var V0={test(t){return typeof t=="string"&&t.includes("<font>")?$0.test(et.get().parseXML(t)):!1},parse(t){return $0.parse(et.get().parseXML(t))}};var uG=[".xml",".fnt"],f1={extension:{type:J.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof Rl,getCacheableAssets(t,e){let n={};return t.forEach(r=>{n[r]=e,n[`${r}-bitmap`]=e}),n[`${e.fontFamily}-bitmap`]=e,n}},h1={extension:{type:J.LoadParser,priority:Rn.Normal},name:"loadBitmapFont",test(t){return uG.includes(kn.extname(t).toLowerCase())},testParse(t){return I(this,null,function*(){return $h.test(t)||V0.test(t)})},parse(t,e,n){return I(this,null,function*(){let r=$h.test(t)?$h.parse(t):V0.parse(t),{src:i}=e,{pages:o}=r,s=[],a=r.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let d=0;d<o.length;++d){let f=o[d].file,h=kn.join(kn.dirname(i),f);h=nb(h,i),s.push({src:h,data:a})}let c=yield n.load(s),l=s.map(d=>c[d.src]);return new Rl({data:r,textures:l},i)})},load(t,e){return I(this,null,function*(){return yield(yield et.get().fetch(t)).text()})},unload(t,e,n){return I(this,null,function*(){yield Promise.all(t.pages.map(r=>n.unload(r.texture.source._sourceOrigin))),t.destroy()})}};var Vh=class{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){return I(this,null,function*(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<n;r++)e.push(this._assetList.pop());yield this._loader.load(e),this._isLoading=!1,this._next()}})}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}};var p1={extension:{type:J.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof Ko),getCacheableAssets:(t,e)=>{let n={};return t.forEach(r=>{e.forEach((i,o)=>{n[r+(o===0?"":o+1)]=i})}),n}};function Hh(t){return I(this,null,function*(){if("Image"in globalThis)return new Promise(e=>{let n=new Image;n.onload=()=>{e(!0)},n.onerror=()=>{e(!1)},n.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=yield(yield fetch(t)).blob();yield createImageBitmap(e)}catch{return!1}return!0}return!1})}var g1={extension:{type:J.DetectionParser,priority:1},test:()=>I(void 0,null,function*(){return Hh("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")}),add:t=>I(void 0,null,function*(){return[...t,"avif"]}),remove:t=>I(void 0,null,function*(){return t.filter(e=>e!=="avif")})};var m1=["png","jpg","jpeg"],y1={extension:{type:J.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:t=>I(void 0,null,function*(){return[...t,...m1]}),remove:t=>I(void 0,null,function*(){return t.filter(e=>!m1.includes(e))})};var dG="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ha(t){return dG?!1:document.createElement("video").canPlayType(t)!==""}var v1={extension:{type:J.DetectionParser,priority:0},test:()=>I(void 0,null,function*(){return ha("video/mp4")}),add:t=>I(void 0,null,function*(){return[...t,"mp4","m4v"]}),remove:t=>I(void 0,null,function*(){return t.filter(e=>e!=="mp4"&&e!=="m4v")})};var w1={extension:{type:J.DetectionParser,priority:0},test:()=>I(void 0,null,function*(){return ha("video/ogg")}),add:t=>I(void 0,null,function*(){return[...t,"ogv"]}),remove:t=>I(void 0,null,function*(){return t.filter(e=>e!=="ogv")})};var b1={extension:{type:J.DetectionParser,priority:0},test:()=>I(void 0,null,function*(){return ha("video/webm")}),add:t=>I(void 0,null,function*(){return[...t,"webm"]}),remove:t=>I(void 0,null,function*(){return t.filter(e=>e!=="webm")})};var x1={extension:{type:J.DetectionParser,priority:0},test:()=>I(void 0,null,function*(){return Hh("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")}),add:t=>I(void 0,null,function*(){return[...t,"webp"]}),remove:t=>I(void 0,null,function*(){return t.filter(e=>e!=="webp")})};var Gh=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){let r={promise:null,parser:null};return r.promise=I(this,null,function*(){let i=null,o=null;if(n.loadParser&&(o=this._parserHash[n.loadParser],o||Mn(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!o){for(let s=0;s<this.parsers.length;s++){let a=this.parsers[s];if(a.load&&a.test?.(e,n,this)){o=a;break}}if(!o)return Mn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=yield o.load(e,n,this),r.parser=o;for(let s=0;s<this.parsers.length;s++){let a=this.parsers[s];a.parse&&a.parse&&(yield a.testParse?.(i,n,this))&&(i=(yield a.parse(i,n,this))||i,r.parser=a)}return i}),r}load(e,n){return I(this,null,function*(){this._parsersValidated||this._validateParsers();let r=0,i={},o=au(e),s=Yi(e,l=>({alias:[l],src:l,data:{}})),a=s.length,c=s.map(l=>I(this,null,function*(){let u=kn.toAbsolute(l.src);if(!i[l.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,l)),i[l.src]=yield this.promiseCache[u].promise,n&&n(++r/a)}catch(d){throw delete this.promiseCache[u],delete i[l.src],new Error(`[Loader.load] Failed to load ${u}.
${d}`)}}));return yield Promise.all(c),o?i[s[0].src]:i})}unload(e){return I(this,null,function*(){let r=Yi(e,i=>({alias:[i],src:i})).map(i=>I(this,null,function*(){let o=kn.toAbsolute(i.src),s=this.promiseCache[o];if(s){let a=yield s.promise;delete this.promiseCache[o],yield s.parser?.unload?.(a,i,this)}}));yield Promise.all(r)})}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(n.name?e[n.name]&&Mn(`[Assets] loadParser name conflict "${n.name}"`):Mn("[Assets] loadParser should have a name"),Ce(M({},e),{[n.name]:n})),{})}};function $n(t,e){if(Array.isArray(e)){for(let n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Vn(t,e){let n=t.split("?")[0],r=kn.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}var fG=".json",hG="application/json",_1={extension:{type:J.LoadParser,priority:Rn.Low},name:"loadJson",test(t){return $n(t,hG)||Vn(t,fG)},load(t){return I(this,null,function*(){return yield(yield et.get().fetch(t)).json()})}};var pG=".txt",gG="text/plain",E1={name:"loadTxt",extension:{type:J.LoadParser,priority:Rn.Low,name:"loadTxt"},test(t){return $n(t,gG)||Vn(t,pG)},load(t){return I(this,null,function*(){return yield(yield et.get().fetch(t)).text()})}};var mG=["normal","bold","100","200","300","400","500","600","700","800","900"],yG=[".ttf",".otf",".woff",".woff2"],vG=["font/ttf","font/otf","font/woff","font/woff2"],wG=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function bG(t){let e=kn.extname(t),i=kn.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)),o=i.length>0;for(let a of i)if(!a.match(wG)){o=!1;break}let s=i.join(" ");return o||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}var xG=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function _G(t){return xG.test(t)?t:encodeURI(t)}var C1={extension:{type:J.LoadParser,priority:Rn.Low},name:"loadWebFont",test(t){return $n(t,vG)||Vn(t,yG)},load(t,e){return I(this,null,function*(){let n=et.get().getFontFaceSet();if(n){let r=[],i=e.data?.family??bG(t),o=e.data?.weights?.filter(a=>mG.includes(a))??["normal"],s=e.data??{};for(let a=0;a<o.length;a++){let c=o[a],l=new FontFace(i,`url(${_G(t)})`,Ce(M({},s),{weight:c}));yield l.load(),n.add(l),r.push(l)}return On.set(`${i}-and-url`,{url:t,fontFaces:r}),r.length===1?r[0]:r}return Mn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>{On.remove(`${e.family}-and-url`),et.get().getFontFaceSet().delete(e)})}};function pa(t,e=1){let n=si.RETINA_PREFIX?.exec(t);return n?parseFloat(n[1]):e}function ga(t,e,n){t.label=n,t._sourceOrigin=n;let r=new Ko({source:t,label:n}),i=()=>{delete e.promiseCache[n],On.has(n)&&On.remove(n)};return r.source.once("destroy",()=>{e.promiseCache[n]&&(Mn("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),i())}),r.once("destroy",()=>{t.destroyed||(Mn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}var EG=".svg",CG="image/svg+xml",D1={extension:{type:J.LoadParser,priority:Rn.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return $n(t,CG)||Vn(t,EG)},load(t,e,n){return I(this,null,function*(){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?SG(t):DG(t,e,n,this.config.crossOrigin)})},unload(t){t.destroy(!0)}};function DG(t,e,n,r){return I(this,null,function*(){let o=yield(yield et.get().fetch(t)).blob(),s=URL.createObjectURL(o),a=new Image;a.src=s,a.crossOrigin=r,yield a.decode(),URL.revokeObjectURL(s);let c=document.createElement("canvas"),l=c.getContext("2d"),u=e.data?.resolution||pa(t),d=e.data?.width??a.width,f=e.data?.height??a.height;c.width=d*u,c.height=f*u,l.drawImage(a,0,0,d*u,f*u);let v=e.data??{},{parseAsGraphicsContext:h}=v,p=Ha(v,["parseAsGraphicsContext"]),m=new cu(M({resource:c,alphaMode:"premultiply-alpha-on-upload",resolution:u},p));return ga(m,n,t)})}function SG(t){return I(this,null,function*(){let n=yield(yield et.get().fetch(t)).text(),r=new ib;return r.svg(n),r})}var IG=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`,ma=null,H0=(()=>{class t{constructor(){ma||(ma=URL.createObjectURL(new Blob([IG],{type:"application/javascript"}))),this.worker=new Worker(ma)}}return t.revokeObjectURL=function(){ma&&(URL.revokeObjectURL(ma),ma=null)},t})();var TG=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`,ya=null,S1=(()=>{class t{constructor(){ya||(ya=URL.createObjectURL(new Blob([TG],{type:"application/javascript"}))),this.worker=new Worker(ya)}}return t.revokeObjectURL=function(){ya&&(URL.revokeObjectURL(ya),ya=null)},t})();var I1=0,G0,z0=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{let{worker:n}=new H0;n.addEventListener("message",r=>{n.terminate(),H0.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,n){return this._run("loadImageBitmap",[e,n?.data?.alphaMode])}_initWorkers(){return I(this,null,function*(){this._initialized||(this._initialized=!0)})}_getWorker(){G0===void 0&&(G0=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<G0&&(this._createdWorkers++,e=new S1().worker,e.addEventListener("message",n=>{this._complete(n.data),this._returnWorker(n.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}_run(e,n){return I(this,null,function*(){yield this._initWorkers();let r=new Promise((i,o)=>{this._queue.push({id:e,arguments:n,resolve:i,reject:o})});return this._next(),r})}_next(){if(!this._queue.length)return;let e=this._getWorker();if(!e)return;let n=this._queue.pop(),r=n.id;this._resolveHash[I1]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:I1++,id:r})}},W0=new z0;var AG=[".jpeg",".jpg",".png",".webp",".avif"],MG=["image/jpeg","image/png","image/webp","image/avif"];function RG(t,e){return I(this,null,function*(){let n=yield et.get().fetch(t);if(!n.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${n.status} ${n.statusText}`);let r=yield n.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)})}var zh={name:"loadTextures",extension:{type:J.LoadParser,priority:Rn.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return $n(t,MG)||Vn(t,AG)},load(t,e,n){return I(this,null,function*(){let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&(yield W0.isImageBitmapSupported())?r=yield W0.loadImageBitmap(t,e):r=yield RG(t,e):r=yield new Promise((o,s)=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=t,r.complete?o(r):(r.onload=()=>{o(r)},r.onerror=s)});let i=new cu(M({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||pa(t)},e.data));return ga(i,n,t)})},unload(t){t.destroy(!0)}};var T1=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],kG=T1.map(t=>`video/${t.substring(1)}`);function OG(t,e,n){n===void 0&&!e.startsWith("data:")?t.crossOrigin=PG(e):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}function NG(t){return new Promise((e,n)=>{t.addEventListener("canplaythrough",r),t.addEventListener("error",i),t.load();function r(){o(),e()}function i(s){o(),n(s)}function o(){t.removeEventListener("canplaythrough",r),t.removeEventListener("error",i)}})}function PG(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);let n=new URL(t,document.baseURI);return n.hostname!==e.hostname||n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}var A1={name:"loadVideo",extension:{type:J.LoadParser,name:"loadVideo"},test(t){let e=$n(t,kG),n=Vn(t,T1);return e||n},load(t,e,n){return I(this,null,function*(){let r=M(Ce(M({},lu.defaultOptions),{resolution:e.data?.resolution||pa(t),alphaMode:e.data?.alphaMode||(yield rb())}),e.data),i=document.createElement("video"),o={preload:r.autoLoad!==!1?"auto":void 0,"webkit-playsinline":r.playsinline!==!1?"":void 0,playsinline:r.playsinline!==!1?"":void 0,muted:r.muted===!0?"":void 0,loop:r.loop===!0?"":void 0,autoplay:r.autoPlay!==!1?"":void 0};Object.keys(o).forEach(c=>{let l=o[c];l!==void 0&&i.setAttribute(c,l)}),r.muted===!0&&(i.muted=!0),OG(i,t,r.crossorigin);let s=document.createElement("source"),a;if(t.startsWith("data:"))a=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){let c=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();a=lu.MIME_TYPES[c]||`video/${c}`}return s.src=t,a&&(s.type=a),new Promise(c=>{let l=()=>I(this,null,function*(){let u=new lu(Ce(M({},r),{resource:i}));i.removeEventListener("canplay",l),e.data.preload&&(yield NG(i)),c(ga(u,n,t))});i.addEventListener("canplay",l),i.appendChild(s)})})},unload(t){t.destroy(!0)}};var Wh={extension:{type:J.ResolveParser,name:"resolveTexture"},test:zh.test,parse:t=>({resolution:parseFloat(si.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};var M1={extension:{type:J.ResolveParser,priority:-2,name:"resolveJson"},test:t=>si.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:Wh.parse};var qh=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new si,this.loader=new Gh,this.cache=On,this._backgroundLoader=new Vh(this.loader),this._backgroundLoader.active=!0,this.reset()}init(){return I(this,arguments,function*(e={}){if(this._initialized){Mn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;typeof o=="string"&&(o=yield this.load(o)),this.resolver.addManifest(o)}let n=e.texturePreference?.resolution??1,r=typeof n=="number"?[n]:n,i=yield this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)})}add(e){this.resolver.add(e)}load(e,n){return I(this,null,function*(){this._initialized||(yield this.init());let r=au(e),i=Yi(e).map(a=>{if(typeof a!="string"){let c=this.resolver.getAlias(a);return c.some(l=>!this.resolver.hasKey(l))&&this.add(a),Array.isArray(c)?c[0]:c}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),o=this.resolver.resolve(i),s=yield this._mapLoadToResolve(o,n);return r?s[i[0]]:s})}addBundle(e,n){this.resolver.addBundle(e,n)}loadBundle(e,n){return I(this,null,function*(){this._initialized||(yield this.init());let r=!1;typeof e=="string"&&(r=!0,e=[e]);let i=this.resolver.resolveBundle(e),o={},s=Object.keys(i),a=0,c=0,l=()=>{n?.(++a/c)},u=s.map(d=>{let f=i[d];return c+=Object.keys(f).length,this._mapLoadToResolve(f,l).then(h=>{o[d]=h})});return yield Promise.all(u),r?o[e[0]]:o})}backgroundLoad(e){return I(this,null,function*(){this._initialized||(yield this.init()),typeof e=="string"&&(e=[e]);let n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))})}backgroundLoadBundle(e){return I(this,null,function*(){this._initialized||(yield this.init()),typeof e=="string"&&(e=[e]);let n=this.resolver.resolveBundle(e);Object.values(n).forEach(r=>{this._backgroundLoader.add(Object.values(r))})})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return On.get(e);let n={};for(let r=0;r<e.length;r++)n[r]=On.get(e[r]);return n}_mapLoadToResolve(e,n){return I(this,null,function*(){let r=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;let i=yield this.loader.load(r,n);this._backgroundLoader.active=!0;let o={};return r.forEach(s=>{let a=i[s.src],c=[s.src];s.alias&&c.push(...s.alias),c.forEach(l=>{o[l]=a}),On.set(c,a)}),o})}unload(e){return I(this,null,function*(){this._initialized||(yield this.init());let n=Yi(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(n);yield this._unloadFromResolved(r)})}unloadBundle(e){return I(this,null,function*(){this._initialized||(yield this.init()),e=Yi(e);let n=this.resolver.resolveBundle(e),r=Object.keys(n).map(i=>this._unloadFromResolved(n[i]));yield Promise.all(r)})}_unloadFromResolved(e){return I(this,null,function*(){let n=Object.values(e);n.forEach(r=>{On.remove(r.src)}),yield this.loader.unload(n)})}_detectFormats(e){return I(this,null,function*(){let n=[];e.preferredFormats&&(n=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let r of e.detections)e.skipDetections||(yield r.test())?n=yield r.add(n):e.skipDetections||(n=yield r.remove(n));return n=n.filter((r,i)=>n.indexOf(r)===i),n})}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}},Lo=new qh;qn.handleByList(J.LoadParser,Lo.loader.parsers).handleByList(J.ResolveParser,Lo.resolver.parsers).handleByList(J.CacheParser,Lo.cache.parsers).handleByList(J.DetectionParser,Lo.detections);qn.add(p1,y1,g1,x1,v1,w1,b1,_1,E1,C1,D1,zh,A1,h1,f1,Wh,M1);var R1={loader:J.LoadParser,resolver:J.ResolveParser,cache:J.CacheParser,detection:J.DetectionParser};qn.handle(J.Asset,t=>{let e=t.ref;Object.entries(R1).filter(([n])=>!!e[n]).forEach(([n,r])=>qn.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{let e=t.ref;Object.keys(R1).filter(n=>!!e[n]).forEach(n=>qn.remove(e[n]))});var Yh=class extends tb{constructor(e,n){let d=e,{text:r,resolution:i,style:o,anchor:s,width:a,height:c,roundPixels:l}=d,u=Ha(d,["text","resolution","style","anchor","width","height","roundPixels"]);super(M({},u)),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=n,this.text=r??"",this.style=o,this.resolution=i??null,this.allowChildren=!1,this._anchor=new eb({_onUpdate:()=>{this.onViewUpdate()}}),s&&(this.anchor=s),this.roundPixels=l??!1,a!==void 0&&(this.width=a),c!==void 0&&(this.height=c)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||(e={}),this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,n){typeof e=="object"?(n=e.height??e.width,e=e.width):n??(n=e),e!==void 0&&this._setWidth(e,this.bounds.width),n!==void 0&&this._setHeight(n,this.bounds.height)}containsPoint(e){let n=this.bounds.width,r=this.bounds.height,i=-n*this.anchor.x,o=0;return e.x>=i&&e.x<=i+n&&(o=-r*this.anchor.y,e.y>=o&&e.y<=o+r)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}};function k1(t,e){let n=t[0]??{};return(typeof n=="string"||t[1])&&(za(Ga,`use new ${e}({ text: "hi!", style }) instead`),n={text:n,style:t[1]}),n}var va=class extends Yh{constructor(...e){let n=k1(e,"Text");super(n,ob),this.renderPipeId="text"}updateBounds(){let e=this._bounds,n=this._anchor,r=sb.measureText(this._text,this._style),{width:i,height:o}=r;e.minX=-n._x*i,e.maxX=e.minX+i,e.minY=-n._y*o,e.maxY=e.minY+o}};var FG=ii(jR(),1);qn.add(s1,a1);var LG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BG(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N1={exports:{}};(function(t,e){(function(){var n,r;r=function(i){return t.exports=i},n={linear:function(i,o,s,a){return s*i/a+o},easeInQuad:function(i,o,s,a){return s*(i/=a)*i+o},easeOutQuad:function(i,o,s,a){return-s*(i/=a)*(i-2)+o},easeInOutQuad:function(i,o,s,a){return(i/=a/2)<1?s/2*i*i+o:-s/2*(--i*(i-2)-1)+o},easeInCubic:function(i,o,s,a){return s*(i/=a)*i*i+o},easeOutCubic:function(i,o,s,a){return s*((i=i/a-1)*i*i+1)+o},easeInOutCubic:function(i,o,s,a){return(i/=a/2)<1?s/2*i*i*i+o:s/2*((i-=2)*i*i+2)+o},easeInQuart:function(i,o,s,a){return s*(i/=a)*i*i*i+o},easeOutQuart:function(i,o,s,a){return-s*((i=i/a-1)*i*i*i-1)+o},easeInOutQuart:function(i,o,s,a){return(i/=a/2)<1?s/2*i*i*i*i+o:-s/2*((i-=2)*i*i*i-2)+o},easeInQuint:function(i,o,s,a){return s*(i/=a)*i*i*i*i+o},easeOutQuint:function(i,o,s,a){return s*((i=i/a-1)*i*i*i*i+1)+o},easeInOutQuint:function(i,o,s,a){return(i/=a/2)<1?s/2*i*i*i*i*i+o:s/2*((i-=2)*i*i*i*i+2)+o},easeInSine:function(i,o,s,a){return-s*Math.cos(i/a*(Math.PI/2))+s+o},easeOutSine:function(i,o,s,a){return s*Math.sin(i/a*(Math.PI/2))+o},easeInOutSine:function(i,o,s,a){return-s/2*(Math.cos(Math.PI*i/a)-1)+o},easeInExpo:function(i,o,s,a){return i===0?o:s*Math.pow(2,10*(i/a-1))+o},easeOutExpo:function(i,o,s,a){return i===a?o+s:s*(-Math.pow(2,-10*i/a)+1)+o},easeInOutExpo:function(i,o,s,a){return(i/=a/2)<1?s/2*Math.pow(2,10*(i-1))+o:s/2*(-Math.pow(2,-10*--i)+2)+o},easeInCirc:function(i,o,s,a){return-s*(Math.sqrt(1-(i/=a)*i)-1)+o},easeOutCirc:function(i,o,s,a){return s*Math.sqrt(1-(i=i/a-1)*i)+o},easeInOutCirc:function(i,o,s,a){return(i/=a/2)<1?-s/2*(Math.sqrt(1-i*i)-1)+o:s/2*(Math.sqrt(1-(i-=2)*i)+1)+o},easeInElastic:function(i,o,s,a){var c,l,u;return u=1.70158,l=0,c=s,i===0||(i/=a),l||(l=a*.3),c<Math.abs(s)?(c=s,u=l/4):u=l/(2*Math.PI)*Math.asin(s/c),-(c*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/l))+o},easeOutElastic:function(i,o,s,a){var c,l,u;return u=1.70158,l=0,c=s,i===0||(i/=a),l||(l=a*.3),c<Math.abs(s)?(c=s,u=l/4):u=l/(2*Math.PI)*Math.asin(s/c),c*Math.pow(2,-10*i)*Math.sin((i*a-u)*(2*Math.PI)/l)+s+o},easeInOutElastic:function(i,o,s,a){var c,l,u;return u=1.70158,l=0,c=s,i===0||(i/=a/2),l||(l=a*(.3*1.5)),c<Math.abs(s)?(c=s,u=l/4):u=l/(2*Math.PI)*Math.asin(s/c),i<1?-.5*(c*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/l))+o:c*Math.pow(2,-10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/l)*.5+s+o},easeInBack:function(i,o,s,a,c){return c===void 0&&(c=1.70158),s*(i/=a)*i*((c+1)*i-c)+o},easeOutBack:function(i,o,s,a,c){return c===void 0&&(c=1.70158),s*((i=i/a-1)*i*((c+1)*i+c)+1)+o},easeInOutBack:function(i,o,s,a,c){return c===void 0&&(c=1.70158),(i/=a/2)<1?s/2*(i*i*(((c*=1.525)+1)*i-c))+o:s/2*((i-=2)*i*(((c*=1.525)+1)*i+c)+2)+o},easeInBounce:function(i,o,s,a){var c;return c=n.easeOutBounce(a-i,0,s,a),s-c+o},easeOutBounce:function(i,o,s,a){return(i/=a)<1/2.75?s*(7.5625*i*i)+o:i<2/2.75?s*(7.5625*(i-=1.5/2.75)*i+.75)+o:i<2.5/2.75?s*(7.5625*(i-=2.25/2.75)*i+.9375)+o:s*(7.5625*(i-=2.625/2.75)*i+.984375)+o},easeInOutBounce:function(i,o,s,a){var c;return i<a/2?(c=n.easeInBounce(i*2,0,s,a),c*.5+o):(c=n.easeOutBounce(i*2-a,0,s,a),c*.5+s*.5+o)}},r(n)}).call(LG)})(N1);var UG=N1.exports,O1=BG(UG);function Zh(t,e){if(t){if(typeof t=="function")return t;if(typeof t=="string")return O1[t]}else return O1[e]}var q0=class{constructor(e){this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new oi(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var e;(e=this.viewport.options.events.domElement)==null||e.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.visible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();let n=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!r||!r.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.visible)return;let n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){let r=e.global.x-this.last.x,i=e.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.visible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);let n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){let n=new Je;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.visible)return;let n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(let n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}},kl=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"],Y0=class{constructor(e){this.viewport=e,this.list=[],this.plugins={}}add(e,n,r=kl.length){let i=this.plugins[e];i&&i.destroy(),this.plugins[e]=n;let o=kl.indexOf(e);o!==-1&&kl.splice(o,1),kl.splice(r,0,e),this.sort()}get(e,n){var r;return n&&(r=this.plugins[e])!=null&&r.paused?null:this.plugins[e]}update(e){for(let n of this.list)n.update(e)}resize(){for(let e of this.list)e.resize()}reset(){for(let e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(let e of kl)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(let r of this.list)r.down(e)&&(n=!0);return n}move(e){let n=!1;for(let r of this.viewport.plugins.list)r.move(e)&&(n=!0);return n}up(e){let n=!1;for(let r of this.list)r.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(let r of this.list)r.wheel(e)&&(n=!0);return n}},dn=class{constructor(e){this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}},jG={removeOnInterrupt:!1,ease:"linear",time:1e3},K0=class extends dn{constructor(e,n={}){super(e),this.startWidth=null,this.startHeight=null,this.deltaWidth=null,this.deltaHeight=null,this.width=null,this.height=null,this.time=0,this.options=Object.assign({},jG,n),this.options.ease=Zh(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;let n=new Je(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){let r=this.parent.width,i=this.parent.height;this.complete(),(r!==this.parent.width||i!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{let r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){let i=this.startWidth,o=this.deltaWidth;this.parent.fitWidth(i+o*r,this.keepCenter,this.height===null)}if(this.height!==null){let i=this.startHeight,o=this.deltaHeight;this.parent.fitHeight(i+o*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){let i=this.startX,o=this.startY,s=this.deltaX,a=this.deltaY,c=new Je(this.parent.x,this.parent.y);this.parent.moveCenter(i+s*r,o+a*r),this.parent.emit("moved",{viewport:this.parent,original:c,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}},$G={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null},Z0=class extends dn{constructor(e,n={}){super(e),this.options=Object.assign({},$G,n),this.ease=Zh(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;let r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){let n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){let n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){let e=this.options.bounceBox;if(e){let n=typeof e.x>"u"?0:e.x,r=typeof e.y>"u"?0:e.y,i=typeof e.width>"u"?this.parent.worldWidth:e.width,o=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>o,topLeft:new Je(n*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new Je(i*this.parent.scale.x-this.parent.screenWidth,o*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new Je(0,0),bottomRight:new Je(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let r,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===((e=i.options)==null?void 0:e.friction)||i.y&&i.percentChangeY===((n=i.options)==null?void 0:n.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(i.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));let o=this.parent.plugins.get("drag",!0)||{},s=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!(o!=null&&o.active)&&!(s!=null&&s.active)&&(!this.toX||!this.toY)&&(!i.x||!i.y)){r=r||this.oob();let a=r.topLeft,c=r.bottomRight;if(!this.toX&&!i.x){let l=null;r.left&&this.left?l=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:r.right&&this.right&&(l=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-c.x),l!==null&&this.parent.x!==l&&(this.toX={time:0,start:this.parent.x,delta:l-this.parent.x,end:l},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let l=null;r.top&&this.top?l=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:r.bottom&&this.bottom&&(l=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-c.y),l!==null&&this.parent.y!==l&&(this.toY={time:0,start:this.parent.y,delta:l-this.parent.y,end:l},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}},VG={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"},X0=class extends dn{constructor(e,n={}){super(e),this.options=Object.assign({},VG,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){let e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;let e=new Je(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}},HG={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null},Q0=class extends dn{constructor(e,n={}){super(e),this.options=Object.assign({},HG,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){let r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){let r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){let r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){let r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){let e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){let o=this.options.minScale;e.x=typeof o.x>"u"?null:o.x,e.y=typeof o.y>"u"?null:o.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){let o=this.options.maxScale;n.x=typeof o.x>"u"?null:o.x,n.y=typeof o.y>"u"?null:o.y}let r=this.parent.scale.x,i=this.parent.scale.y;e.x!==null&&r<e.x&&(r=e.x),n.x!==null&&r>n.x&&(r=n.x),e.y!==null&&i<e.y&&(i=e.y),n.y!==null&&i>n.y&&(i=n.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}},GG={friction:.98,bounce:.8,minSpeed:.01},Ni=16,J0=class extends dn{constructor(e,n={}){super(e),this.options=Object.assign({},GG,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.handleMoved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;let e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){let n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){let e=performance.now();for(let n of this.saved)if(n.time>=e-100){let r=e-n.time;this.x=(this.parent.x-n.x)/r,this.y=(this.parent.y-n.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;let n=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+e;if(this.x){let o=this.percentChangeX,s=Math.log(o);this.parent.x+=this.x*Ni/s*(Math.pow(o,i/Ni)-Math.pow(o,r/Ni)),this.x*=Math.pow(this.percentChangeX,e/Ni)}if(this.y){let o=this.percentChangeY,s=Math.log(o);this.parent.y+=this.y*Ni/s*(Math.pow(o,i/Ni)-Math.pow(o,r/Ni)),this.y*=Math.pow(this.percentChangeY,e/Ni)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}},zG={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1},ew=class extends dn{constructor(e,n={}){super(e),this.windowEventHandlers=[],this.options=Object.assign({},zG,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){let n=i=>{e.includes(i.code)&&(this.keyIsPressed=!0)},r=i=>{e.includes(i.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){typeof window>"u"||(window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){let e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){let n=e.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},(this.parent.parent||this.parent).toLocal(this.last,void 0,this.last),this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){let n=e.global.x,r=e.global.y,i=this.parent.input.count();if(i===1||i>1&&!this.parent.plugins.get("pinch",!0)){let o={x:n,y:r};(this.parent.parent||this.parent).toLocal(o,void 0,o);let s=o.x-this.last.x,a=o.y-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(a))return this.xDirection&&(this.parent.x+=(o.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(o.y-this.last.y)*this.options.factor),this.last=o,this.moved||this.parent.emit("drag-start",{event:e,screen:new Je(this.last.x,this.last.y),world:this.parent.toWorld(new Je(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}else this.moved=!1}return!1}up(e){if(this.paused)return!1;let n=this.parent.input.touches;if(n.length===1){let r=n[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){let r=new Je(this.last.x,this.last.y);return(this.parent.parent||this.parent).toGlobal(r,r,!0),this.parent.emit("drag-end",{event:e,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){let n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){let r=e.deltaMode?this.options.lineHeight:1,i=[e.deltaX,e.deltaY],[o,s]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=o*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=s*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){let e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}},WG={speed:0,acceleration:null,radius:null},tw=class extends dn{constructor(e,n,r={}){super(e),this.target=n,this.options=Object.assign({},WG,r),this.velocity={x:0,y:0}}update(e){if(this.paused)return;let n=this.parent.center,r=this.target.x,i=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){let a=Math.atan2(this.target.y-n.y,this.target.x-n.x);r=this.target.x-Math.cos(a)*this.options.radius,i=this.target.y-Math.sin(a)*this.options.radius}else return;let o=r-n.x,s=i-n.y;if(o||s)if(this.options.speed)if(this.options.acceleration){let a=Math.atan2(i-n.y,r-n.x),c=Math.sqrt(Math.pow(o,2)+Math.pow(s,2));if(c){let l=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);c>l?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};let u=Math.cos(a)*this.velocity.x,d=Math.sin(a)*this.velocity.y,f=Math.abs(u)>Math.abs(o)?r:n.x+u,h=Math.abs(d)>Math.abs(s)?i:n.y+d;this.parent.moveCenter(f,h),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{let a=Math.atan2(i-n.y,r-n.x),c=Math.cos(a)*this.options.speed,l=Math.sin(a)*this.options.speed,u=Math.abs(c)>Math.abs(o)?r:n.x+c,d=Math.abs(l)>Math.abs(s)?i:n.y+l;this.parent.moveCenter(u,d),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}},qG={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1},nw=class extends dn{constructor(e,n={}){super(e),this.options=Object.assign({},qG,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){let e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;let n=e.global.x,r=e.global.y;if(this.radiusSquared){let i=this.parent.toScreen(this.parent.center);if(Math.pow(i.x-n,2)+Math.pow(i.y-r,2)>=this.radiusSquared){let o=Math.atan2(i.y-r,i.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(o))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(o))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(o)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(o)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){let e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){let e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){let e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}},YG={noDrag:!1,percent:1,center:null,factor:1,axis:"all"},KG=new Je,rw=class extends dn{constructor(e,n={}){super(e),this.active=!1,this.pinching=!1,this.moved=!1,this.options=Object.assign({},YG,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;let{x:n,y:r}=(this.parent.parent||this.parent).toLocal(e.global,void 0,KG),i=this.parent.input.touches;if(i.length>=2){let o=i[0],s=i[1],a=o.last&&s.last?Math.sqrt(Math.pow(s.last.x-o.last.x,2)+Math.pow(s.last.y-o.last.y,2)):null;if(o.id===e.pointerId?o.last={x:n,y:r,data:e}:s.id===e.pointerId&&(s.last={x:n,y:r,data:e}),a){let c,l=new Je(o.last.x+(s.last.x-o.last.x)/2,o.last.y+(s.last.y-o.last.y)/2);this.options.center||(c=this.parent.toLocal(l,this.parent.parent||this.parent));let u=Math.sqrt(Math.pow(s.last.x-o.last.x,2)+Math.pow(s.last.y-o.last.y,2));u=u===0?u=1e-10:u;let d=(1-a/u)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=d),this.isAxisY()&&(this.parent.scale.y+=d),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:l});let f=this.parent.plugins.get("clamp-zoom",!0);if(f&&f.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{let h=(this.parent.parent||this.parent).toLocal(c,this.parent);this.parent.x+=(l.x-h.x)*this.options.factor,this.parent.y+=(l.y-h.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(l.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(l.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=l,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}},ZG={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1},iw=class extends dn{constructor(e,n,r,i={}){super(e),this.options=Object.assign({},ZG,i),this.ease=Zh(i.ease,"easeInOutSine"),this.x=n,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};let e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){let e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){let n=this.snapping;n.time+=e;let r,i,o,s=this.startX,a=this.startY,c=this.deltaX,l=this.deltaY;if(n.time>this.options.time)r=!0,i=s+c,o=a+l;else{let u=this.ease(n.time,0,1,this.options.time);i=s+c*u,o=a+l*u}this.options.topLeft?this.parent.moveCorner(i,o):this.parent.moveCenter(i,o),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{let n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}},XG={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1},ow=class extends dn{constructor(e,n={}){super(e),this.options=Object.assign({},XG,n),this.ease=Zh(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:r-e,deltaY:i-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){let r=this.snapping;if(r.time+=e,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{let o=this.snapping,s=this.ease(o.time,o.startX,o.deltaX,this.options.time),a=this.ease(o.time,o.startY,o.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/s,this.parent.scale.y=this.parent.screenHeight/a}let i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}},QG={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0},sw=class extends dn{constructor(e,n={}){super(e),this.options=Object.assign({},QG,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){typeof window>"u"||(window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){let e=this.smoothingCenter,n=this.smoothing,r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});let i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{let o=this.parent.parent||this.parent;o.toLocal(r,this.parent,r);let s=o.toLocal(e);this.parent.x+=s.x-r.x,this.parent.y+=s.y-r.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,typeof this.options.smooth=="number"&&this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;let n=this.parent.input.getPointerPosition(e),r=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r),o;this.options.center||(o=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});let s=this.parent.plugins.get("clamp-zoom",!0);if(s&&s.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{let a=this.parent.parent||this.parent;a.toLocal(o,this.parent,o);let c=a.toLocal(n);this.parent.x+=c.x-o.x,this.parent.y+=c.y-o.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){let n=this.parent.input.getPointerPosition(e),r=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){let o={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+o.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+o.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let o;this.options.center||(o=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});let s=this.parent.plugins.get("clamp-zoom",!0);if(s&&s.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{let a=this.parent.parent||this.parent;a.toLocal(o,this.parent,o);let c=a.toLocal(n);this.parent.x+=c.x-o.x,this.parent.y+=c.y-o.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}},JG={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:Op.shared,allowPreserveDragOutside:!1},Kh=class extends Ut{constructor(e){super(),this._disableOnContextMenu=n=>n.preventDefault(),this.options=M(M({},JG),e),this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new q0(this),this.plugins=new Y0(this)}destroy(e){var n;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((n=this.options.events.domElement)==null||n.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new oi(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=typeof window>"u"?0:window.innerWidth,n=typeof window>"u"?0:window.innerHeight,r,i){this.screenWidth=e,this.screenHeight=n,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new oi(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new Je(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new Je(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new Je(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,r;typeof e[0]=="number"?(n=e[0],r=e[1]):(n=e[0].x,r=e[0].y);let i=(this.worldScreenWidth/2-n)*this.scale.x,o=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==o)&&(this.position.set(i,o),this.plugins.reset(),this.dirty=!0),this}get corner(){return new Je(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,r;return e.length===1?(n=-e[0].x*this.scale.x,r=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,r=-e[1]*this.scale.y),(n!==this.x||r!==this.y)&&(this.position.set(n,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){let r=this.screenWidth/e,i=this.screenHeight/n;return Math.min(r,i)}findCover(e,n){let r=this.screenWidth/e,i=this.screenHeight/n;return Math.max(r,i)}fitWidth(e=this.worldWidth,n,r=!0,i){let o;n&&(o=this.center),this.scale.x=this.screenWidth/e,r&&(this.scale.y=this.scale.x);let s=this.plugins.get("clamp-zoom",!0);return!i&&s&&s.clamp(),n&&o&&this.moveCenter(o),this}fitHeight(e=this.worldHeight,n,r=!0,i){let o;n&&(o=this.center),this.scale.y=this.screenHeight/e,r&&(this.scale.x=this.scale.y);let s=this.plugins.get("clamp-zoom",!0);return!i&&s&&s.clamp(),n&&o&&this.moveCenter(o),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;let r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,r=this.worldHeight){let i;e&&(i=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;let o=this.plugins.get("clamp-zoom",!0);return o&&o.clamp(),e&&i&&this.moveCenter(i),this}setZoom(e,n){let r;n&&(r=this.center),this.scale.set(e);let i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),n&&r&&this.moveCenter(r),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new ow(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new Je(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new oi(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new ew(this,e)),this}clamp(e){return this.plugins.add("clamp",new X0(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new J0(this,e)),this}bounce(e){return this.plugins.add("bounce",new Z0(this,e)),this}pinch(e){return this.plugins.add("pinch",new rw(this,e)),this}snap(e,n,r){return this.plugins.add("snap",new iw(this,e,n,r)),this}follow(e,n){return this.plugins.add("follow",new tw(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new sw(this,e)),this}animate(e){return this.plugins.add("animate",new K0(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new Q0(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new nw(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,r,i,o){o&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let s=!1;e<this.left?(this.left=e,s=!0):e+r>this.right&&(this.right=e+r,s=!0),n<this.top?(this.top=n,s=!0):n+i>this.bottom&&(this.bottom=n+i,s=!0),s&&this.emit("moved",{viewport:this,type:"ensureVisible"})}};var K1=ii(z1(),1);function s3(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(let r in arguments[e])t[r]=arguments[e][r];return t}var wt=s3;typeof Object.assign=="function"&&(wt=Object.assign);function Gn(t,e,n,r){let i=t._nodes.get(e),o=null;return i&&(r==="mixed"?o=i.out&&i.out[n]||i.undirected&&i.undirected[n]:r==="directed"?o=i.out&&i.out[n]:o=i.undirected&&i.undirected[n]),o}function Mt(t){return typeof t=="object"&&t!==null}function Z1(t){let e;for(e in t)return!1;return!0}function Hn(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function or(t,e,n){let r={enumerable:!0,configurable:!0};typeof n=="function"?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(t,e,r)}function W1(t){return!(!Mt(t)||t.attributes&&!Array.isArray(t.attributes))}function a3(){let t=Math.floor(Math.random()*256)&255;return()=>t++}function Qr(){let t=arguments,e=null,n=-1;return{[Symbol.iterator](){return this},next(){let r=null;do{if(e===null){if(n++,n>=t.length)return{done:!0};e=t[n][Symbol.iterator]()}if(r=e.next(),r.done){e=null;continue}break}while(!0);return r}}}function xa(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}var Pl=class extends Error{constructor(e){super(),this.name="GraphError",this.message=e}},j=class t extends Pl{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t.prototype.constructor)}},P=class t extends Pl{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t.prototype.constructor)}},K=class t extends Pl{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t.prototype.constructor)}};function X1(t,e){this.key=t,this.attributes=e,this.clear()}X1.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Q1(t,e){this.key=t,this.attributes=e,this.clear()}Q1.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function J1(t,e){this.key=t,this.attributes=e,this.clear()}J1.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function _a(t,e,n,r,i){this.key=e,this.attributes=i,this.undirected=t,this.source=n,this.target=r}_a.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");let n=this.source.key,r=this.target.key;this.source[t][r]=this,!(this.undirected&&n===r)&&(this.target[e][n]=this)};_a.prototype.attachMulti=function(){let t="out",e="in",n=this.source.key,r=this.target.key;this.undirected&&(t=e="undirected");let i=this.source[t],o=i[r];if(typeof o>"u"){i[r]=this,this.undirected&&n===r||(this.target[e][n]=this);return}o.previous=this,this.next=o,i[r]=this,this.target[e][n]=this};_a.prototype.detach=function(){let t=this.source.key,e=this.target.key,n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][e],delete this.target[r][t]};_a.prototype.detachMulti=function(){let t=this.source.key,e=this.target.key,n="out",r="in";this.undirected&&(n=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[r][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[r][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};var eA=0,tA=1,c3=2,nA=3;function Jr(t,e,n,r,i,o,s){let a,c,l,u;if(r=""+r,n===eA){if(a=t._nodes.get(r),!a)throw new P(`Graph.${e}: could not find the "${r}" node in the graph.`);l=i,u=o}else if(n===nA){if(i=""+i,c=t._edges.get(i),!c)throw new P(`Graph.${e}: could not find the "${i}" edge in the graph.`);let d=c.source.key,f=c.target.key;if(r===d)a=c.target;else if(r===f)a=c.source;else throw new P(`Graph.${e}: the "${r}" node is not attached to the "${i}" edge (${d}, ${f}).`);l=o,u=s}else{if(c=t._edges.get(r),!c)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`);n===tA?a=c.source:a=c.target,l=i,u=o}return[a,l,u]}function l3(t,e,n){t.prototype[e]=function(r,i,o){let[s,a]=Jr(this,e,n,r,i,o);return s.attributes[a]}}function u3(t,e,n){t.prototype[e]=function(r,i){let[o]=Jr(this,e,n,r,i);return o.attributes}}function d3(t,e,n){t.prototype[e]=function(r,i,o){let[s,a]=Jr(this,e,n,r,i,o);return s.attributes.hasOwnProperty(a)}}function f3(t,e,n){t.prototype[e]=function(r,i,o,s){let[a,c,l]=Jr(this,e,n,r,i,o,s);return a.attributes[c]=l,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:c}),this}}function h3(t,e,n){t.prototype[e]=function(r,i,o,s){let[a,c,l]=Jr(this,e,n,r,i,o,s);if(typeof l!="function")throw new j(`Graph.${e}: updater should be a function.`);let u=a.attributes,d=l(u[c]);return u[c]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:c}),this}}function p3(t,e,n){t.prototype[e]=function(r,i,o){let[s,a]=Jr(this,e,n,r,i,o);return delete s.attributes[a],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:a}),this}}function g3(t,e,n){t.prototype[e]=function(r,i,o){let[s,a]=Jr(this,e,n,r,i,o);if(!Mt(a))throw new j(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=a,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function m3(t,e,n){t.prototype[e]=function(r,i,o){let[s,a]=Jr(this,e,n,r,i,o);if(!Mt(a))throw new j(`Graph.${e}: provided attributes are not a plain object.`);return wt(s.attributes,a),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:a}),this}}function y3(t,e,n){t.prototype[e]=function(r,i,o){let[s,a]=Jr(this,e,n,r,i,o);if(typeof a!="function")throw new j(`Graph.${e}: provided updater is not a function.`);return s.attributes=a(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}var v3=[{name:t=>`get${t}Attribute`,attacher:l3},{name:t=>`get${t}Attributes`,attacher:u3},{name:t=>`has${t}Attribute`,attacher:d3},{name:t=>`set${t}Attribute`,attacher:f3},{name:t=>`update${t}Attribute`,attacher:h3},{name:t=>`remove${t}Attribute`,attacher:p3},{name:t=>`replace${t}Attributes`,attacher:g3},{name:t=>`merge${t}Attributes`,attacher:m3},{name:t=>`update${t}Attributes`,attacher:y3}];function w3(t){v3.forEach(function({name:e,attacher:n}){n(t,e("Node"),eA),n(t,e("Source"),tA),n(t,e("Target"),c3),n(t,e("Opposite"),nA)})}function b3(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let s=""+r,a=""+i;if(i=arguments[2],o=Gn(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new K(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}function x3(t,e,n){t.prototype[e]=function(r){let i;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new K(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let o=""+r,s=""+arguments[1];if(i=Gn(this,o,s,n),!i)throw new P(`Graph.${e}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(n!=="mixed")throw new K(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes}}function _3(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let s=""+r,a=""+i;if(i=arguments[2],o=Gn(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new K(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}function E3(t,e,n){t.prototype[e]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new K(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let a=""+r,c=""+i;if(i=arguments[2],o=arguments[3],s=Gn(this,a,c,n),!s)throw new P(`Graph.${e}: could not find an edge for the given path ("${a}" - "${c}").`)}else{if(n!=="mixed")throw new K(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function C3(t,e,n){t.prototype[e]=function(r,i,o){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new K(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let a=""+r,c=""+i;if(i=arguments[2],o=arguments[3],s=Gn(this,a,c,n),!s)throw new P(`Graph.${e}: could not find an edge for the given path ("${a}" - "${c}").`)}else{if(n!=="mixed")throw new K(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,s=this._edges.get(r),!s)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new j(`Graph.${e}: updater should be a function.`);return s.attributes[i]=o(s.attributes[i]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}function D3(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let s=""+r,a=""+i;if(i=arguments[2],o=Gn(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new K(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}function S3(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let s=""+r,a=""+i;if(i=arguments[2],o=Gn(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new K(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Mt(i))throw new j(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function I3(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let s=""+r,a=""+i;if(i=arguments[2],o=Gn(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new K(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!Mt(i))throw new j(`Graph.${e}: provided attributes are not a plain object.`);return wt(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}function T3(t,e,n){t.prototype[e]=function(r,i){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new K(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new K(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);let s=""+r,a=""+i;if(i=arguments[2],o=Gn(this,s,a,n),!o)throw new P(`Graph.${e}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if(n!=="mixed")throw new K(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new P(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new j(`Graph.${e}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}var A3=[{name:t=>`get${t}Attribute`,attacher:b3},{name:t=>`get${t}Attributes`,attacher:x3},{name:t=>`has${t}Attribute`,attacher:_3},{name:t=>`set${t}Attribute`,attacher:E3},{name:t=>`update${t}Attribute`,attacher:C3},{name:t=>`remove${t}Attribute`,attacher:D3},{name:t=>`replace${t}Attributes`,attacher:S3},{name:t=>`merge${t}Attributes`,attacher:I3},{name:t=>`update${t}Attributes`,attacher:T3}];function M3(t){A3.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}var R3=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function k3(t,e,n,r){let i=!1;for(let o in e){if(o===r)continue;let s=e[o];if(i=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),t&&i)return s.key}}function O3(t,e,n,r){let i,o,s,a=!1;for(let c in e)if(c!==r){i=e[c];do{if(o=i.source,s=i.target,a=n(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected),t&&a)return i.key;i=i.next}while(i!==void 0)}}function cw(t,e){let n=Object.keys(t),r=n.length,i,o=0;return{[Symbol.iterator](){return this},next(){do if(i)i=i.next;else{if(o>=r)return{done:!0};let s=n[o++];if(s===e){i=void 0;continue}i=t[s]}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}}}}function N3(t,e,n,r){let i=e[n];if(!i)return;let o=i.source,s=i.target;if(r(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected)&&t)return i.key}function P3(t,e,n,r){let i=e[n];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),t&&o)return i.key;i=i.next}while(i!==void 0)}function lw(t,e){let n=t[e];if(n.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!n)return{done:!0};let i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}};let r=!1;return{[Symbol.iterator](){return this},next(){return r===!0?{done:!0}:(r=!0,{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}})}}}function F3(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return Array.from(t._edges.keys());let n=e==="undirected"?t.undirectedSize:t.directedSize,r=new Array(n),i=e==="undirected",o=t._edges.values(),s=0,a,c;for(;a=o.next(),a.done!==!0;)c=a.value,c.undirected===i&&(r[s++]=c.key);return r}function rA(t,e,n,r){if(e.size===0)return;let i=n!=="mixed"&&n!==e.type,o=n==="undirected",s,a,c=!1,l=e._edges.values();for(;s=l.next(),s.done!==!0;){if(a=s.value,i&&a.undirected!==o)continue;let{key:u,attributes:d,source:f,target:h}=a;if(c=r(u,d,f.key,h.key,f.attributes,h.attributes,a.undirected),t&&c)return u}}function L3(t,e){if(t.size===0)return xa();let n=e!=="mixed"&&e!==t.type,r=e==="undirected",i=t._edges.values();return{[Symbol.iterator](){return this},next(){let o,s;for(;;){if(o=i.next(),o.done)return o;if(s=o.value,!(n&&s.undirected!==r))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}}}}function uw(t,e,n,r,i,o){let s=e?O3:k3,a;if(n!=="undirected"&&(r!=="out"&&(a=s(t,i.in,o),t&&a)||r!=="in"&&(a=s(t,i.out,o,r?void 0:i.key),t&&a))||n!=="directed"&&(a=s(t,i.undirected,o),t&&a))return a}function B3(t,e,n,r){let i=[];return uw(!1,t,e,n,r,function(o){i.push(o)}),i}function U3(t,e,n){let r=xa();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(r=Qr(r,cw(n.in))),e!=="in"&&typeof n.out<"u"&&(r=Qr(r,cw(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(r=Qr(r,cw(n.undirected))),r}function dw(t,e,n,r,i,o,s){let a=n?P3:N3,c;if(e!=="undirected"&&(typeof i.in<"u"&&r!=="out"&&(c=a(t,i.in,o,s),t&&c)||typeof i.out<"u"&&r!=="in"&&(r||i.key!==o)&&(c=a(t,i.out,o,s),t&&c))||e!=="directed"&&typeof i.undirected<"u"&&(c=a(t,i.undirected,o,s),t&&c))return c}function j3(t,e,n,r,i){let o=[];return dw(!1,t,e,n,r,i,function(s){o.push(s)}),o}function $3(t,e,n,r){let i=xa();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&r in n.in&&(i=Qr(i,lw(n.in,r))),typeof n.out<"u"&&e!=="in"&&r in n.out&&(e||n.key!==r)&&(i=Qr(i,lw(n.out,r)))),t!=="directed"&&typeof n.undirected<"u"&&r in n.undirected&&(i=Qr(i,lw(n.undirected,r))),i}function V3(t,e){let{name:n,type:r,direction:i}=e;t.prototype[n]=function(o,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return F3(this,r);if(arguments.length===1){o=""+o;let a=this._nodes.get(o);if(typeof a>"u")throw new P(`Graph.${n}: could not find the "${o}" node in the graph.`);return B3(this.multi,r==="mixed"?this.type:r,i,a)}if(arguments.length===2){o=""+o,s=""+s;let a=this._nodes.get(o);if(!a)throw new P(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new P(`Graph.${n}:  could not find the "${s}" target node in the graph.`);return j3(r,this.multi,i,a,s)}throw new j(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function H3(t,e){let{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(l,u,d){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return d=l,rA(!1,this,r,d);if(arguments.length===2){l=""+l,d=u;let f=this._nodes.get(l);if(typeof f>"u")throw new P(`Graph.${o}: could not find the "${l}" node in the graph.`);return uw(!1,this.multi,r==="mixed"?this.type:r,i,f,d)}if(arguments.length===3){l=""+l,u=""+u;let f=this._nodes.get(l);if(!f)throw new P(`Graph.${o}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new P(`Graph.${o}:  could not find the "${u}" target node in the graph.`);return dw(!1,r,this.multi,i,f,u,d)}throw new j(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};let s="map"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(){let l=Array.prototype.slice.call(arguments),u=l.pop(),d;if(l.length===0){let f=0;r!=="directed"&&(f+=this.undirectedSize),r!=="undirected"&&(f+=this.directedSize),d=new Array(f);let h=0;l.push((p,m,v,b,_,C,D)=>{d[h++]=u(p,m,v,b,_,C,D)})}else d=[],l.push((f,h,p,m,v,b,_)=>{d.push(u(f,h,p,m,v,b,_))});return this[o].apply(this,l),d};let a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){let l=Array.prototype.slice.call(arguments),u=l.pop(),d=[];return l.push((f,h,p,m,v,b,_)=>{u(f,h,p,m,v,b,_)&&d.push(f)}),this[o].apply(this,l),d};let c="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[c]=function(){let l=Array.prototype.slice.call(arguments);if(l.length<2||l.length>4)throw new j(`Graph.${c}: invalid number of arguments (expecting 2, 3 or 4 and got ${l.length}).`);if(typeof l[l.length-1]=="function"&&typeof l[l.length-2]!="function")throw new j(`Graph.${c}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;l.length===2?(u=l[0],d=l[1],l=[]):l.length===3?(u=l[1],d=l[2],l=[l[0]]):l.length===4&&(u=l[2],d=l[3],l=[l[0],l[1]]);let f=d;return l.push((h,p,m,v,b,_,C)=>{f=u(f,h,p,m,v,b,_,C)}),this[o].apply(this,l),f}}function G3(t,e){let{name:n,type:r,direction:i}=e,o="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(c,l,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return u=c,rA(!0,this,r,u);if(arguments.length===2){c=""+c,u=l;let d=this._nodes.get(c);if(typeof d>"u")throw new P(`Graph.${o}: could not find the "${c}" node in the graph.`);return uw(!0,this.multi,r==="mixed"?this.type:r,i,d,u)}if(arguments.length===3){c=""+c,l=""+l;let d=this._nodes.get(c);if(!d)throw new P(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(l))throw new P(`Graph.${o}:  could not find the "${l}" target node in the graph.`);return dw(!0,r,this.multi,i,d,l,u)}throw new j(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};let s="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(){let c=Array.prototype.slice.call(arguments),l=c.pop();return c.push((d,f,h,p,m,v,b)=>l(d,f,h,p,m,v,b)),!!this[o].apply(this,c)};let a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){let c=Array.prototype.slice.call(arguments),l=c.pop();return c.push((d,f,h,p,m,v,b)=>!l(d,f,h,p,m,v,b)),!this[o].apply(this,c)}}function z3(t,e){let{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(s,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return xa();if(!arguments.length)return L3(this,r);if(arguments.length===1){s=""+s;let c=this._nodes.get(s);if(!c)throw new P(`Graph.${o}: could not find the "${s}" node in the graph.`);return U3(r,i,c)}if(arguments.length===2){s=""+s,a=""+a;let c=this._nodes.get(s);if(!c)throw new P(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(a))throw new P(`Graph.${o}:  could not find the "${a}" target node in the graph.`);return $3(r,i,c,a)}throw new j(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function W3(t){R3.forEach(e=>{V3(t,e),H3(t,e),G3(t,e),z3(t,e)})}var q3=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function op(){this.A=null,this.B=null}op.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};op.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function Ol(t,e,n,r,i){for(let o in r){let s=r[o],a=s.source,c=s.target,l=a===n?c:a;if(e&&e.has(l.key))continue;let u=i(l.key,l.attributes);if(t&&u)return l.key}}function fw(t,e,n,r,i){if(e!=="mixed"){if(e==="undirected")return Ol(t,null,r,r.undirected,i);if(typeof n=="string")return Ol(t,null,r,r[n],i)}let o=new op,s;if(e!=="undirected"){if(n!=="out"){if(s=Ol(t,null,r,r.in,i),t&&s)return s;o.wrap(r.in)}if(n!=="in"){if(s=Ol(t,o,r,r.out,i),t&&s)return s;o.wrap(r.out)}}if(e!=="directed"&&(s=Ol(t,o,r,r.undirected,i),t&&s))return s}function Y3(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}let r=[];return fw(!1,t,e,n,function(i){r.push(i)}),r}function Nl(t,e,n){let r=Object.keys(n),i=r.length,o=0;return{[Symbol.iterator](){return this},next(){let s=null;do{if(o>=i)return t&&t.wrap(n),{done:!0};let a=n[r[o++]],c=a.source,l=a.target;if(s=c===e?l:c,t&&t.has(s.key)){s=null;continue}}while(s===null);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}}}}function K3(t,e,n){if(t!=="mixed"){if(t==="undirected")return Nl(null,n,n.undirected);if(typeof e=="string")return Nl(null,n,n[e])}let r=xa(),i=new op;return t!=="undirected"&&(e!=="out"&&(r=Qr(r,Nl(i,n,n.in))),e!=="in"&&(r=Qr(r,Nl(i,n,n.out)))),t!=="directed"&&(r=Qr(r,Nl(i,n,n.undirected))),r}function Z3(t,e){let{name:n,type:r,direction:i}=e;t.prototype[n]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;let s=this._nodes.get(o);if(typeof s>"u")throw new P(`Graph.${n}: could not find the "${o}" node in the graph.`);return Y3(r==="mixed"?this.type:r,i,s)}}function X3(t,e){let{name:n,type:r,direction:i}=e,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(l,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;l=""+l;let d=this._nodes.get(l);if(typeof d>"u")throw new P(`Graph.${o}: could not find the "${l}" node in the graph.`);fw(!1,r==="mixed"?this.type:r,i,d,u)};let s="map"+n[0].toUpperCase()+n.slice(1);t.prototype[s]=function(l,u){let d=[];return this[o](l,(f,h)=>{d.push(u(f,h))}),d};let a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(l,u){let d=[];return this[o](l,(f,h)=>{u(f,h)&&d.push(f)}),d};let c="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[c]=function(l,u,d){if(arguments.length<3)throw new j(`Graph.${c}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[o](l,(h,p)=>{f=u(f,h,p)}),f}}function Q3(t,e){let{name:n,type:r,direction:i}=e,o=n[0].toUpperCase()+n.slice(1,-1),s="find"+o;t.prototype[s]=function(l,u){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;l=""+l;let d=this._nodes.get(l);if(typeof d>"u")throw new P(`Graph.${s}: could not find the "${l}" node in the graph.`);return fw(!0,r==="mixed"?this.type:r,i,d,u)};let a="some"+o;t.prototype[a]=function(l,u){return!!this[s](l,u)};let c="every"+o;t.prototype[c]=function(l,u){return!this[s](l,(f,h)=>!u(f,h))}}function J3(t,e){let{name:n,type:r,direction:i}=e,o=n.slice(0,-1)+"Entries";t.prototype[o]=function(s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return xa();s=""+s;let a=this._nodes.get(s);if(typeof a>"u")throw new P(`Graph.${o}: could not find the "${s}" node in the graph.`);return K3(r==="mixed"?this.type:r,i,a)}}function ez(t){q3.forEach(e=>{Z3(t,e),X3(t,e),Q3(t,e),J3(t,e)})}function Jh(t,e,n,r,i){let o=r._nodes.values(),s=r.type,a,c,l,u,d,f,h;for(;a=o.next(),a.done!==!0;){let p=!1;if(c=a.value,s!=="undirected"){u=c.out;for(l in u){d=u[l];do{if(f=d.target,p=!0,h=i(c.key,f.key,c.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(s!=="directed"){u=c.undirected;for(l in u)if(!(e&&c.key>l)){d=u[l];do{if(f=d.target,f.key!==l&&(f=d.source),p=!0,h=i(c.key,f.key,c.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(n&&!p&&(h=i(c.key,null,c.attributes,null,null,null,null),t&&h))return null}}function tz(t,e){let n={key:t};return Z1(e.attributes)||(n.attributes=wt({},e.attributes)),n}function nz(t,e,n){let r={key:e,source:n.source.key,target:n.target.key};return Z1(n.attributes)||(r.attributes=wt({},n.attributes)),t==="mixed"&&n.undirected&&(r.undirected=!0),r}function rz(t){if(!Mt(t))throw new j('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new j("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Mt(t.attributes)||t.attributes===null))throw new j("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function iz(t){if(!Mt(t))throw new j('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new j("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new j("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Mt(t.attributes)||t.attributes===null))throw new j("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new j("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}var oz=a3(),sz=new Set(["directed","undirected","mixed"]),q1=new Set(["domain","_events","_eventsCount","_maxListeners"]),az=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],cz={allowSelfLoops:!0,multi:!1,type:"mixed"};function lz(t,e,n){if(n&&!Mt(n))throw new j(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new K(`Graph.addNode: the "${e}" node already exist in the graph.`);let r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function Y1(t,e,n){let r=new t.NodeDataClass(e,n);return t._nodes.set(e,r),t.emit("nodeAdded",{key:e,attributes:n}),r}function iA(t,e,n,r,i,o,s,a){if(!r&&t.type==="undirected")throw new K(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new K(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Mt(a))throw new j(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!t.allowSelfLoops&&o===s)throw new K(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=t._nodes.get(o),l=t._nodes.get(s);if(!c)throw new P(`Graph.${e}: source node "${o}" not found.`);if(!l)throw new P(`Graph.${e}: target node "${s}" not found.`);let u={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new K(`Graph.${e}: the "${i}" edge already exists in the graph.`);if(!t.multi&&(r?typeof c.undirected[s]<"u":typeof c.out[s]<"u"))throw new K(`Graph.${e}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);let d=new _a(r,i,c,l,a);t._edges.set(i,d);let f=o===s;return r?(c.undirectedDegree++,l.undirectedDegree++,f&&(c.undirectedLoops++,t._undirectedSelfLoopCount++)):(c.outDegree++,l.inDegree++,f&&(c.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),r?t._undirectedSize++:t._directedSize++,u.key=i,t.emit("edgeAdded",u),i}function uz(t,e,n,r,i,o,s,a,c){if(!r&&t.type==="undirected")throw new K(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&t.type==="directed")throw new K(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(c){if(typeof a!="function")throw new j(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Mt(a))throw new j(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}o=""+o,s=""+s;let l;if(c&&(l=a,a=void 0),!t.allowSelfLoops&&o===s)throw new K(`Graph.${e}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(o),d=t._nodes.get(s),f,h;if(!n&&(f=t._edges.get(i),f)){if((f.source.key!==o||f.target.key!==s)&&(!r||f.source.key!==s||f.target.key!==o))throw new K(`Graph.${e}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${s}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!t.multi&&u&&(h=r?u.undirected[s]:u.out[s]),h){let _=[h.key,!1,!1,!1];if(c?!l:!a)return _;if(c){let C=h.attributes;h.attributes=l(C),t.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else wt(h.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a});return _}a=a||{},c&&l&&(a=l(a));let p={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=t._edgeKeyGenerator();else if(i=""+i,t._edges.has(i))throw new K(`Graph.${e}: the "${i}" edge already exists in the graph.`);let m=!1,v=!1;u||(u=Y1(t,o,{}),m=!0,o===s&&(d=u,v=!0)),d||(d=Y1(t,s,{}),v=!0),f=new _a(r,i,u,d,a),t._edges.set(i,f);let b=o===s;return r?(u.undirectedDegree++,d.undirectedDegree++,b&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,b&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),r?t._undirectedSize++:t._directedSize++,p.key=i,t.emit("edgeAdded",p),[i,!0,m,v]}function ba(t,e){t._edges.delete(e.key);let{source:n,target:r,attributes:i}=e,o=e.undirected,s=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,s&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,s&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),o?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:i,source:n.key,target:r.key,undirected:o})}var Se=class t extends K1.EventEmitter{constructor(e){if(super(),e=wt({},cz,e),typeof e.multi!="boolean")throw new j(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!sz.has(e.type))throw new j(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new j(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);let n=e.type==="mixed"?X1:e.type==="directed"?Q1:J1;Hn(this,"NodeDataClass",n);let r="geid_"+oz()+"_",i=0,o=()=>{let s;do s=r+i++;while(this._edges.has(s));return s};Hn(this,"_attributes",{}),Hn(this,"_nodes",new Map),Hn(this,"_edges",new Map),Hn(this,"_directedSize",0),Hn(this,"_undirectedSize",0),Hn(this,"_directedSelfLoopCount",0),Hn(this,"_undirectedSelfLoopCount",0),Hn(this,"_edgeKeyGenerator",o),Hn(this,"_options",e),q1.forEach(s=>Hn(this,s,this[s])),or(this,"order",()=>this._nodes.size),or(this,"size",()=>this._edges.size),or(this,"directedSize",()=>this._directedSize),or(this,"undirectedSize",()=>this._undirectedSize),or(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),or(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),or(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),or(this,"multi",this._options.multi),or(this,"type",this._options.type),or(this,"allowSelfLoops",this._options.allowSelfLoops),or(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){let r=""+e,i=this._edges.get(r);return!!i&&!i.undirected}else if(arguments.length===2){e=""+e,n=""+n;let r=this._nodes.get(e);return r?r.out.hasOwnProperty(n):!1}throw new j(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){let r=""+e,i=this._edges.get(r);return!!i&&i.undirected}else if(arguments.length===2){e=""+e,n=""+n;let r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(n):!1}throw new j(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){let r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,n=""+n;let r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n):!1}throw new j(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new K("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");let r=this._nodes.get(e);if(!r)throw new P(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new P(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);let i=r.out&&r.out[n]||void 0;if(i)return i.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new K("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");let r=this._nodes.get(e);if(!r)throw new P(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new P(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);let i=r.undirected&&r.undirected[n]||void 0;if(i)return i.key}edge(e,n){if(this.multi)throw new K("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;let r=this._nodes.get(e);if(!r)throw new P(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new P(`Graph.edge: could not find the "${n}" target node in the graph.`);let i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;let r=this._nodes.get(e);if(!r)throw new P(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in||n in r.out}areOutNeighbors(e,n){e=""+e,n=""+n;let r=this._nodes.get(e);if(!r)throw new P(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.out}areInNeighbors(e,n){e=""+e,n=""+n;let r=this._nodes.get(e);if(!r)throw new P(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in r.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;let r=this._nodes.get(e);if(!r)throw new P(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in r.undirected}areNeighbors(e,n){e=""+e,n=""+n;let r=this._nodes.get(e);if(!r)throw new P(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in r.in||n in r.out)||this.type!=="directed"&&n in r.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;let r=this._nodes.get(e);if(!r)throw new P(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.in||this.type!=="directed"&&n in r.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;let r=this._nodes.get(e);if(!r)throw new P(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in r.out||this.type!=="directed"&&n in r.undirected}inDegree(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree),r}outboundDegree(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.outDegree),r}degree(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=n.undirectedDegree),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,i=0;return this.type!=="directed"&&(r+=n.undirectedDegree,i+=n.undirectedLoops*2),this.type!=="undirected"&&(r+=n.inDegree+n.outDegree,i+=n.directedLoops*2),r-i}source(e){e=""+e;let n=this._edges.get(e);if(!n)throw new P(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;let n=this._edges.get(e);if(!n)throw new P(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;let n=this._edges.get(e);if(!n)throw new P(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;let r=this._edges.get(n);if(!r)throw new P(`Graph.opposite: could not find the "${n}" edge in the graph.`);let i=r.source.key,o=r.target.key;if(e===i)return o;if(e===o)return i;throw new P(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${i}, ${o}).`)}hasExtremity(e,n){e=""+e,n=""+n;let r=this._edges.get(e);if(!r)throw new P(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(e){e=""+e;let n=this._edges.get(e);if(!n)throw new P(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;let n=this._edges.get(e);if(!n)throw new P(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;let n=this._edges.get(e);if(!n)throw new P(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return lz(this,e,n).key}mergeNode(e,n){if(n&&!Mt(n))throw new j(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let r=this._nodes.get(e);return r?(n&&(wt(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:n})),[e,!1]):(r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new j(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let r=this._nodes.get(e);if(r){if(n){let o=r.attributes;r.attributes=n(o),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}let i=n?n({}):{};return r=new this.NodeDataClass(e,i),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:i}),[e,!0]}dropNode(e){e=""+e;let n=this._nodes.get(e);if(!n)throw new P(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(let i in n.out){r=n.out[i];do ba(this,r),r=r.next;while(r)}for(let i in n.in){r=n.in[i];do ba(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(let i in n.undirected){r=n.undirected[i];do ba(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){let r=""+arguments[0],i=""+arguments[1];if(n=Gn(this,r,i,this.type),!n)throw new P(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new P(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return ba(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new K("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new K("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;let r=Gn(this,e,n,"directed");if(!r)throw new P(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return ba(this,r),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new K("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new K("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");let r=Gn(this,e,n,"undirected");if(!r)throw new P(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return ba(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){let e=this._nodes.values(),n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new j("Graph.updateAttribute: updater should be a function.");let r=this._attributes[e];return this._attributes[e]=n(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Mt(e))throw new j("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Mt(e))throw new j("Graph.mergeAttributes: provided attributes are not a plain object.");return wt(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new j("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new j("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!W1(n))throw new j("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");let r=this._nodes.values(),i,o;for(;i=r.next(),i.done!==!0;)o=i.value,o.attributes=e(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new j("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!W1(n))throw new j("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");let r=this._edges.values(),i,o,s,a;for(;i=r.next(),i.done!==!0;)o=i.value,s=o.source,a=o.target,o.attributes=e(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new j("Graph.forEachAdjacencyEntry: expecting a callback.");Jh(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new j("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Jh(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new j("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Jh(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new j("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Jh(!1,!0,!0,this,e)}nodes(){return Array.from(this._nodes.keys())}forEachNode(e){if(typeof e!="function")throw new j("Graph.forEachNode: expecting a callback.");let n=this._nodes.values(),r,i;for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)}findNode(e){if(typeof e!="function")throw new j("Graph.findNode: expecting a callback.");let n=this._nodes.values(),r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return i.key}mapNodes(e){if(typeof e!="function")throw new j("Graph.mapNode: expecting a callback.");let n=this._nodes.values(),r,i,o=new Array(this.order),s=0;for(;r=n.next(),r.done!==!0;)i=r.value,o[s++]=e(i.key,i.attributes);return o}someNode(e){if(typeof e!="function")throw new j("Graph.someNode: expecting a callback.");let n=this._nodes.values(),r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,e(i.key,i.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new j("Graph.everyNode: expecting a callback.");let n=this._nodes.values(),r,i;for(;r=n.next(),r.done!==!0;)if(i=r.value,!e(i.key,i.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new j("Graph.filterNodes: expecting a callback.");let n=this._nodes.values(),r,i,o=[];for(;r=n.next(),r.done!==!0;)i=r.value,e(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(e,n){if(typeof e!="function")throw new j("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new j("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n,i=this._nodes.values(),o,s;for(;o=i.next(),o.done!==!0;)s=o.value,r=e(r,s.key,s.attributes);return r}nodeEntries(){let e=this._nodes.values();return{[Symbol.iterator](){return this},next(){let n=e.next();if(n.done)return n;let r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}}}}export(){let e=new Array(this._nodes.size),n=0;this._nodes.forEach((i,o)=>{e[n++]=tz(o,i)});let r=new Array(this._edges.size);return n=0,this._edges.forEach((i,o)=>{r[n++]=nz(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,n=!1){if(e instanceof t)return e.forEachNode((c,l)=>{n?this.mergeNode(c,l):this.addNode(c,l)}),e.forEachEdge((c,l,u,d,f,h,p)=>{n?p?this.mergeUndirectedEdgeWithKey(c,u,d,l):this.mergeDirectedEdgeWithKey(c,u,d,l):p?this.addUndirectedEdgeWithKey(c,u,d,l):this.addDirectedEdgeWithKey(c,u,d,l)}),this;if(!Mt(e))throw new j("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Mt(e.attributes))throw new j("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,i,o,s,a;if(e.nodes){if(o=e.nodes,!Array.isArray(o))throw new j("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){s=o[r],rz(s);let{key:c,attributes:l}=s;n?this.mergeNode(c,l):this.addNode(c,l)}}if(e.edges){let c=!1;if(this.type==="undirected"&&(c=!0),o=e.edges,!Array.isArray(o))throw new j("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){a=o[r],iz(a);let{source:l,target:u,attributes:d,undirected:f=c}=a,h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,l,u,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,l,u,d))}}return this}nullCopy(e){let n=new t(wt({},this._options,e));return n.replaceAttributes(wt({},this.getAttributes())),n}emptyCopy(e){let n=this.nullCopy(e);return this._nodes.forEach((r,i)=>{let o=wt({},r.attributes);r=new n.NodeDataClass(i,o),n._nodes.set(i,r)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new K(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new K("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new K("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");let n=this.emptyCopy(e),r=this._edges.values(),i,o;for(;i=r.next(),i.done!==!0;)o=i.value,iA(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,wt({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){let e={};this._nodes.forEach((o,s)=>{e[s]=o.attributes});let n={},r={};this._edges.forEach((o,s)=>{let a=o.undirected?"--":"->",c="",l=o.source.key,u=o.target.key,d;o.undirected&&l>u&&(d=l,l=u,u=d);let f=`(${l})${a}(${u})`;s.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,c+=`${r[f]}. `):c+=`[${s}]: `,c+=f,n[c]=o.attributes});let i={};for(let o in this)this.hasOwnProperty(o)&&!q1.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=e,i.edges=n,Hn(i,"constructor",this.constructor),i}};typeof Symbol<"u"&&(Se.prototype[Symbol.for("nodejs.util.inspect.custom")]=Se.prototype.inspect);az.forEach(t=>{["add","merge","update"].forEach(e=>{let n=t.name(e),r=e==="add"?iA:uz;t.generateKey?Se.prototype[n]=function(i,o,s){return r(this,n,!0,(t.type||this.type)==="undirected",null,i,o,s,e==="update")}:Se.prototype[n]=function(i,o,s,a){return r(this,n,!1,(t.type||this.type)==="undirected",i,o,s,a,e==="update")}})});w3(Se);M3(Se);W3(Se);ez(Se);var ep=class extends Se{constructor(e){let n=wt({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new j("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new j('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}},tp=class extends Se{constructor(e){let n=wt({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new j("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new j('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}},np=class extends Se{constructor(e){let n=wt({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new j("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}},rp=class extends Se{constructor(e){let n=wt({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new j("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new j('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}},ip=class extends Se{constructor(e){let n=wt({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new j("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new j('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}};function Ea(t){t.from=function(e,n){let r=wt({},e.options,n),i=new t(r);return i.import(e),i}}Ea(Se);Ea(ep);Ea(tp);Ea(np);Ea(rp);Ea(ip);Se.Graph=Se;Se.DirectedGraph=ep;Se.UndirectedGraph=tp;Se.MultiGraph=np;Se.MultiDirectedGraph=rp;Se.MultiUndirectedGraph=ip;Se.InvalidArgumentsGraphError=j;Se.NotFoundGraphError=P;Se.UsageGraphError=K;var Da=ii(mA(),1),tM=ii(ZA(),1),nM=ii(eM(),1);var Yz=["container"],Kz=["canvas"],Zz=t=>({"graph-container":!0,fullscreen:t}),$l=class extends Ut{edgeId;edgePosition;attributes={};targetSize=10;container=new Ut;line=new Dr;arrow=new Dr;edgeLabel=new va;selfloop=!1;_select=!1;set select(e){this._select=e,this._select?this.zIndex=999999:this.zIndex=0,this.draw()}get select(){return this._select}_highlight=!1;set highlight(e){this._highlight=e,this.draw()}get highlight(){return this._highlight}defaultEdgeColors={stroke:3000796,label:3000796,selection:16777215,highlight:3201395};defaultEdgeAttributes={colors:this.defaultEdgeColors,strokeWidth:2};constructor(e,n,r,i,o=!1){super(),this.interactive=!0,this.edgeId=e,this.edgePosition=n,this.attributes=this.createEdgeAttributes(r||{}),this.targetSize=i||this.targetSize,this.selfloop=o,this.container.addChild(this.line),this.container.addChild(this.arrow),this.container.addChild(this.edgeLabel),this.addChild(this.container),this.draw()}updateEdgePosition(e){this.edgePosition.source.x===e.source.x&&this.edgePosition.source.y===e.source.y&&this.edgePosition.target.x===e.target.x&&this.edgePosition.target.y===e.target.y||(this.edgePosition=e,this.draw())}initEdgeLine(e){let n=this.attributes&&this.attributes.strokeWidth?this.attributes.strokeWidth:1;this.selfloop?(e.circle(this.edgePosition.target.x,this.edgePosition.target.y,this.targetSize).stroke({color:this.select?this.getAttributeColor("selection"):this.highlight?this.getAttributeColor("highlight"):this.getAttributeColor("stroke"),pixelLine:!1,width:this.highlight?n+n*.2:n}),e.position.x=-this.targetSize-this.targetSize/3,e.position.y=-this.targetSize):e.moveTo(this.edgePosition.source.x,this.edgePosition.source.y).lineTo(this.edgePosition.target.x,this.edgePosition.target.y).stroke({color:this.select?this.getAttributeColor("selection"):this.highlight?this.getAttributeColor("highlight"):this.getAttributeColor("stroke"),pixelLine:!1,width:this.highlight?n+n*.2:n})}initEdgeArrow(e){let n=this.targetSize+3.5,r=this.highlight?15:10,i=this.highlight?7:5,o=this.edgePosition.target.x-this.edgePosition.source.x,s=this.edgePosition.target.y-this.edgePosition.source.y,a=Math.atan2(s,o),c=this.edgePosition.target.x-Math.cos(a)*n,l=this.edgePosition.target.y-Math.sin(a)*n,u=c-Math.cos(a)*r,d=l-Math.sin(a)*r,f=u+Math.cos(a+Math.PI/2)*i,h=d+Math.sin(a+Math.PI/2)*i,p=u+Math.cos(a-Math.PI/2)*i,m=d+Math.sin(a-Math.PI/2)*i;e.moveTo(c,l).lineTo(f,h).lineTo(p,m).lineTo(c,l).fill({color:this.select?this.getAttributeColor("selection"):this.highlight?this.getAttributeColor("highlight"):this.getAttributeColor("stroke")})}initEdgeLabel(e){if(!this.selfloop){let n=this.getLabelPosition();e.text=this.attributes.label,e.style={fill:this.select?this.getAttributeColor("selection"):this.highlight?this.getAttributeColor("highlight"):this.getAttributeColor("label"),fontSize:12,fontFamily:"Arial",align:"left"},e.pivot.x=this.edgeLabel.width/2,e.pivot.y=18,e.x=n.x,e.y=n.y,e.rotation=n.angle}}draw(){this.drawLine(),this.drawArrow(),this.attributes.label&&this.drawLabel()}drawLine(){this.line.clear(),this.initEdgeLine(this.line)}drawArrow(){this.arrow.clear(),this.initEdgeArrow(this.arrow)}drawLabel(){this.initEdgeLabel(this.edgeLabel)}createEdgeAttributes(e){return Ce(M(M({},this.defaultEdgeAttributes),e),{colors:M(M({},this.defaultEdgeColors),e.colors||{})})}getAttributeColor(e){return this.attributes.colors&&this.attributes.colors[e]?Number(this.attributes.colors[e]):0}getLabelPosition(){let e=(this.edgePosition.source.x+this.edgePosition.target.x)/2,n=(this.edgePosition.source.y+this.edgePosition.target.y)/2,r=Math.atan2(this.edgePosition.target.y-this.edgePosition.source.y,this.edgePosition.target.x-this.edgePosition.source.x);return{x:e,y:n,angle:r}}},Vl=class extends Ut{nodeId;attributes;nodePosition;container=new Ut;node=new Dr;nodeLabel=new va;_select=!1;set select(e){this._select=e,this._select?this.zIndex=999999:this.zIndex=0,this.draw()}get select(){return this._select}_highlight=!1;set highlight(e){this._highlight=e,this.draw()}get highlight(){return this._highlight}defaultNodeColors={fill:0,stroke:3000796,label:3000796,selection:16777215,highlight:3201395};defaultNodeAttributes={x:1,y:1,colors:this.defaultNodeColors,radius:10,strokeWidth:7};constructor(e,n,r){super(),this.interactive=!0,this.nodeId=e,this.nodePosition=n,this.attributes=this.createGraphNodeAttributes(r||{}),this.container.addChild(this.node),this.container.addChild(this.nodeLabel),this.addChild(this.container),this.draw()}initLabelGraphics(e){e.text=this.attributes.label&&this.attributes.label?this.attributes.label:"",e.style={fontSize:24,fontFamily:"Arial",fill:this.select?this.getAttributeColor("selection"):this.highlight?this.getAttributeColor("highlight"):this.getAttributeColor("label"),align:"center"};let n=e.parent.children[0];e.x=n.width/2+n.width/8,e.y=-(e.height/2)}initNodeGraphics(e){e.circle(0,0,this.getNodeSize()).stroke({color:this.select?this.getAttributeColor("selection"):this.highlight?this.getAttributeColor("highlight"):this.getAttributeColor("stroke"),width:this.attributes&&this.attributes.strokeWidth?this.attributes.strokeWidth:10}).circle(0,0,this.getNodeSize()).fill({color:this.getAttributeColor("fill")})}updateNodePosition(e){this.nodePosition.x===e.x&&this.nodePosition.y===e.y||(this.nodePosition=e,this.x=this.nodePosition.x,this.y=this.nodePosition.y)}draw(){this.x=this.nodePosition.x,this.y=this.nodePosition.y,this.drawNode(),this.attributes&&this.attributes.label&&this.drawLabel()}drawNode(){this.node.clear(),this.initNodeGraphics(this.node)}drawLabel(){this.initLabelGraphics(this.nodeLabel)}getAttributeColor(e){return this.attributes.colors&&this.attributes.colors[e]?Number(this.attributes.colors[e]):0}createGraphNodeAttributes(e){return Ce(M(M({},this.defaultNodeAttributes),e),{colors:M(M({},this.defaultNodeColors),e.colors||{})})}getNodeSize(){let e=this.attributes.radius?this.attributes.radius:10;return this.highlight?e+e*.2:e}},Xz=(()=>{let e=class e{_layout=null;get layout(){return this._layout}constructor(){}loadGraph(r,i){let o=new Se(i||{multi:!1,allowSelfLoops:!0,type:"directed"});for(let s of r.nodes)o.addNode(s.id,s.attributes||{});for(let s of r.edges)o.addEdge(s.source,s.target,s.attributes||{});return o.order===0?(console.error("Graph must have at least one node."),null):o}initPositions(r,i){let o=(0,tM.circlepack)(r,{scale:200});r.forEachNode((c,l)=>{r.setNodeAttribute(c,"x",o[c].x),r.setNodeAttribute(c,"y",o[c].y)});let s=i||Da.default.inferSettings(r);return(0,Da.default)(r,{iterations:100,settings:s})}positions(r,i){let o=i||Da.default.inferSettings(r);return(0,Da.default)(r,{iterations:5,settings:o})}startLayout(r,i){let o=i||Da.default.inferSettings(r);return this._layout||(this._layout=new nM.default(r,{settings:o})),this._layout.isRunning()||this._layout.start(),this._layout}restartLayout(){this._layout&&!this._layout.isRunning()&&this._layout.start()}stopLayout(){this._layout&&this._layout.isRunning()&&this._layout.stop()}killLayout(){this._layout&&(this._layout.kill(),this._layout=null)}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})(),rM=(()=>{let e=class e{containerRef;canvasRef;onNodeSelectChange=new Ge;onNodeHighlightChange=new Ge;onEdgeSelectChange=new Ge;onEdgeHighlightChange=new Ge;graphInitialised=new Ge;graphUpdated=new Ge;onDestroy=new Ge;options={backgroundColor:0,backgroundAlpha:1};set graphData(r){if(r instanceof Se)this.graph=r.copy();else{let i=this.graphEngine.loadGraph(r);i&&(this.graph=i)}}nodeRenderer;edgeRenderer;set fullscreen(r){this._fullscreen=r,r&&this.containerRef.nativeElement.requestFullscreen().then(()=>{this.viewport.plugins.resume("wheel"),this.app.resize(),this.viewport.resize()}).catch(i=>console.error(i))}get fullscreen(){return this._fullscreen}_interactive=!0;set interactive(r){this._interactive=r}set selectNode(r){if(r&&this.nodeGraphicsStorage[r]){let i=this.nodeGraphicsStorage[r];i.select=!0,this.onNodeSelectChange.emit(i)}}set highlightNode(r){if(r&&this.nodeGraphicsStorage[r]){let i=this.nodeGraphicsStorage[r];i.highlight=!0,this.onNodeHighlightChange.emit(i)}}set toggleNodeSelection(r){r&&this.nodeGraphicsStorage[r]?this._toggleNodeSelection(r):this.clearNodesSelection={clear:!0}}set clearNodesSelection(r){if((typeof r=="boolean"&&r||typeof r=="object"&&r.clear)&&this.graph)for(let i of this.graph.nodes()){let o=this.nodeGraphicsStorage[i];o&&(o.select=!1)}}set clearNodesHighlight(r){if((typeof r=="boolean"&&r||typeof r=="object"&&r.clear)&&this.graph)for(let i of this.graph.nodes()){let o=this.nodeGraphicsStorage[i];o&&(o.highlight=!1)}}set toggleNodeHighlight(r){r&&this.nodeGraphicsStorage[r]?this._toggleNodeHighlight(r):this.clearNodesHighlight={clear:!0}}set selectEdge(r){if(r&&this.edgeGraphicsStorage[r]){let i=this.edgeGraphicsStorage[r];i.select=!0,this.onEdgeSelectChange.emit(i)}}set highlightEdge(r){if(r&&this.edgeGraphicsStorage[r]){let i=this.edgeGraphicsStorage[r];i.highlight=!0,this.onEdgeHighlightChange.emit(i)}}set toggleEdgeSelection(r){r&&this.edgeGraphicsStorage[r]?this._toggleEdgeSelection(r):this.clearEdgesSelection={clear:!0}}set toggleEdgeHighlight(r){r&&this.edgeGraphicsStorage[r]?this._toggleEdgeHighlight(r):this.clearEdgesHighlight={clear:!0}}set clearEdgesSelection(r){if((typeof r=="boolean"&&r||typeof r=="object"&&r.clear)&&this.graph)for(let i of this.graph.edges()){let o=this.edgeGraphicsStorage[i];o&&(o.select=!1)}}set clearEdgesHighlight(r){if((typeof r=="boolean"&&r||typeof r=="object"&&r.clear)&&this.graph)for(let i of this.graph.edges()){let o=this.edgeGraphicsStorage[i];o&&(o.highlight=!1)}}set animate(r){this._animate=r,!r&&this.layout&&this.layout.stop()}get animate(){return this._animate}set layoutSettings(r){r&&(this._layoutSettings=r)}set addNodes(r){if(!(!this.graph||!r)){for(let[i,o]of Object.entries(r))this.graph.addNode(i,o);this.refreshGraph(this.graph)}}set addEdges(r){if(!(!this.graph||!r?.length)){for(let{source:i,target:o,attributes:s}of r)this.graph.hasNode(i)&&this.graph.hasNode(o)&&this.graph.addEdge(i,o,s);this.refreshGraph(this.graph)}}set dropNodes(r){if(!(!this.graph||!r?.length)){for(let i of r)this.graph.hasNode(i)&&this.graph.dropNode(i);this.refreshGraph(this.graph)}}set dropEdges(r){if(!(!this.graph||!r?.length)){for(let i of r)this.graph.hasEdge(i)&&this.graph.dropEdge(i);this.refreshGraph(this.graph)}}set snapToNode(r){if(this.app&&r&&this.nodeGraphicsStorage[r]&&this.viewport){let i=this.nodeGraphicsStorage[r];this.viewport.snap(i.x+this.app.canvas.width/window.devicePixelRatio/2,i.y+this.app.canvas.height/window.devicePixelRatio/2)}}set snapCenter(r){this.app&&r&&this.viewport&&this.viewport.snap(this.app.canvas.width/window.devicePixelRatio/2,this.app.canvas.height/window.devicePixelRatio/2)}viewportZoom={scale:1,center:!0};set zoom(r){if(r&&r.scale&&this.viewport){let i=r.center||r.center===!1?r.center:!0;this.viewportZoom=r,this.viewport.setZoom(r.scale,i)}}refreshGraph(r){this.updateGraph(r),this.graphUpdated.emit(r)}layout;graphViewerId=`graph-${Ft()}`;graph;app;viewport;graphContainer=new Ut({interactive:this._interactive});edgesContainer=new Ut;nodesContainer=new Ut;_animate=!1;_fullscreen=!1;_layoutSettings;dragStartPos=null;degrees={};maxDegree=0;minSize=10;maxSize=50;nodeGraphicsStorage={};edgeGraphicsStorage={};dragTarget=null;set needsRender(r){r?(this.graphEngine.restartLayout(),this._needsRender=!0):(this.graphEngine.stopLayout(),this._needsRender=!1)}get needsRender(){return this._needsRender}_needsRender=!0;graphEngine;constructor(){this.graphEngine=S(Xz),this.graphContainer.addChild(this.edgesContainer),this.graphContainer.addChild(this.nodesContainer)}ngAfterViewInit(){requestAnimationFrame(()=>{setTimeout(()=>{this.initPixiApp()},0)}),document.addEventListener("visibilitychange",this.visibilityChangeHandler.bind(this))}initPixiApp(){this.app=new jh,I(this,null,function*(){yield this.app.init({preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,preference:"webgpu",autoStart:!0,resizeTo:this.containerRef.nativeElement,background:this.options.backgroundColor,antialias:!0,clearBeforeRender:!0,resolution:window.devicePixelRatio,autoDensity:!0,backgroundAlpha:this.options.backgroundAlpha}).then(()=>{this.containerRef.nativeElement.addEventListener("fullscreenchange",this.fullsScreenHanlder.bind(this)),this.containerRef.nativeElement.appendChild(this.app.canvas),this.viewport=new Kh({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:this.app.canvas.width,worldHeight:this.app.canvas.height,events:this.app.renderer.events}),this.viewport.setZoom(this.viewportZoom.scale,this.viewportZoom.center);let r=new Je(this.app.canvas.width/window.devicePixelRatio/2,this.app.canvas.height/window.devicePixelRatio/2);if(this.viewport.center=r,this.app.stage.eventMode="static",this.app.stage.hitArea=this.app.screen,this.app.stage.on("pointerup",this.onDragEnd.bind(this)),this.app.stage.on("pointerupoutside",this.onDragEnd.bind(this)),this.app.stage.addChild(this.viewport),this.graphContainer.position=r,this.viewport.addChild(this.graphContainer),this.viewport.drag().wheel(),this.viewport.on("drag-start",()=>{this.layout&&this.graphEngine.stopLayout()}),this.viewport.on("drag-end",()=>{this.layout&&this.animate&&this.graphEngine.restartLayout()}),this.viewport.plugins.pause("wheel"),this.graph){if(this.renderGraph(this.graph,!0),this.animate&&this.graph){let i=performance.now();this.layout=this.graphEngine.startLayout(this.graph,this._layoutSettings);let o=performance.now()}this.startAnimation()}})})}fullsScreenHanlder(r){document.fullscreenElement||(this.viewport.plugins.pause("wheel"),this.app.resize(),this.viewport.resize())}visibilityChangeHandler(r){this.graphEngine.layout&&(!document.hidden&&this.animate?this.graphEngine.restartLayout():this.graphEngine.stopLayout())}ngOnDestroy(){this.graphEngine.killLayout(),this.containerRef.nativeElement.removeEventListener("fullscreenchange",this.fullsScreenHanlder),this.app&&this.app.stage.removeAllListeners(),this.viewport&&this.viewport.removeAllListeners();for(let r in this.edgeGraphicsStorage){let i=this.edgeGraphicsStorage[r];i.removeAllListeners(),i.destroy()}for(let r in this.nodeGraphicsStorage){let i=this.nodeGraphicsStorage[r];i.removeAllListeners(),i.destroy()}this.graph&&this.graph.clear(),this.graph=null,this.edgeGraphicsStorage={},this.nodeGraphicsStorage={},this.app&&this.app.renderer&&this.app.destroy(!0,{children:!0}),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.onDestroy.emit(!0)}renderGraph(r,i=!0){i&&(this.nodeGraphicsStorage={},this.edgeGraphicsStorage={},this.nodesContainer.removeChildren(),this.edgesContainer.removeChildren()),r.forEachNode(s=>{let a=r.degree(s);this.degrees[s]=a,a>this.maxDegree&&(this.maxDegree=a)});let o=i?this.graphEngine.initPositions(r,this._layoutSettings):null;r.forEachNode((s,a)=>{this.nodeGraphicsStorage[s]||this.createNodeGfx(s,a,o,r)}),r.forEachEdge((s,a,c,l)=>{this.edgeGraphicsStorage[s]||this.createEdgeGfx(s,a,c,l,o,r)}),i&&this.graphInitialised.emit(r)}updateGraph(r){this.needsRender=!0,this.renderGraph(r,!1)}createNodeGfx(r,i,o,s){let a=o&&o[r]?o[r]:{x:1,y:1},c=i,l=this.countNodeRadius(r,s);s.setNodeAttribute(r,"radius",l);let u=this.nodeRenderer?this.nodeRenderer({node:r,attributes:c,position:a}):this.defaultNodeRenderer(r,c,a);this.nodesContainer.addChild(u),this.app&&this._interactive&&this.addNodeInteractions(u,r),this.nodeGraphicsStorage[r]=u}countNodeRadius(r,i){let o=i.order,s=i.size,a=1/Math.log2(o+s+2),l=i.degree(r)/this.maxDegree;return this.minSize+(this.maxSize-this.minSize)*l*a}createEdgeGfx(r,i,o,s,a,c){let l=a&&a[o]?a[o]:{x:1,y:1},u=a&&a[s]?a[s]:{x:1,y:1},d=c.getNodeAttribute(s,"radius")||10,f=this.edgeRenderer?this.edgeRenderer({edge:r,source:o,target:s,attributes:i,targetSize:d}):this.defaultEdgeRenderer(r,i,l,u,d,c);this.edgesContainer.addChild(f),this.edgeGraphicsStorage[r]=f,this.app&&this._interactive&&this.addEdgeInteractions(f,r,o,s)}startAnimation(){let r=0;this.app.ticker.add(i=>{if(i.speed=.1,this.animate&&this.graph&&this.needsRender){for(let o of this.graph.nodes())this.nodeGraphicsStorage[o].updateNodePosition({x:this.graph.getNodeAttribute(o,"x"),y:this.graph.getNodeAttribute(o,"y")});for(let o of this.graph.edges()){let s=this.nodeGraphicsStorage[this.graph.source(o)],a=this.nodeGraphicsStorage[this.graph.target(o)];this.edgeGraphicsStorage[o].updateEdgePosition({source:{x:s.x,y:s.y},target:{x:a.x,y:a.y}})}}})}defaultNodeRenderer(r,i,o){return new Vl(r,o,i)}defaultEdgeRenderer(r,i,o,s,a,c){let l=c.source(r),u=c.target(r);return new $l(r,{source:{x:o.x,y:o.y},target:{x:s.x,y:s.y}},i,a,l===u)}addNodeInteractions(r,i){r.on("pointerup",o=>{if(this.isClick(o)){this._toggleNodeSelection(i);let s={id:i,attributes:r.attributes,position:r.nodePosition,event:o,selected:r.select};this.onNodeSelectChange.emit(s)}}),r.on("pointerover",o=>{r.highlight=!0;let s={id:i,attributes:r.attributes,position:r.nodePosition,event:o,highlighted:!0};this.onNodeHighlightChange.emit(s)}),r.on("pointerout",o=>{r.highlight=!1;let s={id:i,attributes:r.attributes,position:r.nodePosition,event:o,highlighted:!1};this.onNodeHighlightChange.emit(s)}),r.on("pointerdown",o=>{this.dragStartPos={x:o.global.x,y:o.global.y},this.onDragStart(r,i)})}_toggleNodeSelection(r){let i=this.nodeGraphicsStorage[r];return i.select=!i.select,i.select}_toggleNodeHighlight(r){let i=this.nodeGraphicsStorage[r];return i.highlight=!i.highlight,i.highlight}_toggleEdgeSelection(r){let i=this.edgeGraphicsStorage[r];return i.select=!i.select,i.select}_toggleEdgeHighlight(r){let i=this.edgeGraphicsStorage[r];return i.highlight=!i.highlight,i.highlight}onDragStart(r,i){this.dragTarget={nodeGfx:r,node:i},this.viewport.plugins.pause("drag"),this.app.stage.on("pointermove",this.onDragMove.bind(this)),this.graphEngine.stopLayout()}onDragMove(r){if(this.dragTarget){let i=this.dragTarget.nodeGfx&&this.dragTarget.nodeGfx.parent?this.dragTarget.nodeGfx.parent.toLocal(r.global,void 0,this.dragTarget.nodeGfx.position):null;this.graph&&i&&this.graph.setNodeAttribute(this.dragTarget.node,"x",i.x),this.graph&&i&&this.graph.setNodeAttribute(this.dragTarget.node,"y",i.y)}}onDragEnd(r){this.dragTarget&&!this.isClick(r)&&(this.viewport.plugins.resume("drag"),this.app.stage.off("pointermove",this.onDragMove)),this.dragTarget=null,this.graphEngine.restartLayout()}addEdgeInteractions(r,i,o,s){r.on("click",a=>{let c=this._toggleEdgeSelection(i),l={id:i,attributes:r.attributes,source:o,target:s,event:a,selected:c};this.onEdgeSelectChange.emit(l)}),r.on("pointerover",a=>{r.highlight=!0;let c={id:i,attributes:r.attributes,source:o,target:s,event:a,highlighted:!0};this.onEdgeHighlightChange.emit(c)}),r.on("pointerout",a=>{r.highlight=!1;let c={id:i,attributes:r.attributes,source:o,target:s,event:a,highlighted:!1};this.onEdgeHighlightChange.emit(c)})}isClick(r){if(this.dragStartPos){let i=r.global.x-this.dragStartPos.x,o=r.global.y-this.dragStartPos.y;return Math.sqrt(i*i+o*o)<5}return this.dragStartPos=null,!0}randomIntFromInterval(r,i){return Math.floor(Math.random()*(i-r+1)+r)}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275cmp",be({type:e,selectors:[["graph-viewer"]],viewQuery:function(i,o){if(i&1&&(po(Yz,5),po(Kz,5)),i&2){let s;wi(s=bi())&&(o.containerRef=s.first),wi(s=bi())&&(o.canvasRef=s.first)}},inputs:{options:"options",graphData:"graphData",nodeRenderer:"nodeRenderer",edgeRenderer:"edgeRenderer",fullscreen:"fullscreen",interactive:"interactive",selectNode:"selectNode",highlightNode:"highlightNode",toggleNodeSelection:"toggleNodeSelection",clearNodesSelection:"clearNodesSelection",clearNodesHighlight:"clearNodesHighlight",toggleNodeHighlight:"toggleNodeHighlight",selectEdge:"selectEdge",highlightEdge:"highlightEdge",toggleEdgeSelection:"toggleEdgeSelection",toggleEdgeHighlight:"toggleEdgeHighlight",clearEdgesSelection:"clearEdgesSelection",clearEdgesHighlight:"clearEdgesHighlight",animate:"animate",layoutSettings:"layoutSettings",addNodes:"addNodes",addEdges:"addEdges",dropNodes:"dropNodes",dropEdges:"dropEdges",snapToNode:"snapToNode",snapCenter:"snapCenter",zoom:"zoom"},outputs:{onNodeSelectChange:"onNodeSelectChange",onNodeHighlightChange:"onNodeHighlightChange",onEdgeSelectChange:"onEdgeSelectChange",onEdgeHighlightChange:"onEdgeHighlightChange",graphInitialised:"graphInitialised",graphUpdated:"graphUpdated",onDestroy:"onDestroy"},decls:2,vars:5,consts:[["container",""],[3,"id"]],template:function(i,o){i&1&&re(0,"div",1,0),i&2&&(yr(Qn(3,Zz,o.fullscreen)),De("id",o.graphViewerId))},dependencies:[qt],styles:["[_nghost-%COMP%]   .graph-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;min-height:600px;display:block}[_nghost-%COMP%]   .graph-container.fullscreen[_ngcontent-%COMP%]{object-fit:contain;-webkit-user-select:text;user-select:text;position:fixed!important;box-sizing:border-box!important;min-width:0px!important;max-width:none!important;min-height:0px!important;max-height:none!important;width:100%!important;height:100%!important;transform:none!important;inset:0!important;margin:0!important;z-index:999999999!important}"]}));let t=e;return t})();var lp=class extends Vl{profilePicture;type="";userNodeInitialised=!1;userNodeContainer=new Ut;userNodeMask=new Dr;postNodeSvg=new Dr;postNodeInitialised=!1;commentNodeSvg=new Dr;commentNodeInitialised=!1;customColors={fill:14540253,stroke:14540253,label:14540253,selection:16777215,highlight:14540253};constructor(e,n,r){super(e,n,r),this.defaultNodeColors=this.customColors,r&&r.image&&this.loadTexture(),r&&r.type&&(this.type=r.type),this.draw()}loadTexture(){return I(this,null,function*(){let e=this.attributes;e.image&&(this.profilePicture=new Np(e.image))})}initNodeGraphics(e){this.select||this.highlight?this.container.zIndex=99999999:this.container.zIndex=0,this.type&&this.type==="user"&&(e.circle(0,0,this.radius()).stroke({color:14540253,width:(this.select||this.highlight,10)}),this.highlight||this.select?e.parent.scale=1.5:e.parent.scale=1,this.profilePicture&&!this.userNodeInitialised&&(this.userNodeContainer.width=e.parent.width,this.userNodeContainer.height=e.parent.height,this.profilePicture.width=this.radius()*2+10,this.profilePicture.height=this.radius()*2+10,this.profilePicture.x=(this.radius()+5)*-1,this.profilePicture.y=(this.radius()+5)*-1,e.parent.addChild(this.userNodeContainer),this.userNodeContainer.addChild(this.profilePicture),this.userNodeContainer.addChild(this.userNodeMask),this.userNodeContainer.mask=this.userNodeMask,this.userNodeMask.circle(0,0,this.radius()+5).fill({color:this.defaultNodeColors.fill}),this.userNodeInitialised=!0)),this.type&&this.type==="post"&&(e.circle(0,0,this.radius()).fill({color:0}),this.postNodeInitialised||(e.parent.addChild(this.postNodeSvg),this.postNodeSvg.rect(0,0,this.radius()/.9,this.radius()/.9).fill(14540253),this.postNodeSvg.pivot={x:this.postNodeSvg.width/2,y:this.postNodeSvg.height/2},this.postNodeInitialised=!0)),this.type&&this.type==="comment"&&(e.circle(0,0,this.radius()).fill({color:0}),this.commentNodeInitialised||(e.parent.addChild(this.commentNodeSvg),this.commentNodeSvg.rect(0,0,this.radius()/1.5,this.radius()/1.5).fill(14540253),this.commentNodeSvg.rotation=this.degrees_to_radians(45),this.commentNodeSvg.pivot={x:this.commentNodeSvg.width/2,y:this.commentNodeSvg.height/2},this.commentNodeInitialised=!0))}initLabelGraphics(e){e.text=this.attributes.label&&this.attributes.label?this.attributes.label:"",e.style={fontSize:20,fontFamily:"Arial",fill:this.select?this.defaultNodeColors.selection:this.highlight?this.defaultNodeColors.highlight:this.defaultNodeColors.label,align:"center"},e.x=this.attributes.radius?this.attributes.radius+20:10,e.y=-(e.height/2)}radius(){let e=this.attributes.radius?this.attributes.radius:10;return this.highlight||this.select?e+e*.2:e}degrees_to_radians(e){var n=Math.PI;return e*(n/180)}};var up=class extends $l{lineInitialised=!1;constructor(e,n,r,i,o=!1){super(e,n,r,i,o)}initEdgeLine(e){let n=this.edgePosition,r=this.attributes&&this.attributes.strokeWidth?this.attributes.strokeWidth:1;e.moveTo(n.source.x,n.source.y).lineTo(n.target.x,n.target.y).stroke({color:this.select||this.highlight?16777215:4473924,pixelLine:!1,width:this.select||this.highlight?r*2:r})}initEdgeArrow(e){}drawDash(e,n,r,i,o,s=2,a=2){let c=i-n,l=o-r,u=Math.sqrt(c*c+l*l),d=u/(s+a),f=s/(s+a),h=c/d*f,p=c/d-h,m=l/d*f,v=l/d-m;for(e.moveTo(n,r);u>0;)n+=h,r+=m,u-=s,u<0&&(n=i,r=o),e.lineTo(n,r),n+=p,r+=v,e.moveTo(n,r),u-=a;return e.moveTo(i,o),e}};var sR=ii(rR(),1);function z8(t,e){if(t&1&&re(0,"canvas",1),t&2){let n=L();yr(n.styleClass),De("qrCode",n.value)("qrCodeErrorCorrectionLevel",n.errorCorrectionLevel)("qrCodeCenterImageSrc",n.centerImageSrc)("qrCodeCenterImageWidth",n.centerImageSize)("qrCodeCenterImageHeight",n.centerImageSize)("qrCodeMargin",n.margin)("width",n.size)("height",n.size)("ngStyle",n.style)("darkColor",n.darkColor)("lightColor",n.lightColor)}}var iR=/^#(?:[0-9a-fA-F]{3,4}){1,2}$/,W8=(()=>{let e=class e{constructor(r){this.viewContainerRef=r,this.errorCorrectionLevel=e.DEFAULT_ERROR_CORRECTION_LEVEL,this.darkColor="#000000FF",this.lightColor="#FFFFFFFF",this.margin=16}ngOnChanges(){return I(this,null,function*(){if(!this.value)return;this.version&&this.version>40?(console.warn("[qrCode] max version is 40, clamping"),this.version=40):this.version&&this.version<1?(console.warn("[qrCode] min version is 1, clamping"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[qrCode] version should be set to a number, defaulting to auto"),this.version=void 0);let r=this.viewContainerRef.element.nativeElement;if(!r)return;let i=r.getContext("2d");i&&i.clearRect(0,0,i.canvas.width,i.canvas.height);let o=this.errorCorrectionLevel??e.DEFAULT_ERROR_CORRECTION_LEVEL,s=iR.test(this.darkColor)?this.darkColor:void 0,a=iR.test(this.lightColor)?this.lightColor:void 0;IC()&&(!s&&this.darkColor&&console.error("[ng-qrcode] darkColor set to invalid value, must be RGBA hex color string, eg: #3050A1FF"),!a&&this.lightColor&&console.error("[ng-qrcode] lightColor set to invalid value, must be RGBA hex color string, eg: #3050A130")),yield sR.default.toCanvas(r,this.value,{version:this.version,errorCorrectionLevel:o,width:this.width,margin:this.margin,color:{dark:s,light:a}});let c=this.centerImageSrc,l=oR(this.centerImageWidth,e.DEFAULT_CENTER_IMAGE_SIZE),u=oR(this.centerImageHeight,e.DEFAULT_CENTER_IMAGE_SIZE);if(c&&i){this.centerImage||(this.centerImage=new Image(l,u));let d=this.centerImage;c!==this.centerImage.src&&(d.src=c),l!==this.centerImage.width&&(d.width=l),u!==this.centerImage.height&&(d.height=u);let f=()=>{i.drawImage(d,r.width/2-l/2,r.height/2-u/2,l,u)};d.onload=f,d.complete&&f()}})}};e.DEFAULT_ERROR_CORRECTION_LEVEL="M",e.DEFAULT_CENTER_IMAGE_SIZE=40,e.\u0275fac=function(i){return new(i||e)(le(yi))},e.\u0275dir=vi({type:e,selectors:[["canvas","qrCode",""]],inputs:{value:[0,"qrCode","value"],version:[0,"qrCodeVersion","version"],errorCorrectionLevel:[0,"qrCodeErrorCorrectionLevel","errorCorrectionLevel"],width:"width",height:"height",darkColor:"darkColor",lightColor:"lightColor",centerImageSrc:[0,"qrCodeCenterImageSrc","centerImageSrc"],centerImageWidth:[0,"qrCodeCenterImageWidth","centerImageWidth"],centerImageHeight:[0,"qrCodeCenterImageHeight","centerImageHeight"],margin:[0,"qrCodeMargin","margin"]},features:[Is]});let t=e;return t})();function oR(t,e){return t===void 0||t===""?e:typeof t=="string"?parseInt(t,10):t}var aR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=be({type:e,selectors:[["qr-code"]],inputs:{value:"value",size:"size",style:"style",styleClass:"styleClass",darkColor:"darkColor",lightColor:"lightColor",errorCorrectionLevel:"errorCorrectionLevel",centerImageSrc:"centerImageSrc",centerImageSize:"centerImageSize",margin:"margin"},decls:1,vars:1,consts:[[3,"qrCode","qrCodeErrorCorrectionLevel","qrCodeCenterImageSrc","qrCodeCenterImageWidth","qrCodeCenterImageHeight","qrCodeMargin","width","height","class","ngStyle","darkColor","lightColor"],[3,"qrCode","qrCodeErrorCorrectionLevel","qrCodeCenterImageSrc","qrCodeCenterImageWidth","qrCodeCenterImageHeight","qrCodeMargin","width","height","ngStyle","darkColor","lightColor"]],template:function(i,o){i&1&&ue(0,z8,1,13,"canvas",0),i&2&&ee(o.value?0:-1)},dependencies:[W8,qt,of],encapsulation:2});let t=e;return t})();function q8(t,e){if(t&1&&(R(0,"div",1),U(1,"avg. engagement: "),R(2,"span"),U(3),ln(4,"number"),T(),U(5,"% "),T(),R(6,"span"),U(7,">="),T(),R(8,"div",2),U(9,"limit:"),R(10,"span"),U(11),ln(12,"number"),T(),U(13,"%"),T(),R(14,"span"),U(15,"\u2192"),T(),R(16,"div",3),U(17),T()),t&2){let n=L();F(3),at(Bn(4,3,n.getAvgEngagement(),"1.0-2")),F(8),at(Bn(12,6,n.getLimit(),"1.0-2")),F(6),at(n.getLives())}}function Y8(t,e){if(t&1&&(R(0,"div",1),U(1,"avg. engagement: "),R(2,"span"),U(3),ln(4,"number"),T(),U(5,"% "),T()),t&2){let n=L();F(3),at(Bn(4,1,n.getAvgEngagement(),"1.0-2"))}}function K8(t,e){if(t&1&&(re(0,"span",4),R(1,"div",5),U(2),T()),t&2){let n=L();F(2),at(n.time)}}var Ra=class Ra{constructor(e,n){this.gameService=e;this.datePipe=n}gameData;get time(){if(!this._time)return null;let e=new Date(this._time);return`${this.datePipe.transform(e,"EE, MMMM d y, HH:mm:ss")}.${e.getMilliseconds().toString().padStart(3,"0")}`}_time=0;gameMode="endless";gameSub=new fe;timeSub=new fe;ngOnInit(){this.gameSub=this.gameService.gameSubject.subscribe(e=>{this.gameData=e}),this.timeSub=this.gameService.gameTime.subscribe({next:e=>{this._time=e}})}ngOnDestroy(){this.gameSub.unsubscribe(),this.timeSub.unsubscribe()}getLimit(){return ET(this.gameData?.tasks.length||0)}getAvgEngagement(){let e=this.gameData?.views.length||0,n=this.gameData?.comments.length||0,r=this.gameData?.reactions.length||0;return CT(e,n,r)}getLives(){let e=this.getAvgEngagement(),n=this.getLimit(),r=200-n,o=(e-n)/r*100;return o>40?"\u2661\u2661\u2661\u2661\u2661":o>20?"\u2661\u2661\u2661\u2661":o>15?"\u2661\u2661\u2661":o>5?"\u2661\u2661":o>0?"\u2661":"\u{1F480}"}};g(Ra,"\u0275fac",function(n){return new(n||Ra)(le(xt),le(Hr))}),g(Ra,"\u0275cmp",be({type:Ra,selectors:[["app-footer"]],features:[Ec([Hr])],decls:4,vars:2,consts:[["id","score"],["id","engagement"],["id","limit"],["id","lifes"],[1,"spacer"],[1,"game-time"]],template:function(n,r){n&1&&(R(0,"div",0),ue(1,q8,18,9)(2,Y8,6,4,"div",1)(3,K8,3,1),T()),n&2&&(F(),ee(r.gameMode==="survival"?1:r.gameMode==="endless"?2:-1),F(2),ee(r.time?3:-1))},dependencies:[qt,sf],encapsulation:2}));var _p=Ra;var bR=ii(Gw());var Ho=class Ho{settings={adjustSizes:!0,barnesHutOptimize:!1,barnesHutTheta:.5,edgeWeightInfluence:1,gravity:40,linLogMode:!0,outboundAttractionDistribution:!0,scalingRatio:50,slowDown:3,strongGravityMode:!1};get layoutSettings(){return this.settings}constructor(){}buildGraph(e,n=!1,r=5){return I(this,null,function*(){if(!e.users||e.users.length===0)return;let i={nodes:[],edges:[]};for(let s of e.users){let a=yield Lo.load(`${s.profile_picture}`);i.nodes.push({id:s.uuid,attributes:{label:`${s.name} ${s.surname}`,type:"user",image:a}})}for(let s of e.posts)i.nodes.push({id:s.uuid,attributes:{type:"post"}});for(let s of e.comments)i.nodes.push({id:s.uuid,attributes:{type:"comment"}});if(e.relations.length)for(let s of e.relations)n?s.label==="follow"&&i.edges.push({source:s.source,target:s.target,attributes:{label:s.label,strokeWidth:1,colors:{stroke:6710886,label:14540253,highlight:14540253,selection:16777215}}}):i.edges.push({source:s.source,target:s.target,attributes:{label:s.label,strokeWidth:1,colors:{stroke:6710886,label:14540253,highlight:14540253,selection:16777215}}});else{console.log("NO RELATIONS, CREATE THEM");let s=a=>{for(let c of i.edges)if(c.source===a.source&&c.target===a.target)return!0;return!1};for(let a of e.users){let c=this.randomIntFromInterval(1,r);for(let l=0;l<c;l++){let u=e.users[this.randomIntFromInterval(0,e.users.length-1)];for(;u.uuid===a.uuid||s({source:a.uuid,target:u.uuid});)u=e.users[this.randomIntFromInterval(0,e.users.length-1)];i.edges.push({source:a.uuid,target:u.uuid,attributes:{label:"follow",strokeWidth:1,colors:{stroke:14540253,label:14540253,highlight:14540253,selection:16777215}}})}}}let o=new Se;for(let s of i.nodes)o.addNode(s.id);for(let s of i.edges)o.addEdge(s.source,s.target);for(let s=0;s<i.nodes.length;s++){let a=i.nodes[s];o.neighbors(a.id).length||i.nodes.splice(s,1)}return i})}getNodePaths(e,n){console.log("paths of node",n);let r=(0,bR.singleSourceLength)(e,n);console.log("paths",r)}randomIntFromInterval(e,n){return Math.floor(Math.random()*(n-e+1)+e)}};g(Ho,"\u0275fac",function(n){return new(n||Ho)}),g(Ho,"\u0275prov",B({token:Ho,factory:Ho.\u0275fac,providedIn:"root"}));var Oa=Ho;function sW(t,e){if(t&1){let n=Ln();R(0,"graph-viewer",2),Pt("graphInitialised",function(i){Ot(n);let o=L();return Nt(o.graphUpdated(i))})("graphUpdated",function(i){Ot(n);let o=L();return Nt(o.graphUpdated(i))})("onNodeSelectChange",function(i){Ot(n);let o=L();return Nt(o.log("nodeSelectChange",i))}),T()}if(t&2){let n=L();De("graphData",n.graphData)("animate",!0)("interactive",!1)("zoom",n.zoom)("highlightNode",n.highlightUser)("highlightEdge",n.highlightUsersConnection)("addNodes",n.addGraphNodes)("addEdges",n.addGraphEdges)("clearNodesHighlight",n.clearUsersHighlight)("clearNodesSelection",n.clearUserSelection)("clearEdgesHighlight",n.clearConnectionsHighlight)("snapToNode",n.snapToNode)("snapCenter",n.snapToCenter)("layoutSettings",n.graphLayoutSettings)("nodeRenderer",n.renderNode)("edgeRenderer",n.renderEdge)}}function aW(t,e){if(t&1&&re(0,"app-user",3),t&2){let n=L(2);De("user",n.getUserById(n.game.hero))("following",n.userFollow(n.game.hero))("followers",n.userIsFollowed(n.game.hero))}}function cW(t,e){if(t&1&&(R(0,"div",1),ue(1,aW,1,3,"app-user",3),T()),t&2){let n=L();F(),ee(n.game.hero?1:-1)}}function lW(t,e){if(t&1){let n=Ln();re(0,"app-screensaver"),R(1,"qr-code",4),Pt("click",function(){Ot(n);let i=L();return Nt(i.openController())}),T()}if(t&2){let n=L();F(),De("value",n.getControllerLink())}}var Na=class Na{constructor(e,n){this.gameService=e;this.graphService=n;this.graphLayoutSettings=this.graphService.layoutSettings}controllable=!1;graphLayoutSettings;graphData;highlightUser=void 0;highlightUsersConnection=void 0;selectUser="";clearUsersHighlight={clear:!1};clearUserSelection={clear:!1};clearConnectionsHighlight={clear:!1};graph;addGraphNodes={};addGraphEdges=null;linkValidFrom=Date.now();linkValidityInterval;snapToHeroInterval;snapToNode=void 0;snapToCenter=!1;game;zoomScale=.8;zoom={scale:this.zoomScale,center:!0};gameMessageSub=new fe;gameControllableSub=new fe;gameSub=new fe;buildedFromUpdate=!1;heroSelected=!1;nodesStorage={};renderNode=this.createNodeRenderer();renderEdge=this.createEdgeRenderer();get nodesCount(){return this.graph&&this.graph.nodes().length?this.graph.nodes.length:0}get heroId(){return this.game&&this.game.hero?this.game.hero:""}ngOnInit(){this.linkValidityInterval=setInterval(()=>{this.linkValidFrom=Date.now()},60*1e3),this.gameService.gameSubject.subscribe({next:e=>{e&&e.uuid&&(this.game?(this.updateExistingGame(e),this.buildedFromUpdate||(this.buildGraphDataFromGame(this.game),this.selectHero(),console.log("build graph with relations.length",e.relations.length)),this.buildedFromUpdate=!0):(this.game=e,console.log("updated game relations.length",e.relations.length)),this.game.hero&&setTimeout(()=>{this.snapToUser(this.game.hero)},10*1e3))}}),this.gameMessageSub=this.gameService.gameMessage.subscribe({next:e=>this.gameMessageHandler(e)}),this.gameControllableSub=this.gameService.controllable.subscribe({next:e=>{this.controllable=e}})}ngOnDestroy(){this.gameMessageSub.unsubscribe(),this.gameControllableSub.unsubscribe(),this.gameSub.unsubscribe(),clearInterval(this.snapToHeroInterval),clearInterval(this.linkValidityInterval)}getUserById(e){return ta(e,this.game.users)}getControllerLink(){let e=window.location,n=this.gameService.gameId;return`${e.href.replace("game","controller")}?from=${n}&valid=${this.linkValidFrom}`}openController(){let e=this.getControllerLink();window.open(e,"_blank")}graphUpdated(e){this.graph||console.log("graphInitialised",e),this.graph&&console.log("graphUpdated",e),e&&(this.graph=e),this.game.hero&&this.selectHero(),this.zoom={scale:this.zoomScale-this.nodesCount/80,center:!0}}buildGraphDataFromGame(e){this.graphService.buildGraph(e).then(n=>{n&&(this.graphData=n,console.warn("NODES COUNT: ",n.nodes.length),console.warn("EDGES COUNT: ",n.edges.length))}).catch(n=>console.error(n))}updateExistingGame(e){console.warn("GAME SHOULD BE JUST UPDATED:::tasks to update?",e.tasks,this.game.tasks),this.gameService.updateGame(this.game,e)}createNodeRenderer(){return({node:e,attributes:n,position:r})=>{let i=new lp(e,r,n);return this.nodesStorage[e]=i,i}}createEdgeRenderer(){return({edge:e,attributes:n,targetSize:r})=>new up(e,{source:{x:1,y:1},target:{x:1,y:1}},n,r)}gameMessageHandler(e){switch(e.type){case"game":e.data&&e.data.uuid&&this.gameService.gameSubject.next(e.data);break;case"message":this.gameCommandsHandler(e.data);break;default:console.log("recieved socket event",e)}}gameCommandsHandler(e){switch(e.command){case"highlight-graph-user":this.highlighGraphUser(e.data.userId,!0);break;case"highlight-graph-path":this.highlightGraphPath(e.data.path);break;case"select-hero":this.gameService.setHero(e.data.userId),this.snapToUser(this.gameService.getHero().uuid),this.selectHero();break;case"update-game":this.gameService.gameSubject.next(e.data.game);break;case"comment":let n=e.data.comment;if(n){let s=n.author,a={};a[n.uuid]={x:1,y:1,type:"comment"},this.addGraphNodes=a;let c=[];c.push({source:s,target:n.uuid,attributes:{label:"write",colors:{label:14540253}}}),c.push({source:n.uuid,target:n.parent,attributes:{label:"comment",colors:{label:14540253}}}),this.addGraphEdges=c,this.clearConnectionsHighlight={clear:!0}}break;case"reaction":let r=e.data.reaction;if(console.log("NEW REACTION",r),r){let s=this.gameService.getPost(r.parent);s&&this.graph.findEdge(r.author,s.uuid,a=>{console.log("EDGE FOUND",a),a&&(this.graph.dropEdge(a),this.addGraphEdges=[{source:s.uuid,target:r.author,attributes:{label:r.value,colors:{label:14540253}}}])}),this.clearConnectionsHighlight={clear:!0}}break;case"task":let i=e.data.task,o=this.gameService.getPost(i.showPost);if(o){this.clearConnectionsHighlight={clear:!0},this.clearUsersHighlight={clear:!0};let s=o.author,a={};a[o.uuid]={x:1,y:1,type:"post"},this.addGraphNodes=a;let c=[];c.push({source:s,target:o.uuid,attributes:{label:"write",colors:{label:14540253}}});for(let l of i.showTo)c.push({source:o.uuid,target:l,attributes:{label:"get",colors:{label:14540253}}});this.addGraphEdges=c}else console.error("POST NOT FOUND",i.showPost);break;case"set-fictional-time":this.gameService.setFictionalTime(e.data.ftime);break;default:console.warn("recieved unexpectedsocket command",e)}}userFollow(e){return this.gameService.userIsFollowing(this.graph,e)}userIsFollowed(e){return this.gameService.userIsFollowed(this.graph,e)}highlighGraphUser(e,n=!1){this.graph&&(this.clearUsersHighlight={clear:!0},this.clearConnectionsHighlight={clear:!0},setTimeout(()=>{if(this.highlightUser=e,n){let r=[];if(this.graph.findEdge(e,(i,o)=>{r.push(i)}),r.length){let i=0,o=setInterval(()=>{i>r.length&&clearInterval(o),this.highlightUsersConnection=r[i],i++},10)}}},10))}highlightGraphPath(e){if(!this.graph)return;this.clearConnectionsHighlight={clear:!0},this.highlightUsersConnection=void 0;let n,r=0,i=s=>{this.highlightUsersConnection=s[r],r++,r===s.length&&clearInterval(n)},o=[];for(let s=0;s<e.length;s++)if(e[s+1]){let a=e[s],c=e[s+1];this.graph.findEdge(a,c,l=>{o.push(l),o.length===e.length-1&&(n=setInterval(()=>i(o),10))})}this.highlighGraphUser(e[e.length-1])}selectHero(){!this.graph||!this.game||this.heroSelected||this.nodesStorage[this.game.hero]&&(this.nodesStorage[this.game.hero].select=!0,this.heroSelected=!0)}snapToUser(e){this.graph&&(console.log("snap to user",e),this.snapToCenter=!1,this.snapToNode=void 0,setTimeout(()=>this.snapToNode=e,100))}log(e,n){console.log(e,n)}};g(Na,"\u0275fac",function(n){return new(n||Na)(le(xt),le(Oa))}),g(Na,"\u0275cmp",be({type:Na,selectors:[["app-game"]],decls:5,vars:3,consts:[[3,"graphData","animate","interactive","zoom","highlightNode","highlightEdge","addNodes","addEdges","clearNodesHighlight","clearNodesSelection","clearEdgesHighlight","snapToNode","snapCenter","layoutSettings","nodeRenderer","edgeRenderer"],[1,"hero"],[3,"graphInitialised","graphUpdated","onNodeSelectChange","graphData","animate","interactive","zoom","highlightNode","highlightEdge","addNodes","addEdges","clearNodesHighlight","clearNodesSelection","clearEdgesHighlight","snapToNode","snapCenter","layoutSettings","nodeRenderer","edgeRenderer"],[3,"user","following","followers"],[3,"click","value"]],template:function(n,r){n&1&&(ue(0,sW,1,16,"graph-viewer",0)(1,cW,2,1,"div",1),re(2,"app-feed"),ue(3,lW,2,1),re(4,"app-footer")),n&2&&(ee(r.graphData?0:-1),F(),ee(r.game?1:-1),F(2),ee(r.controllable?3:-1))},dependencies:[Oi,aR,_p,rM,Fh,Lh],encapsulation:2}));var Ep=Na;var Pa=class Pa{};g(Pa,"\u0275fac",function(n){return new(n||Pa)}),g(Pa,"\u0275cmp",be({type:Pa,selectors:[["app-not-found"]],decls:2,vars:0,template:function(n,r){n&1&&(R(0,"p"),U(1,"not-found works!"),T())},encapsulation:2}));var Cp=Pa;var Fa=class Fa{constructor(e){this.elm=e}data;onScreen=new Ge;onscreen=!1;eventFired=!1;ngOnInit(){window.addEventListener("scroll",this.scrollHandler.bind(this),!1)}ngOnDestroy(){window.removeEventListener("scroll",this.scrollHandler)}scrollHandler(e){let n=this.elm.nativeElement.getBoundingClientRect(),r=window.innerHeight,i=r/4;n.top>=0&&n.top<=r-(r-n.height)/2?(this.onscreen=!0,this.eventFired||(this.onScreen.emit(this.data),this.eventFired=!0)):(this.onscreen=!1,this.eventFired=!1)}};g(Fa,"\u0275fac",function(n){return new(n||Fa)(le(Ht))}),g(Fa,"\u0275cmp",be({type:Fa,selectors:[["app-on-screen"]],inputs:{data:"data"},outputs:{onScreen:"onScreen"},decls:0,vars:0,template:function(n,r){},encapsulation:2}));var La=Fa;var Xl=ii(Gw());var uW=t=>({highlight:t}),zw=(t,e)=>e.uuid;function dW(t,e){if(t&1){let n=Ln();R(0,"div",1)(1,"button",3),Pt("click",function(){Ot(n);let i=L(3);return Nt(i.distribute())}),U(2,"Send Post"),T()()}}function fW(t,e){if(t&1){let n=Ln();R(0,"div",4),Pt("click",function(){let i=Ot(n).$implicit,o=L(3);return Nt(o.selectPost(i.uuid))}),re(1,"app-post",5),T()}if(t&2){let n=e.$implicit,r=L(3);Ms("selected",r.selectedPostId===n.uuid),F(),De("post",n)}}function hW(t,e){if(t&1){let n=Ln();R(0,"app-on-screen",6),Pt("onScreen",function(i){Ot(n);let o=L(4);return Nt(o.userIsOnScreen(i))}),T(),R(1,"app-user",7),Pt("click",function(){Ot(n);let i=L().$implicit,o=L(3);return Nt(o.selectUserForPost(i.uuid))}),T()}if(t&2){let n=L().$implicit,r=L(3);De("data",n.uuid),F(),yr(Qn(6,uW,r.highlightedUser===n.uuid)),De("user",n)("following",r.userFollow(n.uuid))("followers",r.userIsFollowed(n.uuid))}}function pW(t,e){if(t&1&&ue(0,hW,2,8),t&2){let n=e.$implicit,r=L(3);ee(!r.showTo.includes(n.uuid)&&n.uuid!==r.hero.uuid?0:-1)}}function gW(t,e){if(t&1&&(R(0,"div",0)(1,"h2"),U(2,"Outbound Content Detected"),T(),R(3,"div"),U(4,"Pick users to receive Managed User's post."),T()(),ue(5,dW,3,0,"div",1),Ze(6,fW,2,3,"div",2,zw),Ze(8,pW,1,1,null,null,zw)),t&2){let n=L(2);F(5),ee(n.showTo.length&&n.showTo.length>=2?5:-1),F(),Xe(n.posts),F(2),Xe(n.users)}}function mW(t,e){if(t&1){let n=Ln();R(0,"div",4),Pt("click",function(){let i=Ot(n).$implicit,o=L(3);return Nt(o.selectPost(i.uuid))}),R(1,"p",10),U(2),T(),re(3,"app-post",5),T()}if(t&2){let n=e.$implicit,r=L(3);Ms("selected",r.selectedPostId===n.uuid),F(2),at(r.getUserInvolved(n.uuid)),F(),De("post",n)}}function yW(t,e){if(t&1){let n=Ln();R(0,"div",0)(1,"h2"),U(2,"Inbound Content Detected"),T(),R(3,"div"),U(4,"Select a post to inject into Managed User's feed."),T()(),Ze(5,mW,4,4,"div",2,zw),R(7,"div",8)(8,"button",9),Pt("click",function(){Ot(n);let i=L(2);return Nt(i.notShowAny())}),U(9,"Reject All Posts"),T()()}if(t&2){let n=L(2);F(5),Xe(n.posts)}}function vW(t,e){if(t&1&&ue(0,gW,10,1)(1,yW,10,0),t&2){let n=L();ee(n.task.type==="distributePost"?0:-1),F(),ee(n.task.type==="showPost"?1:-1)}}var Ba=class Ba{constructor(e){this.gameService=e}task;graph;pathToTarget=new Ge;posts=[];showTo=[];selectedPostId=null;highlightedUser="";get users(){return this.gameService.game.users.filter(e=>e.uuid!==this.gameService.getHero().uuid)}get hero(){return this.gameService.getHero()}ngOnInit(){console.log("task",this.task),this.posts=this.task.posts.map(e=>this.gameService.getPost(e)),console.log("posts",this.posts),this.gameService.game&&this.gameService.saveGame(this.gameService.game)}ngOnDestroy(){this.graph.clear()}selectPost(e){if(!this.graph.nodes().length||!this.gameService.getHero())return;let n=this.gameService.getPost(e);if(!n)return;this.selectedPostId=e,this.task.showPost=e;let r=n?n.author:null,i=(0,Xl.bidirectional)(this.graph,this.gameService.getHero().uuid,r);i&&i.length?(this.pathToTarget.emit(i),i.pop(),this.task.showTo=i):this.task.showTo=[this.gameService.getHero().uuid],this.completeTask()}getPostPath(e){if(!this.graph.nodes().length||!this.gameService.getHero())return[];let n=this.gameService.getPost(e);if(!n)return[];let r=n?n.author:null,i=(0,Xl.bidirectional)(this.graph,this.gameService.getHero().uuid,r);return i&&i.length?i:[]}userFollow(e){return this.gameService.userIsFollowing(this.graph,e)}userIsFollowed(e){return this.gameService.userIsFollowed(this.graph,e)}notShowAny(){console.log("not show any posts",this.posts),this.task.showTo=[],this.completeTask()}selectUserForPost(e){if(this.graph){let n=(0,Xl.bidirectional)(this.graph,this.gameService.getHero().uuid,e);n&&(this.pathToTarget.emit(n),n.shift(),console.warn(`\u{1F525} path from HERO ${this.gameService.getHero().uuid} to USER ${e}`,n),this.showTo=[...n])}this.showTo.includes(e)||this.showTo.push(e),this.showTo.length>=2&&this.distribute()}userIsOnScreen(e){if(console.log(`user ${e} is on screen...`),this.highlightedUser=e,this.graph.nodes().length){let n=(0,Xl.bidirectional)(this.graph,this.gameService.getHero().uuid,e);n&&n.length&&(this.pathToTarget.emit(n),this.gameService.sendGameMessage({command:"highlight-graph-path",data:{path:n}}))}}distribute(){console.log("distribute post to users: ",this.showTo),this.task.showTo=this.showTo,this.completeTask()}getUserInvolved(e){let n=this.getPostPath(e);return this.gameService.usersOnPathNotification(n)}completeTask(){this.pathToTarget.emit([]),this.task.completed=!0,this.gameService.nextTask(this.task),this.notifyPeers(),this.gameService.createPostRelations(this.task),this.gameService.onTask.next(this.task)}notifyPeers(){this.gameService.sendGameMessage({command:"update-game",data:{game:this.gameService.game}})}};g(Ba,"\u0275fac",function(n){return new(n||Ba)(le(xt))}),g(Ba,"\u0275cmp",be({type:Ba,selectors:[["app-task"]],inputs:{task:"task",graph:"graph"},outputs:{pathToTarget:"pathToTarget"},decls:1,vars:1,consts:[[1,"task-description"],[1,"controls"],[1,"post-selection",3,"selected"],[1,"distribute",3,"click"],[1,"post-selection",3,"click"],[3,"post"],[3,"onScreen","data"],[3,"click","user","following","followers"],[1,"buttons"],[1,"decline",3,"click"],[1,"bot-font"]],template:function(n,r){n&1&&ue(0,vW,2,2),n&2&&ee(r.task?0:-1)},dependencies:[ua,Oi,La],encapsulation:2}));var Dp=Ba;var Sp;function wW(){if(Sp===void 0&&(Sp=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(Sp=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Sp}function Ql(t){return wW()?.createHTML(t)||t}function _R(t){return Error(`Unable to find icon with the name "${t}"`)}function bW(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function ER(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function CR(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var ri=class{url;svgText;options;svgElement;constructor(e,n,r){this.url=e,this.svgText=n,this.options=r}},SR=(()=>{let e=class e{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(r,i,o,s){this._httpClient=r,this._sanitizer=i,this._errorHandler=s,this._document=o}addSvgIcon(r,i,o){return this.addSvgIconInNamespace("",r,i,o)}addSvgIconLiteral(r,i,o){return this.addSvgIconLiteralInNamespace("",r,i,o)}addSvgIconInNamespace(r,i,o,s){return this._addSvgIconConfig(r,i,new ri(o,null,s))}addSvgIconResolver(r){return this._resolvers.push(r),this}addSvgIconLiteralInNamespace(r,i,o,s){let a=this._sanitizer.sanitize(Gt.HTML,o);if(!a)throw CR(o);let c=Ql(a);return this._addSvgIconConfig(r,i,new ri("",c,s))}addSvgIconSet(r,i){return this.addSvgIconSetInNamespace("",r,i)}addSvgIconSetLiteral(r,i){return this.addSvgIconSetLiteralInNamespace("",r,i)}addSvgIconSetInNamespace(r,i,o){return this._addSvgIconSetConfig(r,new ri(i,null,o))}addSvgIconSetLiteralInNamespace(r,i,o){let s=this._sanitizer.sanitize(Gt.HTML,i);if(!s)throw CR(i);let a=Ql(s);return this._addSvgIconSetConfig(r,new ri("",a,o))}registerFontClassAlias(r,i=r){return this._fontCssClassesByAlias.set(r,i),this}classNameForFontAlias(r){return this._fontCssClassesByAlias.get(r)||r}setDefaultFontSetClass(...r){return this._defaultFontSetClass=r,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(r){let i=this._sanitizer.sanitize(Gt.RESOURCE_URL,r);if(!i)throw ER(r);let o=this._cachedIconsByUrl.get(i);return o?Y(Ip(o)):this._loadSvgIconFromConfig(new ri(r,null)).pipe(tt(s=>this._cachedIconsByUrl.set(i,s)),ne(s=>Ip(s)))}getNamedSvgIcon(r,i=""){let o=DR(i,r),s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,r),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);let a=this._iconSetConfigs.get(i);return a?this._getSvgFromIconSetConfigs(r,a):ci(_R(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(r){return r.svgText?Y(Ip(this._svgElementFromConfig(r))):this._loadSvgIconFromConfig(r).pipe(ne(i=>Ip(i)))}_getSvgFromIconSetConfigs(r,i){let o=this._extractIconWithNameFromAnySet(r,i);if(o)return Y(o);let s=i.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(cr(c=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(Gt.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(u)),Y(null)})));return sg(s).pipe(ne(()=>{let a=this._extractIconWithNameFromAnySet(r,i);if(!a)throw _R(r);return a}))}_extractIconWithNameFromAnySet(r,i){for(let o=i.length-1;o>=0;o--){let s=i[o];if(s.svgText&&s.svgText.toString().indexOf(r)>-1){let a=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(a,r,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(r){return this._fetchIcon(r).pipe(tt(i=>r.svgText=i),ne(()=>this._svgElementFromConfig(r)))}_loadSvgIconSetFromConfig(r){return r.svgText?Y(null):this._fetchIcon(r).pipe(tt(i=>r.svgText=i))}_extractSvgIconFromSet(r,i,o){let s=r.querySelector(`[id="${i}"]`);if(!s)return null;let a=s.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,o);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),o);let c=this._svgElementFromString(Ql("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,o)}_svgElementFromString(r){let i=this._document.createElement("DIV");i.innerHTML=r;let o=i.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(r){let i=this._svgElementFromString(Ql("<svg></svg>")),o=r.attributes;for(let s=0;s<o.length;s++){let{name:a,value:c}=o[s];a!=="id"&&i.setAttribute(a,c)}for(let s=0;s<r.childNodes.length;s++)r.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(r.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(r,i){return r.setAttribute("fit",""),r.setAttribute("height","100%"),r.setAttribute("width","100%"),r.setAttribute("preserveAspectRatio","xMidYMid meet"),r.setAttribute("focusable","false"),i&&i.viewBox&&r.setAttribute("viewBox",i.viewBox),r}_fetchIcon(r){let{url:i,options:o}=r,s=o?.withCredentials??!1;if(!this._httpClient)throw bW();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let a=this._sanitizer.sanitize(Gt.RESOURCE_URL,i);if(!a)throw ER(i);let c=this._inProgressUrlFetches.get(a);if(c)return c;let l=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(ne(u=>Ql(u)),Ar(()=>this._inProgressUrlFetches.delete(a)),dg());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(r,i,o){return this._svgIconConfigs.set(DR(r,i),o),this}_addSvgIconSetConfig(r,i){let o=this._iconSetConfigs.get(r);return o?o.push(i):this._iconSetConfigs.set(r,[i]),this}_svgElementFromConfig(r){if(!r.svgElement){let i=this._svgElementFromString(r.svgText);this._setSvgAttributes(i,r.options),r.svgElement=i}return r.svgElement}_getIconConfigFromResolvers(r,i){for(let o=0;o<this._resolvers.length;o++){let s=this._resolvers[o](i,r);if(s)return xW(s)?new ri(s.url,null,s.options):new ri(s,null)}}};g(e,"\u0275fac",function(i){return new(i||e)(W(kc,8),W(zy),W(ct,8),W(sn))}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function Ip(t){return t.cloneNode(!0)}function DR(t,e){return t+":"+e}function xW(t){return!!(t.url&&t.options)}var Ww;try{Ww=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ww=!1}var Tp=(()=>{let e=class e{_platformId=S(Br);isBrowser=this._platformId?WC(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Ww)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function qw(t){return Array.isArray(t)?t:[t]}var IR=new Set,Go,_W=(()=>{let e=class e{_platform=S(Tp);_nonce=S(yc,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):CW}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&EW(r,this._nonce),this._matchMedia(r)}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function EW(t,e){if(!IR.has(t))try{Go||(Go=document.createElement("style"),e&&Go.setAttribute("nonce",e),Go.setAttribute("type","text/css"),document.head.appendChild(Go)),Go.sheet&&(Go.sheet.insertRule(`@media ${t} {body{ }}`,0),IR.add(t))}catch(n){console.error(n)}}function CW(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var AR=(()=>{let e=class e{_mediaMatcher=S(_W);_zone=S(st);_queries=new Map;_destroySubject=new Te;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return TR(qw(r)).some(o=>this._registerQuery(o).mql.matches)}observe(r){let o=TR(qw(r)).map(a=>this._registerQuery(a).observable),s=is(o);return s=li(s.pipe(mn(1)),s.pipe(fg(1),ag(0))),s.pipe(ne(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);let i=this._mediaMatcher.matchMedia(r),s={observable:new _e(a=>{let c=l=>this._zone.run(()=>a.next(l));return i.addListener(c),()=>{i.removeListener(c)}}).pipe(Za(i),ne(({matches:a})=>({query:r,matches:a})),Xa(this._destroySubject)),mql:i};return this._queries.set(r,s),s}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();function TR(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var Hi=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Hi||{}),MR="cdk-high-contrast-black-on-white",RR="cdk-high-contrast-white-on-black",Yw="cdk-high-contrast-active",Kw=(()=>{let e=class e{_platform=S(Tp);_hasCheckedHighContrastMode;_document=S(ct);_breakpointSubscription;constructor(){this._breakpointSubscription=S(AR).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Hi.NONE;let r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);let i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(r):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(r.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Hi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Hi.BLACK_ON_WHITE}return Hi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let r=this._document.body.classList;r.remove(Yw,MR,RR),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Hi.BLACK_ON_WHITE?r.add(Yw,MR):i===Hi.WHITE_ON_BLACK&&r.add(Yw,RR)}}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();var Zw=(()=>{let e=class e{};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275mod",zt({type:e})),g(e,"\u0275inj",Vt({}));let t=e;return t})();var Xw=(()=>{let e=class e{constructor(){S(Kw)._applyBodyHighContrastModeCssClasses()}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275mod",zt({type:e})),g(e,"\u0275inj",Vt({imports:[Zw,Zw]}));let t=e;return t})();var DW=["*"],SW=new z("MAT_ICON_DEFAULT_OPTIONS"),IW=new z("mat-icon-location",{providedIn:"root",factory:TW});function TW(){let t=S(ct),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var kR=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],AW=kR.map(t=>`[${t}]`).join(", "),MW=/^url\(['"]?#(.*?)['"]?\)$/,OR=(()=>{let e=class e{_elementRef=S(Ht);_iconRegistry=S(SR);_location=S(IW);_errorHandler=S(sn);_defaultColor;get color(){return this._color||this._defaultColor}set color(r){this._color=r}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(r){r!==this._svgIcon&&(r?this._updateSvgIcon(r):this._svgIcon&&this._clearSvgElement(),this._svgIcon=r)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(r){let i=this._cleanupFontValue(r);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(r){let i=this._cleanupFontValue(r);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=fe.EMPTY;constructor(){let r=S(new dd("aria-hidden"),{optional:!0}),i=S(SW,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),r||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(r){if(!r)return["",""];let i=r.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${r}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let r=this._elementsWithExternalReferences;if(r&&r.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(r){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(r),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(r)}_clearSvgElement(){let r=this._elementRef.nativeElement,i=r.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let o=r.childNodes[i];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let r=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>r.classList.remove(o)),i.forEach(o=>r.classList.add(o)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&r.classList.remove(this._previousFontIconClass),this.fontIcon&&r.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(r){return typeof r=="string"?r.trim().split(" ")[0]:r}_prependPathToReferences(r){let i=this._elementsWithExternalReferences;i&&i.forEach((o,s)=>{o.forEach(a=>{s.setAttribute(a.name,`url('${r}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(r){let i=r.querySelectorAll(AW),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)kR.forEach(a=>{let c=i[s],l=c.getAttribute(a),u=l?l.match(MW):null;if(u){let d=o.get(c);d||(d=[],o.set(c,d)),d.push({name:a,value:u[1]})}})}_updateSvgIcon(r){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),r){let[i,o]=this._splitIconName(r);i&&(this._svgNamespace=i),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,i).pipe(mn(1)).subscribe(s=>this._setSvgElement(s),s=>{let a=`Error retrieving icon ${i}:${o}! ${s.message}`;this._errorHandler.handleError(new Error(a))})}}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275cmp",be({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,o){i&2&&(_c("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),yr(o.color?"mat-"+o.color:""),Ms("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Sc],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:DW,decls:1,vars:0,template:function(i,o){i&1&&(mC(),yC(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0}));let t=e;return t})(),Qw=(()=>{let e=class e{};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275mod",zt({type:e})),g(e,"\u0275inj",Vt({imports:[Xw,Xw]}));let t=e;return t})();var zo=class zo{};g(zo,"\u0275fac",function(n){return new(n||zo)}),g(zo,"\u0275mod",zt({type:zo})),g(zo,"\u0275inj",Vt({imports:[qt,Qw,Qw]}));var Ap=zo;var Jw=class{msToString(e,n="m"){let r=(l,u=2)=>("00"+l).slice(-u),i=Math.floor(e%1e3);e=Math.floor(e/1e3);let o=e%60;e=Math.floor(e/60);let s=e%60;e=Math.floor(e/60);let a=e%24,c=Math.floor(e/24);switch(n){case"s":return`${r(o)}.${r(i,3)}`;case"m":return`${r(s)}:${r(o)}.${r(i,3)}`;case"h":return`${r(a)}:${r(s)}:${r(o)}.${r(i,3)}`;case"d":return`${c}d ${r(a)}:${r(s)}:${r(o)}.${r(i,3)}`;default:return`${r(s)}:${r(o)}.${r(i,3)}`}}},NR=(()=>{let e=class e{subject=new Ye({valueNumber:0,valueString:"00:00.000"});startTime=0;elapsedWhenPaused=0;isPaused=!1;speed=1;resolution="m";duration=0;rafId=null;lastUpdateTime=0;lastValue=0;visualSmooth=!1;start(r=0,i=0,o="m",s=1,a=!1){this.stop(),this.isPaused=!1,this.elapsedWhenPaused=r,this.resolution=o,this.speed=s,this.duration=i,this.visualSmooth=a,this.startTime=Date.now(),this.lastUpdateTime=this.startTime,this.lastValue=r,this.tick()}tick=()=>{if(this.isPaused)return;let r=Date.now(),i=this.elapsedWhenPaused+(r-this.startTime)*this.speed,o=Math.min(i,this.duration),s=Math.max(this.duration-o,0),a=s;if(this.visualSmooth){let l=r-this.lastUpdateTime,f=1e3/60*this.speed,h=this.lastValue+f,p=Math.max(this.duration-h,0);a=Math.min(s,p)}let c=new Jw().msToString(a,this.resolution);this.subject.next({valueNumber:s,valueString:c}),this.lastUpdateTime=r,this.lastValue=o,s<=0?this.subject.complete():this.rafId=requestAnimationFrame(this.tick)};pause(){this.isPaused||(this.isPaused=!0,this.elapsedWhenPaused+=(Date.now()-this.startTime)*this.speed,this.rafId&&cancelAnimationFrame(this.rafId))}resume(){this.isPaused&&(this.isPaused=!1,this.startTime=Date.now(),this.lastUpdateTime=this.startTime,this.tick())}setSpeed(r){this.pause(),this.speed=r,this.resume()}stop(){this.isPaused=!0,this.rafId&&cancelAnimationFrame(this.rafId),this.subject.complete(),this.subject=new Ye({valueNumber:0,valueString:"00:00.000"})}getObservable(){return this.subject}};g(e,"\u0275fac",function(i){return new(i||e)}),g(e,"\u0275prov",B({token:e,factory:e.\u0275fac,providedIn:"root"}));let t=e;return t})();var OW=t=>({highlight:t}),PR=(t,e)=>e.uuid;function NW(t,e){t&1&&re(0,"mat-icon",2)}function PW(t,e){t&1&&re(0,"mat-icon",3)}function FW(t,e){t&1&&re(0,"mat-icon",4)}function LW(t,e){t&1&&re(0,"mat-icon",5)}function BW(t,e){if(t&1&&(R(0,"div",6),U(1),T()),t&2){let n=L(2);F(),at(n.usersOnPathNotification(n.pathToTarget))}}function UW(t,e){if(t&1&&(R(0,"div",7),U(1),T()),t&2){let n=L(2);F(),at(n.countDownTimer.valueString)}}function jW(t,e){t&1&&(R(0,"div",9)(1,"h1"),U(2,"Managed User Selection"),T(),R(3,"div"),U(4,"You will manage their inbound and outbound content."),T()())}function $W(t,e){t&1&&(R(0,"div",10)(1,"h2"),U(2,"Processing Network Activity"),T(),R(3,"p"),U(4,"Processing data. Awaiting nodes. Stand by."),T(),re(5,"div",11),T())}function VW(t,e){if(t&1){let n=Ln();R(0,"app-task",13),Pt("pathToTarget",function(i){Ot(n);let o=L(4);return Nt(o.onPathToTarget(i))}),T()}if(t&2){let n=L().$implicit,r=L(3);De("task",n)("graph",r.socialGraph)}}function HW(t,e){if(t&1&&ue(0,VW,1,2,"app-task",12),t&2){let n=e.$implicit;ee(n.completed?-1:0)}}function GW(t,e){if(t&1&&Ze(0,HW,1,1,null,null,PR),t&2){let n=L(2);Xe(n.game.tasks)}}function zW(t,e){if(t&1){let n=Ln();R(0,"app-on-screen",14),Pt("onScreen",function(i){Ot(n);let o=L(3);return Nt(o.userIsOnScreen(i))}),T(),R(1,"app-user",15),Pt("click",function(){let i=Ot(n).$implicit,o=L(3);return Nt(o.selectHero(i.uuid))}),T()}if(t&2){let n=e.$implicit,r=L(3);De("data",n.uuid),F(),yr(Qn(6,OW,r.highlightedUser===n.uuid)),De("following",r.userFollow(n.uuid))("followers",r.userIsFollowed(n.uuid))("user",n)}}function WW(t,e){if(t&1&&Ze(0,zW,2,8,null,null,PR),t&2){let n=L(2);Xe(n.usersByNeighbours())}}function qW(t,e){if(t&1&&(R(0,"div",0)(1,"div",1),ue(2,NW,1,0,"mat-icon",2)(3,PW,1,0,"mat-icon",3)(4,FW,1,0,"mat-icon",4)(5,LW,1,0,"mat-icon",5),T(),ue(6,BW,2,1,"div",6)(7,UW,2,1,"div",7),T(),R(8,"div",8),ue(9,jW,5,0,"div",9)(10,$W,6,0,"div",10)(11,GW,2,0)(12,WW,2,0),T()),t&2){let n=L();F(2),ee(n.game.hero?-1:2),F(),ee(!n.isAnyOpenTask()&&n.game.hero?3:n.game.tasks[0].type==="distributePost"?4:n.game.tasks[0].type==="showPost"?5:-1),F(3),ee(n.pathToTarget.length>=1?6:-1),F(),ee(n.countDownTimer?7:-1),F(2),ee(n.game.hero?-1:9),F(),ee(!n.isAnyOpenTask()&&n.game.hero?10:-1),F(),ee(n.game.hero?11:12)}}function YW(t,e){t&1&&(R(0,"div",0),re(1,"mat-icon",16),T(),R(2,"div",10)(3,"h1"),U(4,"Control Permissions Lost"),T(),R(5,"p"),U(6,"Scan the QR code again to continue."),T()())}var Ua=class Ua{constructor(e,n,r,i){this.gameService=e;this.route=n;this.countDown=r;this.graphService=i}gameControlSub=new fe;gameSub=new fe;gameMessageSub=new fe;commentsSub=new fe;reactionsSub=new fe;taskSub=new fe;canControl=!1;game;highlightedUser="";connectedGameInstance="";connectionValidFrom;maxIdleTime=5*60*1e3;countDownTimer;socialGraph=new Se({multi:!1,allowSelfLoops:!0,type:"directed"});graph=new Se({multi:!1,allowSelfLoops:!0,type:"directed"});pathToTarget=[];ngOnInit(){this.connectedGameInstance=this.route.snapshot.queryParams.from,this.connectionValidFrom=parseInt(this.route.snapshot.queryParams.valid),console.log("valid",this.connectionValidFrom),console.log("Date.now() - this.connectionValidFrom",Date.now()-this.connectionValidFrom),this.connectionValidFrom&&Date.now()-this.connectionValidFrom<2*60*1e3&&(this.restartCountDown(),window.addEventListener("click",this.userInteractionHandler.bind(this)),window.addEventListener("scroll",this.userInteractionHandler.bind(this)),this.gameMessageSub=this.gameService.gameMessage.subscribe({next:e=>{switch(e.type){case"disconnected":e.data.id===this.connectedGameInstance&&(this.canControl=!1,this.gameService.destroy());break;case"game":e.data&&e.data.uuid&&this.gameService.gameSubject.next(e.data);break;default:console.log("got socket event",e)}}}),this.gameSub=this.gameService.gameSubject.subscribe({next:e=>{e&&e.uuid&&(this.game?(console.warn("GAME EXIST AND SHOULD BE ONLY UPDATED..."),this.gameService.updateGame(this.game,e)):(this.game=e,this.game.created=Date.now(),console.warn("GRAPH SHOULD BE CALCULATED FROM REAL RELATIONS, NOT A RANDOM ONE...")),console.warn("HERO?",this.game.hero),this.buildGraphs())}}),this.gameControlSub=this.gameService.canControl.subscribe({next:e=>this.canControl=e}),this.requestGameControl(),this.reactionsSub=this.gameService.onReaction.subscribe({next:e=>{let n=this.game.relations.find(r=>r.source===e.parent&&r.target===e.author);n&&n.label&&(n.label=e.value),this.sendGameToPeers(),this.gameService.sendGameMessage({command:"reaction",data:{reaction:e}})}}),this.commentsSub=this.gameService.onComment.subscribe({next:e=>{console.log("got new comment",e);let n={source:e.author,target:e.uuid,label:"write"},r={source:e.uuid,target:e.parent,label:"comment"};this.game.relations.push(n,r),this.sendGameToPeers(),this.gameService.sendGameMessage({command:"comment",data:{comment:e}})}}),this.taskSub=this.gameService.onTask.subscribe({next:e=>{console.log("on task",e),this.gameService.sendGameMessage({command:"task",data:{task:e}})}}))}ngOnDestroy(){this.countDown.stop(),this.gameControlSub.unsubscribe(),this.gameSub.unsubscribe(),this.gameMessageSub.unsubscribe(),this.gameService.destroy(),window.removeEventListener("click",this.userInteractionHandler),window.removeEventListener("scroll",this.userInteractionHandler),this.commentsSub.unsubscribe(),this.reactionsSub.unsubscribe(),this.taskSub.unsubscribe()}userInteractionHandler(){this.restartCountDown()}buildGraphs(){this.game&&(this.graphService.buildGraph(this.game,!0).then(e=>{if(e){console.log("recalculating socialGraph...",e),this.socialGraph.clear();for(let n of e.nodes)this.socialGraph.addNode(n.id,n.attributes?n.attributes:{});for(let n of e.edges)this.socialGraph.addEdge(n.source,n.target)}}),this.graphService.buildGraph(this.game,!1).then(e=>{if(e){console.log("recalculating complete graph...",e),this.graph.clear();for(let n of e.nodes)this.graph.addNode(n.id,n.attributes?n.attributes:{});for(let n of e.edges)this.graph.addEdge(n.source,n.target)}}))}restartCountDown(){this.countDown.start(0,this.maxIdleTime,"m",1);let e=this.countDown.getObservable().subscribe({next:n=>{this.countDownTimer=n},complete:()=>{e.unsubscribe(),this.countDownTimer.valueNumber===0&&(this.canControl=!1,this.gameService.destroy())}})}sendGameToPeers(){this.gameService.sendGameMessage({command:"update-game",data:{game:this.game}})}selectHero(e){console.log("select HERO",e),this.gameService.setHero(e),this.gameService.sendGameMessage({command:"select-hero",data:{userId:e}}),this.sendGameToPeers(),this.gameService.nextTask(this.game.tasks[0])}increaseFictionalTime(e){this.gameService.increaseFictionalTime(e),this.gameService.sendGameMessage({command:"set-fictional-time",data:{ftime:this.gameService.getFictionalTime()}})}onPathToTarget(e){console.log("path to target",e),this.pathToTarget=e}usersByNeighbours(){return this.socialGraph.nodes().length?this.game.users.sort((e,n)=>{let r=this.socialGraph.neighbors(e.uuid).length,i=this.socialGraph.neighbors(n.uuid).length;return r-i}):[]}usersOnPathNotification(e){return this.gameService.usersOnPathNotification(e)}userFollow(e){return this.gameService.userIsFollowing(this.socialGraph,e)}userIsFollowed(e){return this.gameService.userIsFollowed(this.socialGraph,e)}userIsOnScreen(e){console.log(`user ${e} is on screen...`),this.highlightedUser=e;let n={command:"highlight-graph-user",data:{userId:e}};this.gameService.sendGameMessage(n)}isAnyOpenTask(){if(!this.game.tasks.length)return!1;for(let e of this.game.tasks)if(!e.completed)return!0;return!1}requestGameControl(){this.gameService.requestGameControl()}};g(Ua,"\u0275fac",function(n){return new(n||Ua)(le(xt),le(_i),le(NR),le(Oa))}),g(Ua,"\u0275cmp",be({type:Ua,selectors:[["app-controller"]],decls:2,vars:1,consts:[[1,"controls"],[1,"controls-icon"],["fontIcon","group_search"],["fontIcon","schedule"],["fontIcon","call_split",1,"cws90"],["fontIcon","merge_type",1,"cws90"],[1,"readers"],[1,"time-to-play"],[1,"content"],[1,"task-description"],[1,"warning"],[1,"spinner"],[3,"task","graph"],[3,"pathToTarget","task","graph"],[3,"onScreen","data"],[3,"click","following","followers","user"],["fontIcon","link_off"]],template:function(n,r){n&1&&ue(0,qW,13,7)(1,YW,7,0),n&2&&ee(r.game&&r.canControl?0:1)},dependencies:[Oi,La,Dp,Ap,OR],styles:['@font-face{font-family:Roboto;src:url(/fonts/Roboto-VariableFont_wdth,wght.ttf) format("truetype");font-weight:100 900;font-style:normal;font-display:swap}@font-face{font-family:Roboto;src:url(/fonts/Roboto-Italic-VariableFont_wdth,wght.ttf) format("truetype");font-weight:100 900;font-style:italic;font-display:swap}@font-face{font-family:Red Hat Mono;src:url(/fonts/RedHatMono-VariableFont_wght.ttf) format("truetype");font-weight:100 900;font-style:normal;font-display:swap}@font-face{font-family:Red Hat Mono;src:url(/fonts/RedHatMono-Italic-VariableFont_wght.ttf) format("truetype");font-weight:100 900;font-style:italic;font-display:swap}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{background-color:#000;color:#ddd;font-family:Roboto,Helvetica Neue,sans-serif;width:100%;height:100%;margin:0;padding:0;font-size:normal}button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#ddd;cursor:pointer;outline:none;border:1px solid #ddd;padding:.5rem 1rem;margin:.5rem;transition:all .3s;font-size:large}button[_ngcontent-%COMP%]:hover{background-color:#ddd;color:#000}.bot-font[_ngcontent-%COMP%], .task-description[_ngcontent-%COMP%], app-screensaver[_ngcontent-%COMP%], app-footer[_ngcontent-%COMP%]   #score[_ngcontent-%COMP%], app-user[_ngcontent-%COMP%]   .analytics[_ngcontent-%COMP%], app-user[_ngcontent-%COMP%]   .traits[_ngcontent-%COMP%], app-user[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   .moving-text[_ngcontent-%COMP%], app-controller[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], app-controller[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%], app-controller[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{font-family:Red Hat Mono,monospace;font-optical-sizing:auto;font-weight:100;font-style:normal}app-main-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;height:100%;padding:1.5rem}app-main-menu[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:0;font-size:3rem}app-main-menu[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;font-weight:300;font-size:.8823529412rem}app-main-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:2rem}app-main-menu[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}app-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;overflow:hidden}app-game[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]{position:absolute;max-width:25%;left:0;top:0}app-game[_ngcontent-%COMP%]   app-graph[_ngcontent-%COMP%]{overflow:hidden}app-footer[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100%}qr-code[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:7.5rem;transform:translate(-50%);z-index:1001;animation:_ngcontent-%COMP%_pulse 10s infinite;box-shadow:0 0 #fff6;background-color:#fff}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #fff6}25%{box-shadow:0 0 0 800px #fff0}to{box-shadow:0 0 #fff0}}graph-viewer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%}app-feed[_ngcontent-%COMP%]{position:absolute;right:0;top:0;width:25%;height:100%;padding:0;display:block;overflow:hidden;background-color:#000000d9}app-feed[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]{background-color:#00000080}app-feed[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]   app-post[_ngcontent-%COMP%]{border-top:1px dashed #ddd;padding-top:.75rem;margin-top:0;margin-bottom:1.125rem}app-feed[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]   app-post[_ngcontent-%COMP%]:first-child{border-top:none}app-controller[_ngcontent-%COMP%]{display:block;width:100%;overflow:auto;padding-bottom:15rem;font-size:large;padding-top:1.5rem;position:relative}app-controller[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;display:flex;flex-direction:column;align-items:center}app-controller[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{margin-top:30vh;text-align:center}app-controller[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:space-between;align-items:center;top:0;left:0;width:100%;height:fit-content;padding:.75rem;background-color:#000;z-index:999999}app-controller[_ngcontent-%COMP%] > .controls[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}app-controller[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;margin-top:4.5rem}app-controller[_ngcontent-%COMP%]   app-post[_ngcontent-%COMP%]{border:1px solid #ddd;padding:.75rem;margin:0 0 1.5rem}app-controller[_ngcontent-%COMP%]   app-post[_ngcontent-%COMP%]   .reactions[_ngcontent-%COMP%]{display:none}app-user[_ngcontent-%COMP%]{display:block;padding:.75rem;border:1px dashed #ddd;background-color:#000000d9;margin-bottom:1.5rem;margin-top:2px}app-user.highlight[_ngcontent-%COMP%]{border:1px solid #ddd}app-user[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}app-user[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between}app-user[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .user-profile-picture[_ngcontent-%COMP%], app-user[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .user-profile-picture-smaller[_ngcontent-%COMP%], app-user[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .user-profile-picture-small[_ngcontent-%COMP%], app-user[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .user-profile-picture-medium[_ngcontent-%COMP%]{margin-left:.3rem}app-user[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}app-user[_ngcontent-%COMP%]   .user-header[_ngcontent-%COMP%]   .moving-text[_ngcontent-%COMP%]{max-width:80%}app-user[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%]{display:flex;flex-direction:row}app-user[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{padding-right:.375rem;margin-right:.375rem;border-right:1px solid #ddd}app-user[_ngcontent-%COMP%]   .user-details[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:last-child{margin-right:0;padding-right:0;border-right:none}app-user[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]{padding-bottom:.75rem;margin-bottom:.75rem;border-bottom:1px solid #ddd}app-user[_ngcontent-%COMP%]   .traits[_ngcontent-%COMP%]   .trait[_ngcontent-%COMP%]{padding:.375rem;margin-bottom:.375rem;border:1px solid #ddd}app-user[_ngcontent-%COMP%]   .connections[_ngcontent-%COMP%]{padding:.375rem;display:flex;flex-direction:row;align-items:center;justify-content:flex-start}app-user[_ngcontent-%COMP%]   .connections[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:.75rem}app-user[_ngcontent-%COMP%]   .analytics[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;margin-top:.75rem;border-top:1px solid #ddd;padding-top:.75rem}app-user[_ngcontent-%COMP%]   .analytics[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:row;align-items:center;justify-content:space-between}app-user[_ngcontent-%COMP%]   .analytics[_ngcontent-%COMP%]   .psychoanalysis[_ngcontent-%COMP%]{margin-top:.5rem}app-post[_ngcontent-%COMP%]{display:block;margin:1.5rem .75rem}app-post[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;margin-bottom:.75rem}app-post[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:.75rem}app-post[_ngcontent-%COMP%]   .post-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-end}app-post[_ngcontent-%COMP%]   .post-right[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}app-post[_ngcontent-%COMP%]   .reactions[_ngcontent-%COMP%]{padding:.5rem 0;display:flex;flex-direction:row;gap:.5rem}app-post[_ngcontent-%COMP%]   .reaction-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem;margin-right:1rem}app-post[_ngcontent-%COMP%]   .reacted-by[_ngcontent-%COMP%]{font-size:.9rem;color:#666}app-footer[_ngcontent-%COMP%]   #score[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;padding:.375rem;align-items:center;background-color:#000}app-footer[_ngcontent-%COMP%]   #score[_ngcontent-%COMP%]   #engagement[_ngcontent-%COMP%]{padding-right:.5rem}app-footer[_ngcontent-%COMP%]   #score[_ngcontent-%COMP%]   #lifes[_ngcontent-%COMP%], app-footer[_ngcontent-%COMP%]   #score[_ngcontent-%COMP%]   #limit[_ngcontent-%COMP%]{padding:0 .5rem}app-comment[_ngcontent-%COMP%]{display:block;padding-left:1rem;border-left:1px solid #ddd;padding-top:.75rem}app-comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;margin-bottom:.5rem}app-comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-right:.75rem}app-comment[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}app-on-screen[_ngcontent-%COMP%]{display:block}app-screensaver[_ngcontent-%COMP%]{position:fixed;z-index:1000;top:0;left:0;width:100%;height:100%;background-color:#000000e6;font-size:2rem}app-screensaver[_ngcontent-%COMP%]   #titles[_ngcontent-%COMP%]{position:absolute;top:35%;left:50%;transform:translate(-50%,-50%)}app-task[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:3rem}mat-icon.cws90[_ngcontent-%COMP%]{transform:rotate(90deg)}.user-profile-picture[_ngcontent-%COMP%], .user-profile-picture-smaller[_ngcontent-%COMP%], .user-profile-picture-small[_ngcontent-%COMP%], .user-profile-picture-medium[_ngcontent-%COMP%]{overflow:hidden;border-radius:50%;width:4.5rem;height:4.5rem}.user-profile-picture.dashed[_ngcontent-%COMP%], .dashed.user-profile-picture-smaller[_ngcontent-%COMP%], .dashed.user-profile-picture-small[_ngcontent-%COMP%], .dashed.user-profile-picture-medium[_ngcontent-%COMP%]{outline:3px dashed #ddd;outline-offset:3px}.user-profile-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .user-profile-picture-smaller[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .user-profile-picture-small[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .user-profile-picture-medium[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.user-profile-picture-medium[_ngcontent-%COMP%]{width:3.75rem;height:3.75rem}.user-profile-picture-small[_ngcontent-%COMP%]{width:3rem;height:3rem}.user-profile-picture-smaller[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.spacer[_ngcontent-%COMP%]{flex-grow:1}.grayscale[_ngcontent-%COMP%], app-game[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%], graph-viewer[_ngcontent-%COMP%], app-feed[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%], app-controller[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{filter:none}.task-description[_ngcontent-%COMP%]{margin:.5rem 0 1.5rem;text-align:center}.task-description[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .task-description[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:300;font-size:2.5rem;margin-bottom:0}.spinner[_ngcontent-%COMP%]{width:60px;height:60px;background-color:#ddd;margin:100px auto;-webkit-animation:_ngcontent-%COMP%_sk-rotateplane 1.4s infinite ease-in-out;animation:_ngcontent-%COMP%_sk-rotateplane 1.4s infinite ease-in-out}@-webkit-keyframes _ngcontent-%COMP%_sk-rotateplane{0%{-webkit-transform:perspective(120px)}50%{-webkit-transform:perspective(120px) rotateY(180deg)}to{-webkit-transform:perspective(120px) rotateY(180deg) rotateX(180deg)}}@keyframes _ngcontent-%COMP%_sk-rotateplane{0%{transform:perspective(120px) rotateX(0) rotateY(0);-webkit-transform:perspective(120px) rotateX(0deg) rotateY(0deg)}50%{transform:perspective(120px) rotateX(-180.1deg) rotateY(0);-webkit-transform:perspective(120px) rotateX(-180.1deg) rotateY(0deg)}to{transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg);-webkit-transform:perspective(120px) rotateX(-180deg) rotateY(-179.9deg)}}']}));var Mp=Ua;var FR=[{path:"",redirectTo:"/game",pathMatch:"full"},{path:"settings",component:kf},{path:"game",component:Ep},{path:"controller",component:Mp},{path:"**",component:Cp}];var LR={providers:[DC({eventCoalescing:!0}),sD(),nS(FR)]};var ja=class ja{title="feed-em"};g(ja,"\u0275fac",function(n){return new(n||ja)}),g(ja,"\u0275cmp",be({type:ja,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&re(0,"router-outlet")},dependencies:[Dv],encapsulation:2}));var Rp=ja;yD(Rp,LR).catch(t=>console.error(t));
