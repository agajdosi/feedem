@if(game && canControl) {
    <div class="controls">
        @if(!game.hero) {
            <h2>Choose the user to manage</h2>
        }
        @if(!isAnyOpenTask() && game.hero) {
            Waiting for task...
        }
        @if(countDownTimer) {
            <div class="time-to-play">{{countDownTimer.valueString}}</div>
        }
        @if(pathToTarget.length >= 1) {
            <div class="readers">{{pathToTarget.length ? pathToTarget.length - 1 : 0}} user targeted</div>
        }
    </div>

    <div class="content">
        @if(!isAnyOpenTask() && game.hero) {
            <!-- <app-screensaver></app-screensaver> -->
            <!-- TODO: SOME LOADER? -->
        }
        @if(game.hero) {
            @for(task of game.tasks; track task.uuid) {
                @if(!task.completed) {
                    <app-task
                        [task]="task"
                        [graph]="socialGraph"
                        (pathToTarget)="onPathToTarget($event)"
                    ></app-task>
                }
        
            }
        }@else {
            @for(hero of usersByNeighbours(); track hero.uuid) {
                <app-on-screen [data]="hero.uuid" (onScreen)="userIsOnScreen($event)"></app-on-screen>
                <app-user
                    (click)="selectHero(hero.uuid)"
                    [following]="userFollow(hero.uuid)"
                    [followers]="userIsFollowed(hero.uuid)"
                    [user]="hero"
                    [class]="{'highlight': highlightedUser === hero.uuid}"
                ></app-user>
            }
        }
    </div>
}@else {
    <div class="controls">
        <h2>Reconnect the game...</h2>
    </div>
}


<app-score></app-score>
